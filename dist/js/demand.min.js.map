{"version":3,"sources":["webpack:///js/demand.min.js","webpack:///webpack/bootstrap 4be73261cf5c0339a05d?c7a0","webpack:///./src/demand/fn.js?8f94","webpack:///./src/demand/module.js?a760","webpack:///./src/demand/error.js?4605","webpack:///./src/demand/path.js?8e55","webpack:///./src/demand/init.js?4ded","webpack:///./src/demand/queue.js?c83d","webpack:///./src/demand/script.js?b4d4","webpack:///./src/demand/compatibility.js?3a8f","webpack:///./src/demand/demand.js?f1fb","webpack:///./src/demand/dep.js?5004","webpack:///./src/demand/shim.js?24f5","webpack:///./src/demand/use.js?2522","webpack:///./src/index.js?9552"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","Fn","this","array","Array","obj","fn","string","num","isNaN","cb","len","isArr","context","args","isFn","apply","expr","each","tmItem","index","replace","RegExp","default","_interopRequireDefault","hasModule","path","_path","resolvePath","pathModule","idModule","urlModule","findModule","removeModule","opts","url","setModule","lastLoader","lastLoadedModule","dep","_fn2","type","findM","id","loadModules","_init","setPaths","_script","runCreateScript","isDemand","depManage","push","resetLastLoadedModule","_export_","_fn","error","errCode","msg","console","warn","isHttpModule","resolveAliasPath","resolveAlias","resPath","baseUrl","splitResPath","split","pop","join","resolveJsExt","test","HTTP","ALIAS","alias","_alias","lastIndex","initRegExp","paths","_this","demand","urlModules","pathModules","pathConfig","_module","hasCreateScript","isCreateScript","createScript","isStr","setAlias","aliasPath","ALIAS_PATH","Queue","queue","shift","script","document","createElement","async","onload","_queue","next","onerror","_error2","remove","e","parentNode","removeChild","src","getElementsByTagName","appendChild","_this2","_error","indexOf","val","map","mapArr","filter","item","_module2","use","status","_use","runUse","undefined","_typeof","Symbol","iterator","constructor","_shim","origin","location","protocol","host","isConfig","config","isObj","setShim","shim","useQueue","loadModule","global","window","depQueue","define","buildModuleDep","deps","demandDep","build","shimContext","_dep","cbDeps","depData","err","_demand","_demand2","_compatibility","factory","version"],"mappings":"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","file":"js/demand.min.js","sourcesContent":["/*!\n * \n * \t\t\tdemand.js v1.0.0\n * \t\t\t(c) 2016-2017 Blue\n * \t\t\tReleased under the MIT License.\n * \t\t\thttps://github.com/azhanging/demand\n * \t\t\ttime:Sat Sep 09 2017 22:54:30 GMT+0800 (中国标准时间)\n * \t\t\n */\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 12);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n//常用方法\nvar Fn = function () {\n\tfunction Fn() {\n\t\t_classCallCheck(this, Fn);\n\t}\n\n\t_createClass(Fn, [{\n\t\tkey: 'isArr',\n\t\tvalue: function isArr(array) {\n\t\t\treturn array instanceof Array;\n\t\t}\n\t}, {\n\t\tkey: 'isObj',\n\t\tvalue: function isObj(obj) {\n\t\t\treturn obj instanceof Object && !(obj instanceof Array) && obj !== null;\n\t\t}\n\t}, {\n\t\tkey: 'isFn',\n\t\tvalue: function isFn(fn) {\n\t\t\treturn typeof fn === 'function';\n\t\t}\n\t}, {\n\t\tkey: 'isStr',\n\t\tvalue: function isStr(string) {\n\t\t\treturn typeof string === 'string';\n\t\t}\n\t}, {\n\t\tkey: 'isNum',\n\t\tvalue: function isNum(num) {\n\t\t\treturn typeof num === 'number' || !isNaN(num);\n\t\t}\n\t}, {\n\t\tkey: 'each',\n\t\tvalue: function each(obj, cb) {\n\t\t\t//遍历\n\t\t\tvar i = 0,\n\t\t\t    len = obj.length;\n\t\t\tif (this.isArr(obj)) {\n\t\t\t\tfor (; i < len; i++) {\n\t\t\t\t\tcb(obj[i], i);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (i in obj) {\n\t\t\t\t\tif (obj.hasOwnProperty(i)) cb(obj[i], i);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'cb',\n\t\tvalue: function cb(_cb, context, args) {\n\t\t\t//回调\n\t\t\targs = args ? args : [];\n\t\t\tthis.isFn(_cb) ? _cb.apply(context, args) : null;\n\t\t}\n\t\t//处理正则数据\n\n\t}, {\n\t\tkey: 'initRegExp',\n\t\tvalue: function initRegExp(expr) {\n\t\t\tvar tm = '\\\\/*.?+$^[](){}|\\'\\\"';\n\t\t\tthis.each(tm, function (tmItem, index) {\n\t\t\t\texpr = expr.replace(new RegExp('\\\\' + tmItem, 'g'), '\\\\' + tmItem);\n\t\t\t});\n\t\t\treturn expr;\n\t\t}\n\t}]);\n\n\treturn Fn;\n}();\n\nexports.default = new Fn();\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.hasModule = hasModule;\nexports.findModule = findModule;\nexports.removeModule = removeModule;\nexports.setModule = setModule;\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nvar _init = __webpack_require__(4);\n\nvar _path = __webpack_require__(3);\n\nvar _script = __webpack_require__(6);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//has module in demand\nfunction hasModule(m) {\n\tvar path = _path.resolvePath.call(this, m),\n\t    module = this.module;\n\tif (module.pathModule[m] || module.idModule[m] || module.urlModule[path]) return true;\n\treturn false;\n}\n\n//find module in demand.module[path|url|id]  权重：path > url > id\n\n//初始化\nfunction findModule(m) {\n\tvar module = this.module,\n\t    path = _path.resolvePath.call(this, m);\n\tif (module.pathModule[m]) return module.pathModule[m];\n\tif (module.urlModule[path]) return module.urlModule[path];\n\tif (module.idModule[m]) return module.idModule[m];\n\treturn false;\n}\n\n//del error module\nfunction removeModule(opts) {\n\tdelete this.module.urlModule[opts.url];\n\tdelete this.module.pathModule[opts.name];\n}\n\n//set module config\nfunction setModule(opts) {\n\n\tvar lastLoader = this.module.lastLoadedModule;\n\n\tvar dep = lastLoader.dep;\n\n\t//把最后加载的模块内容加载进去\n\t_fn2.default.each(lastLoader, function (module, type) {\n\t\topts.findM[type] = module;\n\t});\n\n\t//扶弱当前的模块中存在id的名，设置id的模块\n\tif (lastLoader.id) {\n\t\tthis.module.idModule[lastLoader.id] = opts.findM;\n\t}\n\n\t//查看依赖，设置一下依赖\n\tif (dep.length > 0) {\n\t\tvar loadModules = _init.setPaths.call(this, dep);\n\t\t_script.runCreateScript.call(this, loadModules);\n\t}\n\n\t//设置初始化的状态\n\topts.findM.isDemand = false;\n\n\t//运行模块内容，返回接口\n\tthis.module.depManage.push(opts.findM);\n\n\t//重设最后的模块\n\tresetLastLoadedModule.call(this);\n}\n\n//重设最后的模块,在http模块中会存在不同规格的内容，需要设置一个空的规格\nfunction resetLastLoadedModule() {\n\tthis.module.lastLoadedModule = {\n\t\t_export_: function _export_() {\n\t\t\treturn function () {};\n\t\t},\n\n\t\tdep: [],\n\t\tid: null\n\t};\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = error;\n/*\r\n *\t错误处理 \r\n * */\n\nfunction error(errCode, msg) {\n\tswitch (errCode) {\n\t\tcase 0:\n\t\t\tconsole.warn('只允许实例化一次！');\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tconsole.error(msg + '加载模块出错！');\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tconsole.error('模块使用有误，不能当前模块依赖于自身！');\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tconsole.error('模块运行有误：' + msg);\n\t}\n}\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.resolvePath = resolvePath;\nexports.resolveJsExt = resolveJsExt;\nexports.isHttpModule = isHttpModule;\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar HTTP = /^http(s)?:\\/\\//;\n\n//路径处理\nfunction resolvePath(path) {\n\t//如果是http的链接，直接返回直接的http链接\n\tif (isHttpModule(path)) {\n\t\treturn path;\n\t}\n\n\t//处理完alias的路径\n\tvar resolveAliasPath = resolveAlias.call(this, path);\n\n\tvar resPath = [this.baseUrl],\n\t    splitResPath = resolveAliasPath.split('/');\n\n\t_fn2.default.each(splitResPath, function (p, index) {\n\t\tswitch (p) {\n\t\t\tcase '':\n\t\t\t\tif (index === 0) resPath[index] = '';\n\t\t\t\tbreak;\n\t\t\tcase '.':\n\t\t\t\tbreak;\n\t\t\tcase '..':\n\t\t\t\tresPath.pop();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tresPath.push(p);\n\t\t}\n\t});\n\n\treturn resPath.join('/').replace(/\\/{2,}/g, '\\/');;\n}\n\n//处理是否存在js后缀\nfunction resolveJsExt(url) {\n\tif (/\\.js/g.test(url)) return url;else return url + '.js';\n}\n\n//判断是否为http(s)的模块\nfunction isHttpModule(url) {\n\treturn HTTP.test(url);\n}\n\nvar ALIAS = /@(.*?)/g;\n\n//处理alias的数据\nfunction resolveAlias(path) {\n\n\t//如果不存在别名，直接返回路径\n\tif (!ALIAS.test(path)) {\n\t\treturn path;\n\t}\n\n\t//存在别名，把别名替换掉\n\t_fn2.default.each(this.alias, function (_alias, key) {\n\t\tALIAS.lastIndex = 0;\n\t\tif (!ALIAS.test(path)) return path;\n\t\tpath = path.replace(new RegExp(_fn2.default.initRegExp(key), 'g'), _alias);\n\t});\n\n\treturn path;\n}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.setPaths = setPaths;\nexports.setAlias = setAlias;\n\nvar _path = __webpack_require__(3);\n\nvar _module = __webpack_require__(1);\n\nvar _script = __webpack_require__(6);\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//设置alias的规则\nvar ALIAS_PATH = /^@\\S{1,}/;\n\n//设置模块路径\nfunction setPaths(paths) {\n\tvar _this = this;\n\n\tvar loadModules = [];\n\n\t_fn2.default.each(paths, function (path, name) {\n\n\t\tvar demand = _this,\n\t\t    resPath = _path.resolvePath.call(_this, path),\n\t\t    //处理完的路径\n\t\turlModules = _this.module.urlModule,\n\t\t    //通过url处理的模块\n\t\tpathModules = _this.module.pathModule,\n\t\t    //通过config中path的模块\n\t\tpathConfig = {\n\t\t\turl: resPath,\n\t\t\tname: name\n\t\t};\n\n\t\t//检查是否存在对应的模块，存在跳过\n\t\tif (_module.hasModule.call(_this, path)) {\n\t\t\tvar hasCreateScript = _script.isCreateScript.call(_this, path);\n\t\t\t//当前的模块是否被加载script\n\t\t\tif (hasCreateScript) {\n\t\t\t\thasCreateScript.call(_this);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\turlModules[resPath] = {\n\t\t\tcreateScript: function createScript() {\n\t\t\t\t_script.createScript.call(demand, pathConfig);\n\t\t\t}\n\t\t};\n\n\t\t//如果是从paths中配置的路径\n\t\tif (_fn2.default.isStr(name)) {\n\t\t\tpathModules[name] = urlModules[resPath];\n\t\t}\n\n\t\tloadModules.push(pathConfig);\n\t});\n\n\t//返回处理完的模块路径\n\treturn loadModules;\n}\n\n//设置别名路径\nfunction setAlias(alias) {\n\tvar aliasPath = {};\n\t_fn2.default.each(alias, function (path, key) {\n\t\tif (ALIAS_PATH.test(key)) {\n\t\t\taliasPath[key] = path;\n\t\t}\n\t});\n\treturn aliasPath;\n}\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\r\n    队列 \r\n * */\n\nvar Queue = function () {\n    function Queue(opts) {\n        _classCallCheck(this, Queue);\n\n        this.queue = [];\n    }\n\n    _createClass(Queue, [{\n        key: \"push\",\n        value: function push(fn) {\n            this.queue.push(fn);\n        }\n    }, {\n        key: \"next\",\n        value: function next() {\n            if (this.queue.length != 0) {\n                this.queue.shift();\n            }\n\n            if (this.queue.length === 0) this.cb();\n        }\n    }]);\n\n    return Queue;\n}();\n\n//创建队列\n\n\nexports.default = Queue;\nvar queue = exports.queue = new Queue();\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.createScript = createScript;\nexports.isCreateScript = isCreateScript;\nexports.runCreateScript = runCreateScript;\n\nvar _module = __webpack_require__(1);\n\nvar _path = __webpack_require__(3);\n\nvar _queue = __webpack_require__(5);\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nvar _error = __webpack_require__(2);\n\nvar _error2 = _interopRequireDefault(_error);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//创建script节点\nfunction createScript(opts) {\n    var _this = this;\n\n    var script = document.createElement('script');\n    //获取模块\n    opts.findM = _module.findModule.call(this, opts.url);\n    //异步加载    \n    script.async = true;\n\n    delete opts.findM.createScript;\n\n    script.onload = function () {\n        _module.setModule.call(_this, opts);\n        _queue.queue.next();\n    };\n\n    script.onerror = function () {\n        _module.removeModule.call(_this, opts);\n        (0, _error2.default)(1, opts.url);\n        try {\n            script.remove();\n        } catch (e) {\n            script.parentNode.removeChild(script);\n        }\n        _queue.queue.next();\n    };\n\n    script.type = \"text/javascript\";\n\n    //先判断是否为http模块，否则就是baseUrl中的模块\n    script.src = (0, _path.isHttpModule)(opts.url) ? opts.url : (0, _path.resolveJsExt)(opts.url);\n\n    //添加依赖队列数据\n    _queue.queue.push(false);\n\n    document.getElementsByTagName('head')[0].appendChild(script);\n}\n\n//检测单前模块script是否加载了\nfunction isCreateScript(path) {\n    var findM = _module.findModule.call(this, path);\n    if (_fn2.default.isFn(findM.createScript)) {\n        return findM.createScript;\n    } else {\n        return false;\n    }\n}\n\n//运行插入模块\nfunction runCreateScript(loadModules) {\n    var _this2 = this;\n\n    _fn2.default.each(loadModules, function (path, index) {\n        createScript.call(_this2, path);\n    });\n}\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//兼容性IE8\n(function () {\n\n    //兼容IE8中 的indexOf\n    if (!_fn2.default.isFn(Array.prototype.indexOf)) {\n        Array.prototype.indexOf = function (val) {\n            var index = 0,\n                len = this.length;\n            for (; index < len; index++) {\n                if (this[index] === val) return index;\n            }\n            return -1;\n        };\n    }\n\n    //map\n    if (!_fn2.default.isFn(Array.prototype.map)) {\n        Array.prototype.map = function (fn) {\n            var mapArr = [],\n                i = 0,\n                len = this.length;\n            for (; i < len; i++) {\n                mapArr.push(fn(this[i], i));\n            }\n            return mapArr;\n        };\n    }\n\n    //filter\n    if (!_fn2.default.isFn(Array.prototype.filter)) {\n        Array.prototype.filter = function (fn) {\n            var mapArr = [],\n                i = 0,\n                len = this.length;\n            for (; i < len; i++) {\n                var item = this[i];\n                if (fn(item, i)) mapArr.push(item);\n            }\n            return mapArr;\n        };\n    }\n})();\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n//初始化\n\n\nexports.default = demand;\n\nvar _module2 = __webpack_require__(1);\n\nvar _use = __webpack_require__(11);\n\nvar _init = __webpack_require__(4);\n\nvar _shim = __webpack_require__(10);\n\nvar _error = __webpack_require__(2);\n\nvar _error2 = _interopRequireDefault(_error);\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction demand(dep, cb) {\n\tvar _this = demand,\n\t    module = _this.module;\n\t//运行依赖\n\tif (_fn2.default.isArr(dep)) {\n\t\t_fn2.default.each(dep, function (name, index) {\n\t\t\tif (!_module2.hasModule.call(_this, name)) return;\n\t\t\tvar findM = _module2.findModule.call(_this, name);\n\t\t\t_fn2.default.cb(findM.createScript, _this);\n\t\t});\n\n\t\t//存储回调，等所有的模块加载完毕后调用\n\t\tmodule.use.push({\n\t\t\tdep: dep,\n\t\t\tcb: cb\n\t\t});\n\n\t\tmodule.status ? _use.runUse.call(_this) : null;\n\t} else if (_fn2.default.isFn(dep)) {\n\t\t/*\r\n   * 使用情况：1.在模块全部加在后追加使用\r\n   *          2.在模块加载依赖的时候使用\r\n   * */\n\t\tmodule.use.push({\n\t\t\tdep: [],\n\t\t\tcb: dep\n\t\t});\n\n\t\tmodule.status ? _use.runUse.call(_this) : null;\n\t} else if (_fn2.default.isStr(dep)) {\n\n\t\t//获取模块\n\t\tvar _module = _module2.findModule.call(_this, dep);\n\t\t//这理由循环依赖的问题，如果当前的模块是未加载的，直接返回undefined\n\t\treturn _module.isDemand ? _module['_export_'] : undefined;\n\t}\n}\n\n//获取根路径\ndemand.origin = function () {\n\treturn location.origin || location.protocol + '//' + location.host;\n}();\n\n//是否config过\nvar isConfig = false;\n\n//配置\ndemand.config = function (opts) {\n\tif (isConfig) {\n\t\t(0, _error2.default)(0);\n\t\treturn;\n\t}\n\t//设置源路径\n\tthis.baseUrl = opts.baseUrl ? opts.baseUrl : this.origin;\n\t//配置别名\n\tthis.alias = _fn2.default.isObj(opts.alias) ? (0, _init.setAlias)(opts.alias) : {};\n\t//设置shim配置\n\t_shim.setShim.call(this, opts.shim);\n\t//设置paths\n\t_init.setPaths.call(this, opts.paths);\n\t//设置queue的回调\n\t_use.useQueue.call(this);\n\t//只允许config一次\n\tisConfig = true;\n};\n\n//再config后以后加载模块\ndemand.loadModule = function (paths) {\n\tif (_fn2.default.isObj(paths)) _init.setPaths.call(this, paths);else if (_fn2.default.isStr(paths)) _init.setPaths.call(this, [paths]);\n\tthis.module.status = false;\n};\n\n//设置一下全局的环境\ndemand.global = (typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== undefined ? window : undefined;\n\n//模块存储\ndemand.module = {\n\tpathModule: {}, //config中的path模块\n\tidModule: {}, //id模块\n\turlModule: {}, //url路径的模块\n\tuse: [], //use集合\n\tlastLoadedModule: {}, //最后获取到的模块\n\tdepManage: [], //依赖管理\n\tdepQueue: [], //依赖队列\n\tstatus: false //全部的use加载状态\n};\n\n//加载模块\ndemand.define = function (id, dep, cb) {\n\tvar module = {};\n\t//存在id的模块\n\tif (_fn2.default.isStr(id)) {\n\t\tmodule['id'] = id;\n\t\tif (_fn2.default.isArr(dep)) {\n\t\t\tmodule['dep'] = dep;\n\t\t\tmodule['_export_'] = cb;\n\t\t} else if (_fn2.default.isFn(dep)) {\n\t\t\tmodule['dep'] = [];\n\t\t\tmodule['_export_'] = dep;\n\t\t}\n\t} else if (_fn2.default.isArr(id)) {\n\t\tmodule['id'] = null;\n\t\tmodule['dep'] = id;\n\t\tmodule['_export_'] = dep;\n\t} else if (_fn2.default.isFn(id)) {\n\t\tmodule['id'] = null;\n\t\tmodule['dep'] = [];\n\t\tmodule['_export_'] = id;\n\t} else {\n\t\tthrow 'error';\n\t}\n\t//设置到最后一个接\n\tthis.module.lastLoadedModule = module;\n};\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.buildModuleDep = buildModuleDep;\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nvar _module = __webpack_require__(1);\n\nvar _error = __webpack_require__(2);\n\nvar _error2 = _interopRequireDefault(_error);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\r\n *\t设置模块内的依赖depData \r\n * \t{\r\n * \t\tdep:[dep1,dep2],\r\n * \t\tmodule:module\r\n * \t}\r\n * */\n\nfunction buildModuleDep(module) {\n\tvar _this = this;\n\n\tvar deps = module.dep,\n\t    demandDep = [];\n\n\tmodule.build = true;\n\n\t//初始化模块依赖\n\t_fn2.default.each(deps, function (dep) {\n\t\tvar findM = _module.findModule.call(_this, dep),\n\t\t    depExport = findM._export_;\n\n\t\t//自己依赖自己的话，返回undefined\n\t\tif (module === findM) {\n\t\t\tdemandDep.push(undefined);\n\t\t} else {\n\t\t\t/*\r\n    *\t有关循环依赖的问题问题\r\n    * */\n\n\t\t\tif (findM && !findM.build) {\n\t\t\t\tbuildModuleDep.call(_this, findM);\n\t\t\t}\n\n\t\t\tif (!findM.isDemand) {\n\t\t\t\tdemandDep.push(undefined);\n\t\t\t} else {\n\t\t\t\tdemandDep.push(findM._export_);\n\t\t\t}\n\t\t}\n\t});\n\n\t//初始化模块接口\n\tif (!module.isDemand) {\n\t\tmodule._export_ = module._export_.apply(this, demandDep);\n\t\tmodule.isDemand = true;\n\t}\n}\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.setShim = setShim;\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nvar _module = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\r\n *\t设置垫片库 \r\n * */\nfunction setShim(shim) {\n\tvar _this = this;\n\n\t_fn2.default.each(shim, function (_shim, id) {\n\n\t\t_this.define(id, _shim.dep, function () {\n\t\t\treturn shimContext.call(_this, _shim);\n\t\t});\n\n\t\tvar lastLoadedModule = _this.module.lastLoadedModule;\n\n\t\t_module.setModule.call(_this, {\n\t\t\turl: null,\n\t\t\tname: null,\n\t\t\tfindM: lastLoadedModule\n\t\t});\n\t});\n}\n\n//处理shim中作用域和export接口\nfunction shimContext(_shim) {\n\tvar context = _shim.context || this.global,\n\t    _export_ = _shim._export_;\n\tif (_fn2.default.isFn(_shim._export_)) {\n\t\treturn _export_.call(context);\n\t}\n\treturn context[_shim._export_];\n}\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.useQueue = useQueue;\nexports.runUse = runUse;\n\nvar _dep = __webpack_require__(9);\n\nvar _queue = __webpack_require__(5);\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nvar _error = __webpack_require__(2);\n\nvar _error2 = _interopRequireDefault(_error);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//设置模块的依赖队列和use中的cb\nfunction useQueue() {\n\tvar _this = this;\n\n\t_queue.queue.cb = function () {\n\t\tvar module = _this.module;\n\t\t//设置dep的依赖\n\t\twhile (module.depManage.length !== 0) {\n\t\t\tvar _module = module.depManage.shift();\n\t\t\t_dep.buildModuleDep.call(_this, _module);\n\t\t}\n\t\t//处理use\n\t\trunUse.call(_this);\n\t\t//第一次的模块加载全部完毕\n\t\tmodule.status = true;\n\t};\n}\n\n//运行依赖\nfunction runUse() {\n\tvar _this2 = this;\n\n\tvar module = this.module;\n\tvar cbDeps = [];\n\twhile (module.use.length !== 0) {\n\t\tvar depData = module.use.shift();\n\t\t_fn2.default.each(depData.dep, function (dep, index) {\n\t\t\tcbDeps.push(_this2(dep));\n\t\t});\n\n\t\ttry {\n\t\t\tdepData.cb.apply(this, cbDeps);\n\t\t} catch (err) {\n\t\t\t(0, _error2.default)(null, err);\n\t\t}\n\n\t\t//依赖处理完后清空\n\t\tcbDeps = [];\n\t}\n}\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _demand = __webpack_require__(8);\n\nvar _demand2 = _interopRequireDefault(_demand);\n\nvar _compatibility = __webpack_require__(7);\n\nvar _compatibility2 = _interopRequireDefault(_compatibility);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//demand文件入口\n(function (global, factory) {\n    global ? global.demand = factory() : {};\n})(typeof window !== 'undefined' ? window : undefined, function () {\n\n    _demand2.default.version = \"v1.0.0\";\n\n    return _demand2.default;\n});\n//兼容性处理\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// js/demand.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4be73261cf5c0339a05d","//常用方法\r\nclass Fn {\r\n\tisArr(array) {\r\n\t\treturn array instanceof Array;\r\n\t}\r\n\r\n\tisObj(obj) {\r\n\t\treturn obj instanceof Object && !(obj instanceof Array) && obj !== null;\r\n\t}\r\n\r\n\tisFn(fn) {\r\n\t\treturn typeof fn === 'function';\r\n\t}\r\n\tisStr(string) {\r\n\t\treturn typeof string === 'string';\r\n\t}\r\n\tisNum(num) {\r\n\t\treturn typeof num === 'number' || !isNaN(num);\r\n\t}\r\n\teach(obj, cb) { //遍历\r\n\t\tlet i = 0,\r\n\t\t\tlen = obj.length;\r\n\t\tif(this.isArr(obj)) {\r\n\t\t\tfor(; i < len; i++) {\r\n\t\t\t\tcb(obj[i], i);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor(i in obj) {\r\n\t\t\t\tif(obj.hasOwnProperty(i)) cb(obj[i], i);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tcb(cb, context, args) { //回调\r\n\t\targs = args ? args : [];\r\n\t\tthis.isFn(cb) ? (cb.apply(context, args)) : null;\r\n\t}\r\n\t//处理正则数据\r\n\tinitRegExp(expr) {\r\n\t\tconst tm = '\\\\/*.?+$^[](){}|\\'\\\"';\r\n\t\tthis.each(tm, (tmItem, index) => {\r\n\t\t\texpr = expr.replace(new RegExp('\\\\' + tmItem, 'g'), '\\\\' + tmItem);\r\n\t\t});\r\n\t\treturn expr;\r\n\t}\r\n}\r\n\r\nexport default new Fn();\n\n\n// WEBPACK FOOTER //\n// ./src/demand/fn.js","import fn from './fn';\r\n//初始化\r\nimport { setPaths } from './init';\r\n\r\nimport { resolvePath } from './path';\r\n\r\nimport { runCreateScript } from './script';\r\n\r\n//has module in demand\r\nexport function hasModule(m) {\r\n\tconst path = resolvePath.call(this, m),\r\n\t\tmodule = this.module;\r\n\tif(module.pathModule[m] ||\r\n\t\tmodule.idModule[m] ||\r\n\t\tmodule.urlModule[path]\r\n\t) return true;\r\n\treturn false;\r\n}\r\n\r\n//find module in demand.module[path|url|id]  权重：path > url > id\r\nexport function findModule(m) {\r\n\tconst module = this.module,\r\n\t\tpath = resolvePath.call(this, m);\r\n\tif(module.pathModule[m]) return module.pathModule[m];\r\n\tif(module.urlModule[path]) return module.urlModule[path];\r\n\tif(module.idModule[m]) return module.idModule[m];\r\n\treturn false;\r\n}\r\n\r\n//del error module\r\nexport function removeModule(opts){\r\n\tdelete this.module.urlModule[opts.url];\r\n\tdelete this.module.pathModule[opts.name];\r\n}\r\n\r\n//set module config\r\nexport function setModule(opts) {\r\n\r\n\tconst lastLoader = this.module.lastLoadedModule;\r\n\r\n\tlet dep = lastLoader.dep;\r\n\r\n\t//把最后加载的模块内容加载进去\r\n\tfn.each(lastLoader, (module, type) => {\r\n\t\topts.findM[type] = module;\r\n\t});\r\n\r\n\t//扶弱当前的模块中存在id的名，设置id的模块\r\n\tif(lastLoader.id) {\r\n\t\tthis.module.idModule[lastLoader.id] = opts.findM;\r\n\t}\r\n\r\n\t//查看依赖，设置一下依赖\r\n\tif(dep.length > 0) {\r\n\t\tconst loadModules = setPaths.call(this, dep);\r\n\t\trunCreateScript.call(this, loadModules);\r\n\t}\r\n\r\n\t//设置初始化的状态\r\n\topts.findM.isDemand = false;\r\n\r\n\t//运行模块内容，返回接口\r\n\tthis.module.depManage.push(opts.findM);\r\n\r\n\t//重设最后的模块\r\n\tresetLastLoadedModule.call(this);\r\n}\r\n\r\n//重设最后的模块,在http模块中会存在不同规格的内容，需要设置一个空的规格\r\nfunction resetLastLoadedModule() {\r\n\tthis.module.lastLoadedModule = {\r\n\t\t_export_() {return ()=>{}},\r\n\t\tdep: [],\r\n\t\tid: null\r\n\t};\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/demand/module.js","/*\r\n *\t错误处理 \r\n * */\r\n\r\nexport default function error(errCode, msg) {\r\n\tswitch(errCode) {\r\n\t\tcase 0:\r\n\t\t\tconsole.warn('只允许实例化一次！');\r\n\t\t\tbreak;\r\n\t\tcase 1:\r\n\t\t\tconsole.error(msg + '加载模块出错！');\r\n\t\t\tbreak;\r\n\t\tcase 2:\r\n\t\t\tconsole.error('模块使用有误，不能当前模块依赖于自身！');\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tconsole.error('模块运行有误：' + msg);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/error.js","import fn from './fn';\r\n\r\nconst HTTP = /^http(s)?:\\/\\//;\r\n\r\n//路径处理\r\nexport function resolvePath(path) {\r\n    //如果是http的链接，直接返回直接的http链接\r\n    if(isHttpModule(path)){\r\n        return path;\r\n    }\r\n    \r\n    //处理完alias的路径\r\n    const resolveAliasPath = resolveAlias.call(this,path);\r\n    \r\n\tconst resPath = [this.baseUrl],\r\n\t\tsplitResPath = resolveAliasPath.split('/');\r\n\t\t\r\n\tfn.each(splitResPath, (p, index) => {\r\n\t\tswitch(p) {\r\n\t\t\tcase '':\r\n\t\t\t\tif(index === 0) resPath[index] = '';\r\n\t\t\t\tbreak;\r\n\t\t\tcase '.':\r\n\t\t\t\tbreak;\r\n\t\t\tcase '..':\r\n\t\t\t\tresPath.pop();\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tresPath.push(p);\r\n\t\t}\r\n\t});\r\n\t\r\n\treturn resPath.join('/').replace(/\\/{2,}/g,'\\/');;\r\n}\r\n\r\n//处理是否存在js后缀\r\nexport function resolveJsExt(url) {\r\n\tif(/\\.js/g.test(url)) return url;\r\n\telse return url + '.js';\r\n}\r\n\r\n//判断是否为http(s)的模块\r\nexport function isHttpModule(url){\r\n    return HTTP.test(url);\r\n}\r\n\r\nconst ALIAS = /@(.*?)/g; \r\n\r\n//处理alias的数据\r\nfunction resolveAlias(path){\r\n\t\r\n\t//如果不存在别名，直接返回路径\r\n\tif(!ALIAS.test(path)){\r\n\t\treturn path;\t\r\n\t}\r\n\t\r\n\t//存在别名，把别名替换掉\r\n\tfn.each(this.alias,(_alias,key)=>{\r\n\t\tALIAS.lastIndex = 0;\r\n\t\tif(!ALIAS.test(path)) return path;\r\n\t\tpath = path.replace(new RegExp(fn.initRegExp(key),'g'),_alias);\r\n\t});\r\n\t\r\n\treturn path;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/demand/path.js","import { resolvePath } from './path';\r\n\r\nimport { hasModule, findModule } from './module';\r\n\r\nimport { createScript, isCreateScript } from './script';\r\n\r\nimport fn from './fn';\r\n\r\n//设置alias的规则\r\nconst ALIAS_PATH = /^@\\S{1,}/;\r\n\r\n//设置模块路径\r\nexport function setPaths(paths) {\r\n\r\n\tconst loadModules = [];\r\n\r\n\tfn.each(paths, (path, name) => {\r\n\r\n\t\tconst demand = this,\r\n\t\t\tresPath = resolvePath.call(this, path), //处理完的路径\r\n\t\t\turlModules = this.module.urlModule, //通过url处理的模块\r\n\t\t\tpathModules = this.module.pathModule, //通过config中path的模块\r\n\t\t\tpathConfig = {\r\n\t\t\t\turl: resPath,\r\n\t\t\t\tname: name\r\n\t\t\t};\r\n\r\n\t\t//检查是否存在对应的模块，存在跳过\r\n\t\tif(hasModule.call(this, path)) {\r\n\t\t\tconst hasCreateScript = isCreateScript.call(this, path);\r\n\t\t\t//当前的模块是否被加载script\r\n\t\t\tif(hasCreateScript) {\r\n\t\t\t\thasCreateScript.call(this);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\turlModules[resPath] = {\r\n\t\t\tcreateScript() {\r\n\t\t\t\tcreateScript.call(demand, pathConfig);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//如果是从paths中配置的路径\r\n\t\tif(fn.isStr(name)) {\r\n\t\t\tpathModules[name] = urlModules[resPath];\r\n\t\t}\r\n\r\n\t\tloadModules.push(pathConfig);\r\n\t});\r\n\r\n\t//返回处理完的模块路径\r\n\treturn loadModules;\r\n}\r\n\r\n//设置别名路径\r\nexport function setAlias(alias) {\r\n\tconst aliasPath = {};\r\n\tfn.each(alias, (path, key) => {\r\n\t\tif(ALIAS_PATH.test(key)) {\r\n\t\t\taliasPath[key] = path;\r\n\t\t}\r\n\t});\r\n\treturn aliasPath;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/init.js","/*\r\n    队列 \r\n * */\r\n\r\nexport default class Queue {\r\n    constructor(opts) {\r\n        this.queue = [];\r\n    }\r\n    push(fn) {\r\n        this.queue.push(fn);\r\n    }\r\n    next() {\r\n        if(this.queue.length != 0) {\r\n            this.queue.shift();\r\n        }\r\n        \r\n        if(this.queue.length === 0) this.cb();\r\n    }\r\n}\r\n\r\n//创建队列\r\nexport const queue = new Queue();\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/demand/queue.js","import { findModule, setModule, removeModule } from './module';\r\n\r\nimport { resolveJsExt, isHttpModule } from './path';\r\n\r\nimport { queue } from './queue';\r\n\r\nimport fn from './fn';\r\n\r\nimport error from './error';\r\n\r\n//创建script节点\r\nexport function createScript(opts) {\r\n    const script = document.createElement('script');\r\n    //获取模块\r\n    opts.findM = findModule.call(this, opts.url);\r\n    //异步加载    \r\n    script.async = true;\r\n\r\n    delete opts.findM.createScript;\r\n\r\n    script.onload = () => {\r\n        setModule.call(this, opts);\r\n        queue.next();\r\n    };\r\n\r\n    script.onerror = () => {\r\n        removeModule.call(this, opts);\r\n        error(1, opts.url);\r\n        try {\r\n            script.remove();\r\n        } catch(e) {\r\n            script.parentNode.removeChild(script);\r\n        }\r\n        queue.next();\r\n    };\r\n\r\n    script.type = \"text/javascript\";\r\n\r\n    //先判断是否为http模块，否则就是baseUrl中的模块\r\n    script.src = isHttpModule(opts.url) ? opts.url : resolveJsExt(opts.url);\r\n\r\n    //添加依赖队列数据\r\n    queue.push(false);\r\n\r\n    document.getElementsByTagName('head')[0].appendChild(script);\r\n}\r\n\r\n//检测单前模块script是否加载了\r\nexport function isCreateScript(path) {\r\n    const findM = findModule.call(this, path);\r\n    if(fn.isFn(findM.createScript)) {\r\n        return findM.createScript;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\n//运行插入模块\r\nexport function runCreateScript(loadModules) {\r\n    fn.each(loadModules, (path, index) => {\r\n        createScript.call(this, path);\r\n    });\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/script.js","import fn from './fn';\r\n\r\n//兼容性IE8\r\n(function() {\r\n\r\n    //兼容IE8中 的indexOf\r\n    if(!fn.isFn(Array.prototype.indexOf)) {\r\n        Array.prototype.indexOf = function(val) {\r\n            let index = 0,\r\n                len = this.length;\r\n            for(; index < len; index++) {\r\n                if(this[index] === val) return index;\r\n            }\r\n            return -1;\r\n        }\r\n    }\r\n\r\n    //map\r\n    if(!fn.isFn(Array.prototype.map)) {\r\n        Array.prototype.map = function(fn) {\r\n            let mapArr = [],\r\n                i = 0,\r\n                len = this.length;\r\n            for(; i < len; i++) {\r\n                mapArr.push(fn(this[i], i));\r\n            }\r\n            return mapArr;\r\n        }\r\n    }\r\n\r\n    //filter\r\n    if(!fn.isFn(Array.prototype.filter)) {\r\n        Array.prototype.filter = function(fn) {\r\n            let mapArr = [],\r\n                i = 0,\r\n                len = this.length;\r\n            for(; i < len; i++) {\r\n                let item = this[i];\r\n                if(fn(item, i)) mapArr.push(item);\r\n            }\r\n            return mapArr;\r\n        }\r\n    }\r\n\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./src/demand/compatibility.js","import { hasModule, findModule } from './module';\r\n\r\nimport { useQueue, checkRunUse, runUse } from './use';\r\n//初始化\r\nimport { setAlias, setPaths } from './init';\r\n\r\nimport { setShim } from './shim';\r\n\r\nimport error from './error';\r\n\r\nimport fn from './fn';\r\n\r\nexport default function demand(dep, cb) {\r\n\tconst _this = demand,\r\n\t\tmodule = _this.module;\r\n\t//运行依赖\r\n\tif(fn.isArr(dep)) {\r\n\t\tfn.each(dep, (name, index) => {\r\n\t\t\tif(!hasModule.call(_this, name)) return;\r\n\t\t\tconst findM = findModule.call(_this, name);\r\n\t\t\tfn.cb(findM.createScript, _this);\r\n\t\t});\r\n\r\n\t\t//存储回调，等所有的模块加载完毕后调用\r\n\t\tmodule.use.push({\r\n\t\t\tdep: dep,\r\n\t\t\tcb: cb\r\n\t\t});\r\n\r\n\t\tmodule.status ? runUse.call(_this) : null;\r\n\r\n\t} else if(fn.isFn(dep)) {\r\n\t\t/*\r\n\t\t * 使用情况：1.在模块全部加在后追加使用\r\n\t\t *          2.在模块加载依赖的时候使用\r\n\t\t * */\r\n\t\tmodule.use.push({\r\n\t\t\tdep: [],\r\n\t\t\tcb: dep\r\n\t\t});\r\n\r\n\t\tmodule.status ? runUse.call(_this) : null;\r\n\r\n\t} else if(fn.isStr(dep)) {\r\n\t\t\r\n\t\t//获取模块\r\n\t\tconst module = findModule.call(_this, dep);\r\n\t\t//这理由循环依赖的问题，如果当前的模块是未加载的，直接返回undefined\r\n\t\treturn module.isDemand ? module['_export_'] : undefined;\r\n\t}\r\n}\r\n\r\n//获取根路径\r\ndemand.origin = (function() {\r\n\treturn(location.origin || location.protocol + '//' + location.host);\r\n})();\r\n\r\n//是否config过\r\nlet isConfig = false;\r\n\r\n//配置\r\ndemand.config = function(opts) {\r\n\tif(isConfig) {\r\n\t\terror(0);\r\n\t\treturn;\r\n\t}\r\n\t//设置源路径\r\n\tthis.baseUrl = opts.baseUrl ? opts.baseUrl : this.origin;\r\n\t//配置别名\r\n\tthis.alias = fn.isObj(opts.alias) ? setAlias(opts.alias) : {};\r\n\t//设置shim配置\r\n\tsetShim.call(this, opts.shim);\r\n\t//设置paths\r\n\tsetPaths.call(this, opts.paths);\r\n\t//设置queue的回调\r\n\tuseQueue.call(this);\r\n\t//只允许config一次\r\n\tisConfig = true;\r\n};\r\n\r\n//再config后以后加载模块\r\ndemand.loadModule = function(paths) {\r\n\tif(fn.isObj(paths)) setPaths.call(this, paths);\r\n\telse if(fn.isStr(paths)) setPaths.call(this, [paths]);\r\n\tthis.module.status = false;\r\n}\r\n\r\n//设置一下全局的环境\r\ndemand.global = typeof window !== undefined ? window : this;\r\n\r\n//模块存储\r\ndemand.module = {\r\n\tpathModule: {}, //config中的path模块\r\n\tidModule: {}, //id模块\r\n\turlModule: {}, //url路径的模块\r\n\tuse: [], //use集合\r\n\tlastLoadedModule: {}, //最后获取到的模块\r\n\tdepManage: [], //依赖管理\r\n\tdepQueue: [], //依赖队列\r\n\tstatus: false //全部的use加载状态\r\n};\r\n\r\n//加载模块\r\ndemand.define = function(id, dep, cb) {\r\n\tconst module = {};\r\n\t//存在id的模块\r\n\tif(fn.isStr(id)) {\r\n\t\tmodule['id'] = id;\r\n\t\tif(fn.isArr(dep)) {\r\n\t\t\tmodule['dep'] = dep;\r\n\t\t\tmodule['_export_'] = cb;\r\n\t\t} else if(fn.isFn(dep)) {\r\n\t\t\tmodule['dep'] = [];\r\n\t\t\tmodule['_export_'] = dep;\r\n\t\t}\r\n\t} else if(fn.isArr(id)) {\r\n\t\tmodule['id'] = null;\r\n\t\tmodule['dep'] = id;\r\n\t\tmodule['_export_'] = dep;\r\n\t} else if(fn.isFn(id)) {\r\n\t\tmodule['id'] = null;\r\n\t\tmodule['dep'] = [];\r\n\t\tmodule['_export_'] = id;\r\n\t} else {\r\n\t\tthrow('error');\r\n\t}\r\n\t//设置到最后一个接\r\n\tthis.module.lastLoadedModule = module;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/demand/demand.js","import fn from './fn';\r\n\r\nimport { findModule } from './module';\r\n\r\nimport error from './error';\r\n\r\n/*\r\n *\t设置模块内的依赖depData \r\n * \t{\r\n * \t\tdep:[dep1,dep2],\r\n * \t\tmodule:module\r\n * \t}\r\n * */\r\n\r\nexport function buildModuleDep(module) {\r\n\tconst deps = module.dep,\r\n\t\tdemandDep = [];\r\n\r\n\tmodule.build = true;\r\n\r\n\t//初始化模块依赖\r\n\tfn.each(deps, (dep) => {\r\n\t\tconst findM = findModule.call(this, dep),\r\n\t\t\tdepExport = findM._export_;\r\n\r\n\t\t//自己依赖自己的话，返回undefined\r\n\t\tif(module === findM) {\r\n\t\t\tdemandDep.push(undefined);\r\n\t\t} else {\r\n\t\t\t/*\r\n\t\t\t *\t有关循环依赖的问题问题\r\n\t\t\t * */\r\n\r\n\t\t\tif(findM && !findM.build ) {\r\n\t\t\t\tbuildModuleDep.call(this, findM);\r\n\t\t\t}\r\n\r\n\t\t\tif(!findM.isDemand) {\r\n\t\t\t\tdemandDep.push(undefined);\r\n\t\t\t} else {\r\n\t\t\t\tdemandDep.push(findM._export_);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t//初始化模块接口\r\n\tif(!module.isDemand) {\r\n\t\tmodule._export_ = module._export_.apply(this, demandDep);\r\n\t\tmodule.isDemand = true;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/dep.js","/*\r\n *\t设置垫片库 \r\n * */\r\nimport fn from './fn';\r\n\r\nimport { setModule } from './module';\r\n\r\nexport function setShim(shim) {\r\n\tfn.each(shim, (_shim, id) => {\r\n\t\t\r\n\t\tthis.define(id, _shim.dep, () => {\r\n\t\t\treturn shimContext.call(this, _shim);\r\n\t\t});\r\n\t\t\r\n\t\tconst lastLoadedModule = this.module.lastLoadedModule;\r\n\t\t\r\n\t\tsetModule.call(this, {\r\n\t\t\turl: null,\r\n\t\t\tname: null,\r\n\t\t\tfindM: lastLoadedModule\r\n\t\t});\r\n\t});\r\n}\r\n\r\n//处理shim中作用域和export接口\r\nfunction shimContext(_shim) {\r\n\tconst context = _shim.context || this.global,\r\n\t\t_export_ = _shim._export_;\r\n\tif(fn.isFn(_shim._export_)) {\r\n\t\treturn _export_.call(context);\r\n\t}\r\n\treturn context[_shim._export_];\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/shim.js","import { buildModuleDep } from './dep';\r\n\r\nimport { queue } from './queue';\r\n\r\nimport fn from './fn';\r\n\r\nimport error from './error';\r\n\r\n//设置模块的依赖队列和use中的cb\r\nexport function useQueue() {\r\n\tqueue.cb = () => {\r\n\t\tconst module = this.module;\r\n\t\t//设置dep的依赖\r\n\t\twhile(module.depManage.length !== 0) {\r\n\t\t\tconst _module = module.depManage.shift();\r\n\t\t\tbuildModuleDep.call(this, _module);\r\n\t\t}\r\n\t\t//处理use\r\n\t\trunUse.call(this);\r\n\t\t//第一次的模块加载全部完毕\r\n\t\tmodule.status = true;\r\n\t}\r\n}\r\n\r\n//运行依赖\r\nexport function runUse() {\r\n\tconst module = this.module;\r\n\tlet cbDeps = [];\r\n\twhile(module.use.length !== 0) {\r\n\t\tconst depData = module.use.shift();\r\n\t\tfn.each(depData.dep, (dep, index) => {\r\n\t\t\tcbDeps.push(this(dep));\r\n\t\t});\r\n\r\n\t\ttry {\r\n\t\t\tdepData.cb.apply(this, cbDeps);\r\n\t\t} catch(err) {\r\n\t\t\terror(null, err);\r\n\t\t}\r\n\r\n\t\t//依赖处理完后清空\r\n\t\tcbDeps = [];\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/use.js","//demand文件入口\r\nimport demand from './demand/demand.js';\r\n//兼容性处理\r\nimport compatibility from './demand/compatibility';\r\n\r\n(function(global, factory) {\r\n    (global ? (global.demand = factory()) : {});\r\n})(typeof window !== 'undefined' ? window : this, function() {\r\n\r\n    demand.version = \"v1.0.0\";\r\n\r\n    return demand;\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}