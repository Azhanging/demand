{"version":3,"sources":["webpack:///js/demand.min.js","webpack:///webpack/bootstrap 9d45bc07e93f09f58dc7?1178","webpack:///./src/demand/fn.js?8f94","webpack:///./src/demand/module.js?a760","webpack:///./src/demand/path.js?8e55","webpack:///./src/demand/init.js?4ded","webpack:///./src/demand/queue.js?c83d","webpack:///./src/demand/compatibility.js?3a8f","webpack:///./src/demand/demand.js?f1fb","webpack:///./src/demand/dep.js?5004","webpack:///./src/demand/script.js?b4d4","webpack:///./src/demand/use.js?2522","webpack:///./src/index.js?9552"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","Fn","this","array","Array","obj","t","fn","string","num","isNaN","cb","len","isArr","context","args","isFn","apply","default","_interopRequireDefault","hasModule","path","_path","resolvePath","pathModule","idModule","urlModule","findModule","setModule","opts","lastLoader","lastLoadedModule","dep","_fn2","isEmptyObj","findM","_export_","each","type","id","loadModules","_init","setPaths","_script","runCreateScript","isDemand","depManage","unshift","resetLastLoadedModule","_fn","isHttpModule","resPath","baseUrl","splitResPath","split","index","pop","push","join","resolveJsExt","url","test","HTTP","paths","_this","demand","urlModules","pathModules","pathConfig","_module","hasCreateScript","isCreateScript","createScript","isStr","setAlias","alias","aliasPath","ALIAS_PATH","Queue","queue","shift","indexOf","val","map","mapArr","filter","item","use","status","_use","runUse","origin","location","protocol","host","isConfig","config","console","warn","isObj","useQueue","loadModule","define","buildModuleDep","depData","deps","demandDep","depExport","script","document","createElement","async","onload","_queue","next","error","src","getElementsByTagName","appendChild","_this2","_dep","cbDeps","_demand","_demand2","_compatibility","global","factory","window","undefined","version"],"mappings":"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","file":"js/demand.min.js","sourcesContent":["/*!\n * \n * \t\t\tdemand.js v1.0.0\n * \t\t\t(c) 2016-2017 Blue\n * \t\t\tReleased under the MIT License.\n * \t\t\thttps://github.com/azhanging/demand\n * \t\t\ttime:Thu Sep 07 2017 21:11:45 GMT+0800 (中国标准时间)\n * \t\t\n */\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 10);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n//常用方法\nvar Fn = function () {\n    function Fn() {\n        _classCallCheck(this, Fn);\n    }\n\n    _createClass(Fn, [{\n        key: 'isArr',\n        value: function isArr(array) {\n            return array instanceof Array;\n        }\n    }, {\n        key: 'isObj',\n        value: function isObj(obj) {\n            return obj instanceof Object && !(obj instanceof Array) && obj !== null;\n        }\n    }, {\n        key: 'isEmptyObj',\n        value: function isEmptyObj(obj) {\n            for (var t in obj) {\n                return false;\n            }return true;\n        }\n    }, {\n        key: 'isFn',\n        value: function isFn(fn) {\n            return typeof fn === 'function';\n        }\n    }, {\n        key: 'isStr',\n        value: function isStr(string) {\n            return typeof string === 'string';\n        }\n    }, {\n        key: 'isNum',\n        value: function isNum(num) {\n            return typeof num === 'number' || !isNaN(num);\n        }\n    }, {\n        key: 'each',\n        value: function each(obj, cb) {\n            //遍历\n            var i = 0,\n                len = obj.length;\n            if (this.isArr(obj)) {\n                for (; i < len; i++) {\n                    cb(obj[i], i);\n                }\n            } else {\n                for (i in obj) {\n                    if (obj.hasOwnProperty(i)) cb(obj[i], i);\n                }\n            }\n        }\n    }, {\n        key: 'cb',\n        value: function cb(_cb, context, args) {\n            //回调\n            args = args ? args : [];\n            this.isFn(_cb) ? _cb.apply(context, args) : null;\n        }\n    }]);\n\n    return Fn;\n}();\n\nexports.default = new Fn();\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.hasModule = hasModule;\nexports.findModule = findModule;\nexports.setModule = setModule;\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nvar _init = __webpack_require__(3);\n\nvar _path = __webpack_require__(2);\n\nvar _script = __webpack_require__(8);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//查找当前的模块是否在模块中存在\nfunction hasModule(m) {\n\tvar path = _path.resolvePath.call(this, m),\n\t    module = this.module;\n\tif (module.pathModule[m] || module.idModule[m] || module.urlModule[path]) return true;\n\treturn false;\n}\n\n//查找对应的模块内容  权重：path > url > id\n\n//初始化\nfunction findModule(m) {\n\tvar module = this.module,\n\t    path = _path.resolvePath.call(this, m);\n\tif (module.pathModule[m]) return module.pathModule[m];\n\tif (module.urlModule[path]) return module.urlModule[path];\n\tif (module.idModule[m]) return module.idModule[m];\n\treturn false;\n}\n\n//设置模块的信息\nfunction setModule(opts) {\n\n\tvar lastLoader = this.module.lastLoadedModule;\n\n\tvar dep = lastLoader.dep;\n\n\t//http(s)模块不存在这种规范，不会出现dep依赖和_export_接口；\n\tif (_fn2.default.isEmptyObj(lastLoader)) {\n\t\tdep = [];\n\t\topts.findM._export_ = function () {};\n\t}\n\n\t//把最后加载的模块内容加载进去\n\t_fn2.default.each(lastLoader, function (module, type) {\n\t\topts.findM[type] = module;\n\t});\n\n\t//扶弱当前的模块中存在id的名，设置id的模块\n\tif (lastLoader.id) {\n\t\tthis.module.idModule[lastLoader.id] = opts.findM;\n\t}\n\n\t//查看依赖，设置一下依赖\n\tif (dep.length > 0) {\n\t\tvar loadModules = _init.setPaths.call(this, dep);\n\t\t_script.runCreateScript.call(this, loadModules);\n\t}\n\n\t//设置初始化的状态\n\topts.findM.isDemand = false;\n\n\t//运行模块内容，返回接口\n\tthis.module.depManage.unshift({\n\t\tmodule: opts.findM,\n\t\tdep: dep\n\t});\n\n\t//重设最后的模块\n\tresetLastLoadedModule.call(this);\n}\n\n//重设最后的模块\nfunction resetLastLoadedModule() {\n\tthis.module.lastLoadedModule = {};\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.resolvePath = resolvePath;\nexports.resolveJsExt = resolveJsExt;\nexports.isHttpModule = isHttpModule;\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar HTTP = /^http(s)?:\\/\\//;\n\n//路径处理\nfunction resolvePath(path) {\n\n\tif (isHttpModule(path)) {\n\t\treturn path;\n\t}\n\n\tvar resPath = [this.baseUrl],\n\t    splitResPath = path.split('/');\n\n\t_fn2.default.each(splitResPath, function (p, index) {\n\t\tswitch (p) {\n\t\t\tcase '':\n\t\t\t\tif (index === 0) resPath[index] = '';\n\t\t\t\tbreak;\n\t\t\tcase '.':\n\t\t\t\tbreak;\n\t\t\tcase '..':\n\t\t\t\tresPath.pop();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tresPath.push(p);\n\t\t}\n\t});\n\treturn resPath.join('/');\n}\n\n//处理是否存在js后缀\nfunction resolveJsExt(url) {\n\tif (/\\.js/g.test(url)) return url;else return url + '.js';\n}\n\n//判断是否为http(s)的模块\nfunction isHttpModule(url) {\n\treturn HTTP.test(url);\n}\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.setPaths = setPaths;\nexports.setAlias = setAlias;\n\nvar _path = __webpack_require__(2);\n\nvar _module = __webpack_require__(1);\n\nvar _script = __webpack_require__(8);\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//alias的规则\nvar ALIAS_PATH = /^@\\S{1,}/;\n\n//设置模块路径\nfunction setPaths(paths) {\n\tvar _this = this;\n\n\tvar loadModules = [];\n\n\t_fn2.default.each(paths, function (path, name) {\n\n\t\tvar demand = _this,\n\t\t    resPath = _path.resolvePath.call(_this, path),\n\t\t    //处理完的路径\n\t\turlModules = _this.module.urlModule,\n\t\t    //通过url处理的模块\n\t\tpathModules = _this.module.pathModule,\n\t\t    //通过config中path的模块\n\t\tpathConfig = {\n\t\t\turl: resPath,\n\t\t\tname: name\n\t\t};\n\n\t\t//检查是否存在对应的模块，存在跳过\n\t\tif (_module.hasModule.call(_this, path)) {\n\t\t\tvar hasCreateScript = _script.isCreateScript.call(_this, path);\n\t\t\t//当前的模块是否被加载script\n\t\t\tif (hasCreateScript) {\n\t\t\t\thasCreateScript.call(_this);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\turlModules[resPath] = {\n\t\t\tcreateScript: function createScript() {\n\t\t\t\t_script.createScript.call(demand, pathConfig);\n\t\t\t}\n\t\t};\n\n\t\t//如果是从paths中配置的路径\n\t\tif (_fn2.default.isStr(name)) {\n\t\t\tpathModules[name] = urlModules[resPath];\n\t\t}\n\n\t\tloadModules.push(pathConfig);\n\t});\n\n\t//返回处理完的模块路径\n\treturn loadModules;\n}\n\n//设置别名路径\nfunction setAlias(alias) {\n\tvar aliasPath = {};\n\t_fn2.default.each(alias, function (path, key) {\n\t\tif (ALIAS_PATH.test(key)) {\n\t\t\taliasPath[key] = path;\n\t\t}\n\t});\n\treturn aliasPath;\n}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\r\n    队列 \r\n * */\n\nvar Queue = function () {\n    function Queue(opts) {\n        _classCallCheck(this, Queue);\n\n        this.queue = [];\n    }\n\n    _createClass(Queue, [{\n        key: \"push\",\n        value: function push(fn) {\n            this.queue.push(fn);\n        }\n    }, {\n        key: \"next\",\n        value: function next() {\n            if (this.queue.length != 0) {\n                this.queue.shift();\n            }\n\n            if (this.queue.length === 0) this.cb();\n        }\n    }]);\n\n    return Queue;\n}();\n\n//创建队列\n\n\nexports.default = Queue;\nvar queue = exports.queue = new Queue();\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//兼容性IE8\n(function () {\n\n    //兼容IE8中 的indexOf\n    if (!_fn2.default.isFn(Array.prototype.indexOf)) {\n        Array.prototype.indexOf = function (val) {\n            var index = 0,\n                len = this.length;\n            for (; index < len; index++) {\n                if (this[index] === val) return index;\n            }\n            return -1;\n        };\n    }\n\n    //map\n    if (!_fn2.default.isFn(Array.prototype.map)) {\n        Array.prototype.map = function (fn) {\n            var mapArr = [],\n                i = 0,\n                len = this.length;\n            for (; i < len; i++) {\n                mapArr.push(fn(this[i], i));\n            }\n            return mapArr;\n        };\n    }\n\n    //filter\n    if (!_fn2.default.isFn(Array.prototype.filter)) {\n        Array.prototype.filter = function (fn) {\n            var mapArr = [],\n                i = 0,\n                len = this.length;\n            for (; i < len; i++) {\n                var item = this[i];\n                if (fn(item, i)) mapArr.push(item);\n            }\n            return mapArr;\n        };\n    }\n})();\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = demand;\n\nvar _module = __webpack_require__(1);\n\nvar _use = __webpack_require__(9);\n\nvar _init = __webpack_require__(3);\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//初始化\nfunction demand(dep, cb) {\n    var _this = demand,\n        module = _this.module;\n    //运行依赖\n    if (_fn2.default.isArr(dep)) {\n        _fn2.default.each(dep, function (name, index) {\n            if (!_module.hasModule.call(_this, name)) return;\n            var findM = _module.findModule.call(_this, name);\n            _fn2.default.cb(findM.createScript, _this);\n        });\n\n        //存储回调，等所有的模块加载完毕后调用\n        module.use.push({\n            dep: dep,\n            cb: cb\n        });\n\n        module.status ? _use.runUse.call(_this) : null;\n    } else if (_fn2.default.isFn(dep)) {\n        /*\r\n         * 使用情况：1.在模块全部加在后追加使用\r\n         *          2.在模块加载依赖的时候使用\r\n         * */\n        module.use.push({\n            dep: [],\n            cb: dep\n        });\n\n        module.status ? _use.runUse.call(_this) : null;\n    } else if (_fn2.default.isStr(dep)) {\n        //获取模块\n        return _module.findModule.call(_this, dep)['_export_'];\n    }\n}\n\n//获取根路径\ndemand.origin = function () {\n    return location.origin || location.protocol + '//' + location.host;\n}();\n\nvar isConfig = false;\n\n//配置\ndemand.config = function (opts) {\n    if (isConfig) {\n        console.warn('只允许实例化一次！');\n        return;\n    }\n    //设置源路径\n    this.baseUrl = opts.baseUrl ? opts.baseUrl : this.origin;\n    //配置别名\n    this.alias = _fn2.default.isObj(opts.alias) ? (0, _init.setAlias)(opts.alias) : {};\n    //设置paths\n    _init.setPaths.call(this, opts.paths);\n    //设置queue的回调\n    _use.useQueue.call(this);\n    //只允许config一次\n    isConfig = true;\n};\n\n//再config后以后加载模块\ndemand.loadModule = function (paths) {\n    if (_fn2.default.isObj(paths)) _init.setPaths.call(this, paths);else if (_fn2.default.isStr(paths)) _init.setPaths.call(this, [paths]);\n    this.module.status = false;\n};\n\n//模块存储\ndemand.module = {\n    pathModule: {}, //config中的path模块\n    idModule: {}, //id模块\n    urlModule: {}, //url路径的模块\n    use: [], //use集合\n    lastLoadedModule: {}, //最后获取到的模块\n    depManage: [], //依赖管理\n    status: false //全部的use加载状态\n};\n\n//加载模块\ndemand.define = function (id, dep, cb) {\n    var module = {};\n    //存在id的模块\n    if (_fn2.default.isStr(id)) {\n        module['id'] = id;\n        if (_fn2.default.isArr(dep)) {\n            module['dep'] = dep;\n            module['_export_'] = cb;\n        } else if (_fn2.default.isFn(dep)) {\n            module['dep'] = [];\n            module['_export_'] = dep;\n        }\n    } else if (_fn2.default.isArr(id)) {\n        module['id'] = null;\n        module['dep'] = id;\n        module['_export_'] = dep;\n    } else if (_fn2.default.isFn(id)) {\n        module['id'] = null;\n        module['dep'] = [];\n        module['_export_'] = id;\n    } else {\n        throw 'error';\n    }\n    //设置到最后一个接\n    this.module.lastLoadedModule = module;\n};\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.buildModuleDep = buildModuleDep;\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nvar _module = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\r\n *\t设置模块内的依赖depData \r\n * \t{\r\n * \t\tdep:[dep1,dep2],\r\n * \t\tmodule:module\r\n * \t}\r\n * */\nfunction buildModuleDep(depData) {\n\tvar _this = this;\n\n\tvar module = depData.module,\n\t    deps = depData.dep,\n\t    demandDep = [];\n\n\t_fn2.default.each(deps, function (dep) {\n\t\tvar findM = _module.findModule.call(_this, dep),\n\t\t    depExport = findM._export_;\n\t\tif (!findM.isDemand) {\n\t\t\tfindM._export_ = new depExport();\n\t\t\tfindM.isDemand = true;\n\t\t}\n\t\tdemandDep.push(findM._export_);\n\t});\n\n\tif (!module.isDemand) {\n\t\tmodule._export_ = module._export_.apply(this, demandDep);\n\t\tmodule.isDemand = true;\n\t}\n}\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.createScript = createScript;\nexports.isCreateScript = isCreateScript;\nexports.runCreateScript = runCreateScript;\n\nvar _module = __webpack_require__(1);\n\nvar _path = __webpack_require__(2);\n\nvar _queue = __webpack_require__(4);\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//创建script节点\nfunction createScript(opts) {\n    var _this = this;\n\n    var script = document.createElement('script');\n    //获取模块\n    opts.findM = _module.findModule.call(this, opts.url);\n    script.async = true;\n\n    script.onload = function () {\n        delete opts.findM.createScript;\n        _module.setModule.call(_this, opts);\n        _queue.queue.next();\n    };\n\n    script.error = function () {\n        throw '加载模块出错！';\n    };\n\n    script.type = \"text/javascript\";\n\n    //先判断是否为http模块，否则就是baseUrl中的模块\n    script.src = (0, _path.isHttpModule)(opts.url) ? opts.url : (0, _path.resolveJsExt)(opts.url);\n\n    _queue.queue.push(false);\n\n    document.getElementsByTagName('head')[0].appendChild(script);\n}\n\n//检测单前模块script是否加载了\nfunction isCreateScript(path) {\n    var findM = _module.findModule.call(this, path);\n    if (_fn2.default.isFn(findM.createScript)) {\n        return findM.createScript;\n    } else {\n        return false;\n    }\n}\n\n//运行插入模块\nfunction runCreateScript(loadModules) {\n    var _this2 = this;\n\n    _fn2.default.each(loadModules, function (path, index) {\n        createScript.call(_this2, path);\n    });\n}\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.useQueue = useQueue;\nexports.runUse = runUse;\n\nvar _dep = __webpack_require__(7);\n\nvar _queue = __webpack_require__(4);\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//设置模块的依赖队列和use中的cb\nfunction useQueue() {\n\tvar _this = this;\n\n\t_queue.queue.cb = function () {\n\t\tvar module = _this.module;\n\t\t//设置dep的依赖\n\t\twhile (module.depManage.length !== 0) {\n\t\t\tvar depData = module.depManage.shift();\n\t\t\t_dep.buildModuleDep.call(_this, depData);\n\t\t}\n\t\t//处理use\n\t\trunUse.call(_this);\n\t\t//第一次所有的\n\t\tmodule.status = true;\n\t};\n}\n\n//运行依赖\nfunction runUse() {\n\tvar _this2 = this;\n\n\tvar module = this.module,\n\t    cbDeps = [];\n\twhile (module.use.length !== 0) {\n\t\tvar depData = module.use.shift();\n\t\t_fn2.default.each(depData.dep, function (dep, index) {\n\t\t\tcbDeps.push(_this2(dep));\n\t\t});\n\t\tdepData.cb.apply(this, cbDeps);\n\t}\n}\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _demand = __webpack_require__(6);\n\nvar _demand2 = _interopRequireDefault(_demand);\n\nvar _compatibility = __webpack_require__(5);\n\nvar _compatibility2 = _interopRequireDefault(_compatibility);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//demand文件入口\n(function (global, factory) {\n    global ? global.demand = factory() : {};\n})(typeof window !== 'undefined' ? window : undefined, function () {\n\n    _demand2.default.version = \"v1.0.0\";\n\n    return _demand2.default;\n});\n//兼容性处理\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// js/demand.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9d45bc07e93f09f58dc7","//常用方法\r\nclass Fn {\r\n    isArr(array) {\r\n        return array instanceof Array;\r\n    }\r\n\r\n    isObj(obj) {\r\n        return obj instanceof Object && !(obj instanceof Array) && obj !== null;\r\n    }\r\n    \r\n    isEmptyObj(obj) {\r\n        for (let t in obj) return false;  \r\n        return true;\r\n    }  \r\n\r\n    isFn(fn) {\r\n        return typeof fn === 'function';\r\n    }\r\n    isStr(string) {\r\n        return typeof string === 'string';\r\n    }\r\n    isNum(num) {\r\n        return typeof num === 'number' || !isNaN(num);\r\n    }\r\n    each(obj, cb) { //遍历\r\n        let i = 0,\r\n            len = obj.length;\r\n        if(this.isArr(obj)) {\r\n            for(; i < len; i++) {\r\n                cb(obj[i], i);\r\n            }\r\n        } else {\r\n            for(i in obj) {\r\n                if(obj.hasOwnProperty(i)) cb(obj[i], i);\r\n            }\r\n        }\r\n    }\r\n    cb(cb, context, args) { //回调\r\n        args = args ? args : [];\r\n        this.isFn(cb) ? (cb.apply(context, args)) : null;\r\n    }\r\n}\r\n\r\nexport default new Fn();\n\n\n// WEBPACK FOOTER //\n// ./src/demand/fn.js","import fn from './fn';\r\n//初始化\r\nimport { setPaths } from './init';\r\n\r\nimport { resolvePath } from './path';\r\n\r\nimport { runCreateScript } from './script';\r\n\r\n//查找当前的模块是否在模块中存在\r\nexport function hasModule(m) {\r\n\tconst path = resolvePath.call(this, m),\r\n\t\tmodule = this.module;\r\n\tif(module.pathModule[m] ||\r\n\t\tmodule.idModule[m] ||\r\n\t\tmodule.urlModule[path]\r\n\t) return true;\r\n\treturn false;\r\n}\r\n\r\n//查找对应的模块内容  权重：path > url > id\r\nexport function findModule(m) {\r\n\tconst module = this.module,\r\n\t\tpath = resolvePath.call(this, m);\r\n\tif(module.pathModule[m]) return module.pathModule[m];\r\n\tif(module.urlModule[path]) return module.urlModule[path];\r\n\tif(module.idModule[m]) return module.idModule[m];\r\n\treturn false;\r\n}\r\n\r\n//设置模块的信息\r\nexport function setModule(opts) {\r\n\r\n\tconst lastLoader = this.module.lastLoadedModule;\r\n\t\r\n\tlet\tdep = lastLoader.dep;\r\n\t\t\r\n\t//http(s)模块不存在这种规范，不会出现dep依赖和_export_接口；\r\n\tif(fn.isEmptyObj(lastLoader)){\r\n\t    dep = [];\r\n\t    opts.findM._export_ = function(){};\r\n\t}\r\n\r\n\t//把最后加载的模块内容加载进去\r\n\tfn.each(lastLoader, (module, type) => {\r\n\t\topts.findM[type] = module;\r\n\t});\r\n\r\n\t//扶弱当前的模块中存在id的名，设置id的模块\r\n\tif(lastLoader.id) {\r\n\t\tthis.module.idModule[lastLoader.id] = opts.findM;\r\n\t}\r\n\r\n\t//查看依赖，设置一下依赖\r\n\tif(dep.length > 0) {\r\n\t\tconst loadModules = setPaths.call(this, dep);\r\n\t\trunCreateScript.call(this, loadModules);\r\n\t}\r\n\r\n\t//设置初始化的状态\r\n\topts.findM.isDemand = false;\r\n\r\n\t//运行模块内容，返回接口\r\n\tthis.module.depManage.unshift({\r\n\t\tmodule: opts.findM,\r\n\t\tdep: dep\r\n\t});\r\n\r\n\t//重设最后的模块\r\n\tresetLastLoadedModule.call(this);\r\n}\r\n\r\n//重设最后的模块\r\nfunction resetLastLoadedModule() {\r\n\tthis.module.lastLoadedModule = {};\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/demand/module.js","import fn from './fn';\r\n\r\nconst HTTP = /^http(s)?:\\/\\//;\r\n\r\n//路径处理\r\nexport function resolvePath(path) {\r\n    \r\n    if(isHttpModule(path)){\r\n        return path;\r\n    }\r\n    \r\n\tconst resPath = [this.baseUrl],\r\n\t\tsplitResPath = path.split('/');\r\n\t\t\r\n\t\r\n\r\n\tfn.each(splitResPath, (p, index) => {\r\n\t\tswitch(p) {\r\n\t\t\tcase '':\r\n\t\t\t\tif(index === 0) resPath[index] = '';\r\n\t\t\t\tbreak;\r\n\t\t\tcase '.':\r\n\t\t\t\tbreak;\r\n\t\t\tcase '..':\r\n\t\t\t\tresPath.pop();\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tresPath.push(p);\r\n\t\t}\r\n\t});\r\n\treturn resPath.join('/');\r\n}\r\n\r\n//处理是否存在js后缀\r\nexport function resolveJsExt(url) {\r\n\tif(/\\.js/g.test(url)) return url;\r\n\telse return url + '.js';\r\n}\r\n\r\n//判断是否为http(s)的模块\r\nexport function isHttpModule(url){\r\n    return HTTP.test(url);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/demand/path.js","import { resolvePath } from './path';\r\n\r\nimport { hasModule } from './module';\r\n\r\nimport { createScript, isCreateScript } from './script';\r\n\r\nimport fn from './fn';\r\n\r\n//alias的规则\r\nconst ALIAS_PATH = /^@\\S{1,}/;\r\n\r\n//设置模块路径\r\nexport function setPaths(paths) {\r\n\r\n\tconst loadModules = [];\r\n\r\n\tfn.each(paths, (path, name) => {\r\n\r\n\t\tconst demand = this,\r\n\t\t\tresPath = resolvePath.call(this, path), //处理完的路径\r\n\t\t\turlModules = this.module.urlModule, //通过url处理的模块\r\n\t\t\tpathModules = this.module.pathModule, //通过config中path的模块\r\n\t\t\tpathConfig = {\r\n\t\t\t\turl: resPath,\r\n\t\t\t\tname: name\r\n\t\t\t};\r\n\r\n\t\t//检查是否存在对应的模块，存在跳过\r\n\t\tif(hasModule.call(this, path)) {\r\n\t\t\tconst hasCreateScript = isCreateScript.call(this, path);\r\n\t\t\t//当前的模块是否被加载script\r\n\t\t\tif(hasCreateScript) {\r\n\t\t\t\thasCreateScript.call(this);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\turlModules[resPath] = {\r\n\t\t\tcreateScript() {\r\n\t\t\t\tcreateScript.call(demand, pathConfig);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//如果是从paths中配置的路径\r\n\t\tif(fn.isStr(name)) {\r\n\t\t\tpathModules[name] = urlModules[resPath];\r\n\t\t}\r\n\r\n\t\tloadModules.push(pathConfig);\r\n\t});\r\n\r\n\t//返回处理完的模块路径\r\n\treturn loadModules;\r\n}\r\n\r\n//设置别名路径\r\nexport function setAlias(alias) {\r\n\tconst aliasPath = {};\r\n\tfn.each(alias, (path, key) => {\r\n\t\tif(ALIAS_PATH.test(key)) {\r\n\t\t\taliasPath[key] = path;\r\n\t\t}\r\n\t});\r\n\treturn aliasPath;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/init.js","/*\r\n    队列 \r\n * */\r\n\r\nexport default class Queue {\r\n    constructor(opts) {\r\n        this.queue = [];\r\n    }\r\n    push(fn) {\r\n        this.queue.push(fn);\r\n    }\r\n    next() {\r\n        if(this.queue.length != 0) {\r\n            this.queue.shift();\r\n        }\r\n        \r\n        if(this.queue.length === 0) this.cb();\r\n    }\r\n}\r\n\r\n//创建队列\r\nexport const queue = new Queue();\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/demand/queue.js","import fn from './fn';\r\n\r\n//兼容性IE8\r\n(function() {\r\n\r\n    //兼容IE8中 的indexOf\r\n    if(!fn.isFn(Array.prototype.indexOf)) {\r\n        Array.prototype.indexOf = function(val) {\r\n            let index = 0,\r\n                len = this.length;\r\n            for(; index < len; index++) {\r\n                if(this[index] === val) return index;\r\n            }\r\n            return -1;\r\n        }\r\n    }\r\n\r\n    //map\r\n    if(!fn.isFn(Array.prototype.map)) {\r\n        Array.prototype.map = function(fn) {\r\n            let mapArr = [],\r\n                i = 0,\r\n                len = this.length;\r\n            for(; i < len; i++) {\r\n                mapArr.push(fn(this[i], i));\r\n            }\r\n            return mapArr;\r\n        }\r\n    }\r\n\r\n    //filter\r\n    if(!fn.isFn(Array.prototype.filter)) {\r\n        Array.prototype.filter = function(fn) {\r\n            let mapArr = [],\r\n                i = 0,\r\n                len = this.length;\r\n            for(; i < len; i++) {\r\n                let item = this[i];\r\n                if(fn(item, i)) mapArr.push(item);\r\n            }\r\n            return mapArr;\r\n        }\r\n    }\r\n\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./src/demand/compatibility.js","import { hasModule, findModule } from './module';\r\nimport { useQueue, checkRunUse, runUse } from './use';\r\n//初始化\r\nimport { setAlias, setPaths } from './init';\r\n\r\nimport fn from './fn';\r\n\r\nexport default function demand(dep, cb) {\r\n    const _this = demand,\r\n        module = _this.module;\r\n    //运行依赖\r\n    if(fn.isArr(dep)) {\r\n        fn.each(dep, (name, index) => {\r\n            if(!hasModule.call(_this, name)) return;\r\n            const findM = findModule.call(_this, name);\r\n            fn.cb(findM.createScript, _this);\r\n        });\r\n\r\n        //存储回调，等所有的模块加载完毕后调用\r\n        module.use.push({\r\n            dep: dep,\r\n            cb: cb\r\n        });\r\n        \r\n        module.status ? runUse.call(_this) : null;\r\n\r\n    } else if(fn.isFn(dep)) {\r\n        /*\r\n         * 使用情况：1.在模块全部加在后追加使用\r\n         *          2.在模块加载依赖的时候使用\r\n         * */\r\n        module.use.push({\r\n            dep: [],\r\n            cb: dep\r\n        });\r\n\r\n        module.status ? runUse.call(_this) : null;\r\n\r\n    } else if(fn.isStr(dep)) {\r\n        //获取模块\r\n        return findModule.call(_this, dep)['_export_'];\r\n    }\r\n}\r\n\r\n//获取根路径\r\ndemand.origin = (function() {\r\n    return(location.origin || location.protocol + '//' + location.host);\r\n})();\r\n\r\nlet isConfig = false;\r\n\r\n//配置\r\ndemand.config = function(opts) {\r\n    if(isConfig){\r\n        console.warn('只允许实例化一次！');\r\n        return;\r\n    }\r\n    //设置源路径\r\n    this.baseUrl = opts.baseUrl ? opts.baseUrl : this.origin;\r\n    //配置别名\r\n    this.alias = fn.isObj(opts.alias) ? setAlias(opts.alias) : {};\r\n    //设置paths\r\n    setPaths.call(this, opts.paths);\r\n    //设置queue的回调\r\n    useQueue.call(this);\r\n    //只允许config一次\r\n    isConfig = true;\r\n};\r\n\r\n//再config后以后加载模块\r\ndemand.loadModule = function(paths){\r\n    if(fn.isObj(paths)) setPaths.call(this, paths);\r\n    else if(fn.isStr(paths)) setPaths.call(this, [paths]);\r\n    this.module.status = false;\r\n}\r\n\r\n//模块存储\r\ndemand.module = {\r\n    pathModule: {}, //config中的path模块\r\n    idModule: {}, //id模块\r\n    urlModule: {}, //url路径的模块\r\n    use: [], //use集合\r\n    lastLoadedModule: {}, //最后获取到的模块\r\n    depManage: [], //依赖管理\r\n    status: false //全部的use加载状态\r\n};\r\n\r\n//加载模块\r\ndemand.define = function(id, dep, cb) {\r\n    const module = {};\r\n    //存在id的模块\r\n    if(fn.isStr(id)) {\r\n        module['id'] = id;\r\n        if(fn.isArr(dep)) {\r\n            module['dep'] = dep;\r\n            module['_export_'] = cb;\r\n        } else if(fn.isFn(dep)) {\r\n            module['dep'] = [];\r\n            module['_export_'] = dep;\r\n        }\r\n    } else if(fn.isArr(id)) {\r\n        module['id'] = null;\r\n        module['dep'] = id;\r\n        module['_export_'] = dep;\r\n    } else if(fn.isFn(id)) {\r\n        module['id'] = null;\r\n        module['dep'] = [];\r\n        module['_export_'] = id;\r\n    } else {\r\n        throw('error');\r\n    }\r\n    //设置到最后一个接\r\n    this.module.lastLoadedModule = module;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/demand/demand.js","import fn from './fn';\r\n\r\nimport { findModule } from './module';\r\n\r\n/*\r\n *\t设置模块内的依赖depData \r\n * \t{\r\n * \t\tdep:[dep1,dep2],\r\n * \t\tmodule:module\r\n * \t}\r\n * */\r\nexport function buildModuleDep(depData) {\r\n\tconst module = depData.module,\r\n\t\tdeps = depData.dep,\r\n\t\tdemandDep = [];\r\n\r\n\tfn.each(deps, (dep) => {\r\n\t\tconst findM = findModule.call(this, dep),\r\n\t\t\tdepExport = findM._export_;\r\n\t\tif(!findM.isDemand) {\r\n\t\t\tfindM._export_ = new depExport();\r\n\t\t\tfindM.isDemand = true;\r\n\t\t}\r\n\t\tdemandDep.push(findM._export_);\r\n\t});\r\n\r\n\tif(!module.isDemand) {\r\n\t\tmodule._export_ = module._export_.apply(this, demandDep);\r\n\t\tmodule.isDemand = true;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/dep.js","import { findModule, setModule } from './module';\r\n\r\nimport { resolveJsExt, isHttpModule } from './path';\r\n\r\nimport { queue } from './queue';\r\n\r\nimport fn from './fn';\r\n\r\n//创建script节点\r\nexport function createScript(opts) {\r\n    const script = document.createElement('script');\r\n    //获取模块\r\n    opts.findM = findModule.call(this, opts.url);\r\n    script.async = true;\r\n\r\n    script.onload = () => {\r\n        delete opts.findM.createScript;\r\n        setModule.call(this, opts);\r\n        queue.next();\r\n    };\r\n\r\n    script.error = function() {\r\n        throw('加载模块出错！');\r\n    };\r\n\r\n    script.type = \"text/javascript\";\r\n\r\n    //先判断是否为http模块，否则就是baseUrl中的模块\r\n    script.src = isHttpModule(opts.url) ? opts.url : resolveJsExt(opts.url);\r\n\r\n    queue.push(false);\r\n\r\n    document.getElementsByTagName('head')[0].appendChild(script);\r\n}\r\n\r\n//检测单前模块script是否加载了\r\nexport function isCreateScript(path) {\r\n    const findM = findModule.call(this, path);\r\n    if(fn.isFn(findM.createScript)) {\r\n        return findM.createScript;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\n//运行插入模块\r\nexport function runCreateScript(loadModules) {\r\n    fn.each(loadModules, (path, index) => {\r\n        createScript.call(this, path);\r\n    });\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/script.js","import { buildModuleDep } from './dep';\r\n\r\nimport { queue } from './queue';\r\n\r\nimport fn from './fn';\r\n\r\n//设置模块的依赖队列和use中的cb\r\nexport function useQueue() {\r\n\tqueue.cb = () => {\r\n\t\tconst module = this.module;\r\n\t\t//设置dep的依赖\r\n\t\twhile(module.depManage.length !== 0) {\r\n\t\t\tconst depData = module.depManage.shift();\r\n\t\t\tbuildModuleDep.call(this, depData);\r\n\t\t}\r\n\t\t//处理use\r\n\t\trunUse.call(this);\r\n\t\t//第一次所有的\r\n\t\tmodule.status = true;\r\n\t}\r\n}\r\n\r\n//运行依赖\r\nexport function runUse() {\r\n\tconst module = this.module,\r\n\t\tcbDeps = [];\r\n\twhile(module.use.length !== 0) {\r\n\t\tconst depData = module.use.shift();\r\n\t\tfn.each(depData.dep, (dep, index) => {\r\n\t\t\tcbDeps.push(this(dep));\r\n\t\t});\r\n\t\tdepData.cb.apply(this, cbDeps);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/use.js","//demand文件入口\r\nimport demand from './demand/demand.js';\r\n//兼容性处理\r\nimport compatibility from './demand/compatibility';\r\n\r\n(function(global, factory) {\r\n    (global ? (global.demand = factory()) : {});\r\n})(typeof window !== 'undefined' ? window : this, function() {\r\n\r\n    demand.version = \"v1.0.0\";\r\n\r\n    return demand;\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}