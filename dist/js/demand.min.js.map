{"version":3,"sources":["webpack:///js/demand.min.js","webpack:///webpack/bootstrap ac97d75bcf6849bc265e?8763","webpack:///./src/demand/fn.js?8f94","webpack:///./src/demand/error.js?4605","webpack:///./src/demand/module.js?a760","webpack:///./src/demand/path.js?8e55","webpack:///./src/demand/script.js?b4d4","webpack:///./src/demand/config.js?a417","webpack:///./src/demand/init.js?4ded","webpack:///./src/demand/queue.js?c83d","webpack:///./src/demand/compatibility.js?3a8f","webpack:///./src/demand/demand.js?f1fb","webpack:///./src/demand/dep.js?5004","webpack:///./src/demand/shim.js?24f5","webpack:///./src/demand/use.js?2522","webpack:///./src/index.js?9552"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","Fn","this","array","Array","obj","fn","string","num","isNaN","cb","len","isArr","context","args","isFn","apply","expr","each","tmItem","index","replace","RegExp","options","option","default","error","errCode","msg","console","warn","_interopRequireDefault","hasModule","path","_path","resolvePath","pathModule","idModule","urlModule","findModule","removeModule","opts","url","resetLastLoadedModule","setModule","lastLoader","lastLoadedModule","dep","_fn2","type","findM","id","loadModules","_init","setPaths","_script","runCreateScript","isDemand","depManage","push","_config","resetLastModule","isScriptModule","setScriptLoadedModule","_error2","_fn","_error","isHttpModule","resolveAliasPath","resolveAlias","resPath","baseUrl","splitResPath","split","pop","join","resolveJsExt","test","HTTP","ALIAS","lastIndex","alias","_alias","initRegExp","createScript","_this","script","document","createElement","_module","async","onload","_queue","queue","next","onerror","remove","e","parentNode","removeChild","src","getElementsByTagName","appendChild","isCreateScript","_this2","config","shim","paths","_export_","demand","urlModules","pathModules","pathConfig","hasCreateScript","isStr","setAlias","aliasPath","Queue","hasVal","shift","indexOf","val","map","mapArr","filter","item","_module2","use","status","_use","runUse","undefined","_typeof","Symbol","iterator","constructor","_shim","origin","location","protocol","host","isConfig","extend","setShim","useQueue","loadModule","isObj","global","window","depQueue","define","buildModuleDep","deps","demandDep","build","shimContext","_dep","cbDeps","depData","err","_demand","_demand2","_compatibility","factory","version"],"mappings":"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","file":"js/demand.min.js","sourcesContent":["/*!\n * \n * \t\t\tdemand.js v1.0.0\n * \t\t\t(c) 2016-2017 Blue\n * \t\t\tReleased under the MIT License.\n * \t\t\thttps://github.com/azhanging/demand\n * \t\t\ttime:Mon Sep 11 2017 15:31:18 GMT+0800 (中国标准时间)\n * \t\t\n */\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 13);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n//常用方法\nvar Fn = function () {\n\tfunction Fn() {\n\t\t_classCallCheck(this, Fn);\n\t}\n\n\t_createClass(Fn, [{\n\t\tkey: 'isArr',\n\t\tvalue: function isArr(array) {\n\t\t\treturn array instanceof Array;\n\t\t}\n\t}, {\n\t\tkey: 'isObj',\n\t\tvalue: function isObj(obj) {\n\t\t\treturn obj instanceof Object && !(obj instanceof Array) && obj !== null;\n\t\t}\n\t}, {\n\t\tkey: 'isFn',\n\t\tvalue: function isFn(fn) {\n\t\t\treturn typeof fn === 'function';\n\t\t}\n\t}, {\n\t\tkey: 'isStr',\n\t\tvalue: function isStr(string) {\n\t\t\treturn typeof string === 'string';\n\t\t}\n\t}, {\n\t\tkey: 'isNum',\n\t\tvalue: function isNum(num) {\n\t\t\treturn typeof num === 'number' || !isNaN(num);\n\t\t}\n\t}, {\n\t\tkey: 'each',\n\t\tvalue: function each(obj, cb) {\n\t\t\t//遍历\n\t\t\tvar i = 0,\n\t\t\t    len = obj.length;\n\t\t\tif (this.isArr(obj)) {\n\t\t\t\tfor (; i < len; i++) {\n\t\t\t\t\tcb(obj[i], i);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (i in obj) {\n\t\t\t\t\tif (obj.hasOwnProperty(i)) cb(obj[i], i);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, {\n\t\tkey: 'cb',\n\t\tvalue: function cb(_cb, context, args) {\n\t\t\t//回调\n\t\t\targs = args ? args : [];\n\t\t\tthis.isFn(_cb) ? _cb.apply(context, args) : null;\n\t\t}\n\t\t//处理正则数据\n\n\t}, {\n\t\tkey: 'initRegExp',\n\t\tvalue: function initRegExp(expr) {\n\t\t\tvar tm = '\\\\/*.?+$^[](){}|\\'\\\"';\n\t\t\tthis.each(tm, function (tmItem, index) {\n\t\t\t\texpr = expr.replace(new RegExp('\\\\' + tmItem, 'g'), '\\\\' + tmItem);\n\t\t\t});\n\t\t\treturn expr;\n\t\t}\n\t}, {\n\t\tkey: 'extend',\n\t\tvalue: function extend(obj, options) {\n\t\t\t//合并\n\t\t\tthis.each(options, function (option, key) {\n\t\t\t\tobj[key] = option;\n\t\t\t});\n\t\t\treturn obj;\n\t\t}\n\t}]);\n\n\treturn Fn;\n}();\n\nexports.default = new Fn();\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = error;\n/*\r\n *\t错误处理 \r\n * */\n\nfunction error(errCode, msg) {\n\tswitch (errCode) {\n\t\tcase 0:\n\t\t\tconsole.warn('只允许实例化一次！');\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tconsole.error(msg + '加载模块出错！');\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tconsole.error('模块使用有误，不能当前模块依赖于自身！');\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tconsole.error('非paths和dep中加载的模块（即直接加载script的模块需要添加id来识别模块）');\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tconsole.error('模块运行有误：' + msg);\n\t}\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.hasModule = hasModule;\nexports.findModule = findModule;\nexports.removeModule = removeModule;\nexports.setModule = setModule;\nexports.isScriptModule = isScriptModule;\nexports.setScriptLoadedModule = setScriptLoadedModule;\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nvar _init = __webpack_require__(6);\n\nvar _path = __webpack_require__(3);\n\nvar _script = __webpack_require__(4);\n\nvar _config = __webpack_require__(5);\n\nvar _error = __webpack_require__(1);\n\nvar _error2 = _interopRequireDefault(_error);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//has module in demand\nfunction hasModule(m) {\n\tvar path = _path.resolvePath.call(this, m),\n\t    module = this.module;\n\tif (module.pathModule[m] || module.idModule[m] || module.urlModule[path]) return true;\n\treturn false;\n}\n\n//find module in demand.module[path|url|id]  权重：path > url > id\n\n//初始化\nfunction findModule(m) {\n\tvar module = this.module,\n\t    path = _path.resolvePath.call(this, m);\n\tif (module.pathModule[m]) return module.pathModule[m];\n\tif (module.urlModule[path]) return module.urlModule[path];\n\tif (module.idModule[m]) return module.idModule[m];\n\treturn false;\n}\n\n//del error module\nfunction removeModule(opts) {\n\tdelete this.module.urlModule[opts.url];\n\tdelete this.module.pathModule[opts.name];\n\tresetLastLoadedModule.call(this);\n}\n\n//set module config\nfunction setModule(opts) {\n\n\tvar lastLoader = this.module.lastLoadedModule;\n\n\tvar dep = lastLoader.dep;\n\n\t//把最后加载的模块内容加载进去\n\t_fn2.default.each(lastLoader, function (module, type) {\n\t\topts.findM[type] = module;\n\t});\n\n\t//扶弱当前的模块中存在id的名，设置id的模块\n\tif (lastLoader.id) {\n\t\tthis.module.idModule[lastLoader.id] = opts.findM;\n\t}\n\n\t//查看依赖，设置一下依赖\n\tif (dep.length > 0) {\n\t\tvar loadModules = _init.setPaths.call(this, dep);\n\t\t_script.runCreateScript.call(this, loadModules);\n\t}\n\n\t//设置初始化的状态\n\topts.findM.isDemand = false;\n\n\t//运行模块内容，返回接口\n\tthis.module.depManage.push(opts.findM);\n\n\t//重设最后的模块\n\tresetLastLoadedModule.call(this);\n}\n\n/*\r\n * 重设最后的模块,在http模块中会存在不同规格的内容，需要设置一个空的规格\r\n * */\nfunction resetLastLoadedModule() {\n\tthis.module.lastLoadedModule = _config.resetLastModule;\n}\n\n//是否为script直接加载的模块\nfunction isScriptModule(module) {\n\tif (module !== _config.resetLastModule) return true;\n\treturn false;\n}\n\n//设置script直接加载的模块\nfunction setScriptLoadedModule(module) {\n\n\tif (module.id === null) {\n\t\t(0, _error2.default)(3);\n\t\treturn;\n\t}\n\n\tsetModule.call(this, {\n\t\turl: null,\n\t\tname: null,\n\t\tfindM: module\n\t});\n}\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.resolvePath = resolvePath;\nexports.resolveJsExt = resolveJsExt;\nexports.isHttpModule = isHttpModule;\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar HTTP = /^http(s)?:\\/\\//;\n\n//路径处理\nfunction resolvePath(path) {\n\t//如果是http的链接，直接返回直接的http链接\n\tif (isHttpModule(path)) {\n\t\treturn path;\n\t}\n\n\t//处理完alias的路径\n\tvar resolveAliasPath = resolveAlias.call(this, path);\n\n\tvar resPath = [this.baseUrl],\n\t    splitResPath = resolveAliasPath.split('/');\n\n\t_fn2.default.each(splitResPath, function (p, index) {\n\t\tswitch (p) {\n\t\t\tcase '':\n\t\t\t\tif (index === 0) resPath[index] = '';\n\t\t\t\tbreak;\n\t\t\tcase '.':\n\t\t\t\tbreak;\n\t\t\tcase '..':\n\t\t\t\tresPath.pop();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tresPath.push(p);\n\t\t}\n\t});\n\n\treturn resPath.join('/').replace(/\\/{2,}/g, '\\/');;\n}\n\n//处理是否存在js后缀\nfunction resolveJsExt(url) {\n\tif (/\\.js/g.test(url)) return url;else return url + '.js';\n}\n\n//判断是否为http(s)的模块\nfunction isHttpModule(url) {\n\treturn HTTP.test(url);\n}\n\nvar ALIAS = /@(.*?)/g;\n\n//处理alias的数据\nfunction resolveAlias(path) {\n\tALIAS.lastIndex = 0;\n\t//如果不存在别名，直接返回路径\n\tif (!ALIAS.test(path)) {\n\t\treturn path;\n\t}\n\n\t//存在别名，把别名替换掉\n\t_fn2.default.each(this.alias, function (_alias, key) {\n\t\tALIAS.lastIndex = 0;\n\t\tif (!ALIAS.test(path)) return path;\n\t\tpath = path.replace(new RegExp(_fn2.default.initRegExp(key), 'g'), _alias);\n\t});\n\n\treturn path;\n}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.createScript = createScript;\nexports.isCreateScript = isCreateScript;\nexports.runCreateScript = runCreateScript;\n\nvar _module = __webpack_require__(2);\n\nvar _path = __webpack_require__(3);\n\nvar _queue = __webpack_require__(7);\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nvar _error = __webpack_require__(1);\n\nvar _error2 = _interopRequireDefault(_error);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//创建script节点\nfunction createScript(opts) {\n\tvar _this = this;\n\n\tvar script = document.createElement('script');\n\t//获取模块\n\topts.findM = _module.findModule.call(this, opts.url);\n\t//异步加载    \n\tscript.async = true;\n\n\tdelete opts.findM.createScript;\n\n\tscript.onload = function () {\n\t\t_module.setModule.call(_this, opts);\n\t\t_queue.queue.next();\n\t};\n\n\tscript.onerror = function () {\n\t\t_module.removeModule.call(_this, opts);\n\t\t(0, _error2.default)(1, opts.url);\n\t\ttry {\n\t\t\tscript.remove();\n\t\t} catch (e) {\n\t\t\tscript.parentNode.removeChild(script);\n\t\t}\n\t\t_queue.queue.next();\n\t};\n\n\tscript.type = \"text/javascript\";\n\n\t//先判断是否为http模块，否则就是baseUrl中的模块\n\tscript.src = (0, _path.isHttpModule)(opts.url) ? opts.url : (0, _path.resolveJsExt)(opts.url);\n\n\t//添加依赖队列数据\n\t_queue.queue.push(false);\n\n\tdocument.getElementsByTagName('head')[0].appendChild(script);\n}\n\n//检测单前模块script是否加载了\nfunction isCreateScript(path) {\n\tvar findM = _module.findModule.call(this, path);\n\tif (_fn2.default.isFn(findM.createScript)) {\n\t\treturn findM.createScript;\n\t} else {\n\t\treturn false;\n\t}\n}\n\n//运行插入模块\nfunction runCreateScript(loadModules) {\n\tvar _this2 = this;\n\n\t_fn2.default.each(loadModules, function (path, index) {\n\t\tcreateScript.call(_this2, path);\n\t});\n}\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/*默认配置参数*/\nvar config = exports.config = {\n\talias: {},\n\tshim: {},\n\tpaths: {}\n\n\t/*设置默认reset的lastModule*/\n};var resetLastModule = exports.resetLastModule = {\n\t_export_: function _export_() {\n\t\treturn function () {};\n\t},\n\n\tdep: [],\n\tid: null\n};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.setPaths = setPaths;\nexports.setAlias = setAlias;\n\nvar _path = __webpack_require__(3);\n\nvar _module = __webpack_require__(2);\n\nvar _script = __webpack_require__(4);\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//设置模块路径\nfunction setPaths(paths) {\n\tvar _this = this;\n\n\tvar loadModules = [];\n\n\t_fn2.default.each(paths, function (path, name) {\n\n\t\tvar demand = _this,\n\t\t    resPath = _path.resolvePath.call(_this, path),\n\t\t    //处理完的路径\n\t\turlModules = _this.module.urlModule,\n\t\t    //通过url处理的模块\n\t\tpathModules = _this.module.pathModule,\n\t\t    //通过config中path的模块\n\t\tpathConfig = {\n\t\t\turl: resPath,\n\t\t\tname: name\n\t\t};\n\n\t\t//检查是否存在对应的模块，存在跳过\n\t\tif (_module.hasModule.call(_this, path)) {\n\t\t\tvar hasCreateScript = _script.isCreateScript.call(_this, path);\n\t\t\t//当前的模块是否被加载script\n\t\t\tif (hasCreateScript) {\n\t\t\t\thasCreateScript.call(_this);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\turlModules[resPath] = {\n\t\t\tcreateScript: function createScript() {\n\t\t\t\t_script.createScript.call(demand, pathConfig);\n\t\t\t}\n\t\t};\n\n\t\t//如果是从paths中配置的路径\n\t\tif (_fn2.default.isStr(name)) {\n\t\t\tpathModules[name] = urlModules[resPath];\n\t\t}\n\n\t\tloadModules.push(pathConfig);\n\t});\n\n\t//返回处理完的模块路径\n\treturn loadModules;\n}\n\n//设置别名路径\nfunction setAlias(alias) {\n\tvar aliasPath = {};\n\t_fn2.default.each(alias, function (path, key) {\n\t\taliasPath['@' + key] = path;\n\t});\n\treturn aliasPath;\n}\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\r\n    队列 \r\n * */\n\nvar Queue = function () {\n    function Queue(opts) {\n        _classCallCheck(this, Queue);\n\n        this.queue = [];\n    }\n\n    _createClass(Queue, [{\n        key: \"push\",\n        value: function push(fn) {\n            this.queue.push(fn);\n        }\n    }, {\n        key: \"next\",\n        value: function next() {\n            if (this.hasVal()) {\n                this.queue.shift();\n            }\n\n            if (this.queue.length === 0) this.cb();\n        }\n    }, {\n        key: \"hasVal\",\n        value: function hasVal() {\n            return this.queue.length != 0;\n        }\n    }]);\n\n    return Queue;\n}();\n\n//创建队列\n\n\nexports.default = Queue;\nvar queue = exports.queue = new Queue();\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//兼容性IE8\n(function () {\n\n    //兼容IE8中 的indexOf\n    if (!_fn2.default.isFn(Array.prototype.indexOf)) {\n        Array.prototype.indexOf = function (val) {\n            var index = 0,\n                len = this.length;\n            for (; index < len; index++) {\n                if (this[index] === val) return index;\n            }\n            return -1;\n        };\n    }\n\n    //map\n    if (!_fn2.default.isFn(Array.prototype.map)) {\n        Array.prototype.map = function (fn) {\n            var mapArr = [],\n                i = 0,\n                len = this.length;\n            for (; i < len; i++) {\n                mapArr.push(fn(this[i], i));\n            }\n            return mapArr;\n        };\n    }\n\n    //filter\n    if (!_fn2.default.isFn(Array.prototype.filter)) {\n        Array.prototype.filter = function (fn) {\n            var mapArr = [],\n                i = 0,\n                len = this.length;\n            for (; i < len; i++) {\n                var item = this[i];\n                if (fn(item, i)) mapArr.push(item);\n            }\n            return mapArr;\n        };\n    }\n})();\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n//初始化\n\n\nexports.default = demand;\n\nvar _module2 = __webpack_require__(2);\n\nvar _use = __webpack_require__(12);\n\nvar _init = __webpack_require__(6);\n\nvar _shim = __webpack_require__(11);\n\nvar _config = __webpack_require__(5);\n\nvar _script = __webpack_require__(4);\n\nvar _error = __webpack_require__(1);\n\nvar _error2 = _interopRequireDefault(_error);\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction demand(dep, cb) {\n\tvar _this = demand,\n\t    module = _this.module;\n\t//运行依赖\n\tif (_fn2.default.isArr(dep)) {\n\t\t_fn2.default.each(dep, function (name, index) {\n\t\t\tif (!_module2.hasModule.call(_this, name)) return;\n\t\t\tvar findM = _module2.findModule.call(_this, name);\n\t\t\t_fn2.default.cb(findM.createScript, _this);\n\t\t});\n\n\t\t//存储回调，等所有的模块加载完毕后调用\n\t\tmodule.use.push({\n\t\t\tdep: dep,\n\t\t\tcb: cb\n\t\t});\n\n\t\tmodule.status ? _use.runUse.call(_this) : null;\n\t} else if (_fn2.default.isFn(dep)) {\n\t\t/*\r\n   * 使用情况：1.在模块全部加在后追加使用\r\n   *          2.在模块加载依赖的时候使用\r\n   * */\n\t\tmodule.use.push({\n\t\t\tdep: [],\n\t\t\tcb: dep\n\t\t});\n\n\t\tmodule.status ? _use.runUse.call(_this) : null;\n\t} else if (_fn2.default.isStr(dep)) {\n\n\t\t//获取模块\n\t\tvar _module = _module2.findModule.call(_this, dep);\n\t\t//这理由循环依赖的问题，如果当前的模块是未加载的，直接返回undefined\n\t\treturn _module.isDemand ? _module['_export_'] : undefined;\n\t}\n}\n\n//获取根路径\ndemand.origin = function () {\n\treturn location.origin || location.protocol + '//' + location.host;\n}();\n\n//是否config过\nvar isConfig = false;\n\n//配置\ndemand.config = function (opts) {\n\tif (isConfig) {\n\t\t(0, _error2.default)(0);\n\t\treturn;\n\t}\n\n\topts = _fn2.default.extend(_config.config, opts);\n\n\t//设置源路径\n\tthis.baseUrl = opts.baseUrl ? opts.baseUrl : this.origin;\n\t//配置别名\n\tthis.alias = (0, _init.setAlias)(opts.alias);\n\t//设置shim配置\n\t_shim.setShim.call(this, opts.shim);\n\t//设置paths\n\t_init.setPaths.call(this, opts.paths);\n\t//设置queue的回调\n\t_use.useQueue.call(this);\n\t//只允许config一次\n\tisConfig = true;\n};\n\n//再config后以后加载模块\ndemand.loadModule = function (paths) {\n\tvar loadModules = void 0;\n\n\tif (_fn2.default.isObj(paths)) {\n\t\tloadModules = _init.setPaths.call(this, paths);\n\t} else if (_fn2.default.isStr(paths)) {\n\t\tloadModules = _init.setPaths.call(this, [paths]);\n\t}\n\n\t_script.runCreateScript.call(this, loadModules);\n\n\tthis.module.status = false;\n};\n\n//设置一下全局的环境\ndemand.global = (typeof window === 'undefined' ? 'undefined' : _typeof(window)) !== undefined ? window : undefined;\n\n//模块存储\ndemand.module = {\n\tpathModule: {}, //config中的path模块\n\tidModule: {}, //id模块\n\turlModule: {}, //url路径的模块\n\tuse: [], //use集合\n\tlastLoadedModule: _config.resetLastModule, //最后获取到的模块\n\tdepManage: [], //依赖管理\n\tdepQueue: [], //依赖队列\n\tstatus: false //全部的use加载状态\n};\n\n//加载模块\ndemand.define = function (id, dep, cb) {\n\tvar module = {};\n\t//存在id的模块\n\tif (_fn2.default.isStr(id)) {\n\t\tmodule['id'] = id;\n\t\tif (_fn2.default.isArr(dep)) {\n\t\t\tmodule['dep'] = dep;\n\t\t\tmodule['_export_'] = cb;\n\t\t} else if (_fn2.default.isFn(dep)) {\n\t\t\tmodule['dep'] = [];\n\t\t\tmodule['_export_'] = dep;\n\t\t}\n\t} else if (_fn2.default.isArr(id)) {\n\t\tmodule['id'] = null;\n\t\tmodule['dep'] = id;\n\t\tmodule['_export_'] = dep;\n\t} else if (_fn2.default.isFn(id)) {\n\t\tmodule['id'] = null;\n\t\tmodule['dep'] = [];\n\t\tmodule['_export_'] = id;\n\t} else {\n\t\tthrow 'error';\n\t}\n\t/*\r\n  *\t检查非paths或者是dep中加载的模块设置\r\n  * */\n\n\tif ((0, _module2.isScriptModule)(this.module.lastLoadedModule)) {\n\t\t_module2.setScriptLoadedModule.call(this, this.module.lastLoadedModule);\n\t}\n\n\t//设置到最后一个接\n\tthis.module.lastLoadedModule = module;\n};\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.buildModuleDep = buildModuleDep;\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nvar _module = __webpack_require__(2);\n\nvar _error = __webpack_require__(1);\n\nvar _error2 = _interopRequireDefault(_error);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\r\n *\t设置模块内的依赖depData \r\n * \t{\r\n * \t\tdep:[dep1,dep2],\r\n * \t\tmodule:module\r\n * \t}\r\n * */\n\nfunction buildModuleDep(module) {\n\tvar _this = this;\n\n\tvar deps = module.dep,\n\t    demandDep = [];\n\n\tmodule.build = true;\n\n\t//初始化模块依赖\n\t_fn2.default.each(deps, function (dep) {\n\t\tvar findM = _module.findModule.call(_this, dep),\n\t\t    depExport = findM._export_;\n\n\t\t//自己依赖自己的话，返回undefined\n\t\tif (module === findM) {\n\t\t\tdemandDep.push(undefined);\n\t\t} else {\n\t\t\t/*\r\n    *\t有关循环依赖的问题问题\r\n    * */\n\n\t\t\tif (findM && !findM.build) {\n\t\t\t\tbuildModuleDep.call(_this, findM);\n\t\t\t}\n\n\t\t\tif (!findM.isDemand) {\n\t\t\t\tdemandDep.push(undefined);\n\t\t\t} else {\n\t\t\t\tdemandDep.push(findM._export_);\n\t\t\t}\n\t\t}\n\t});\n\n\t//初始化模块接口\n\tif (!module.isDemand) {\n\t\tmodule._export_ = module._export_.apply(this, demandDep);\n\t\tmodule.isDemand = true;\n\t}\n}\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.setShim = setShim;\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nvar _module = __webpack_require__(2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/*\r\n *\t设置垫片库 \r\n * */\nfunction setShim(shim) {\n\tvar _this = this;\n\n\t_fn2.default.each(shim, function (_shim, id) {\n\n\t\t_this.define(id, _shim.dep, function () {\n\t\t\treturn shimContext.call(_this, _shim);\n\t\t});\n\n\t\tvar lastLoadedModule = _this.module.lastLoadedModule;\n\n\t\t_module.setModule.call(_this, {\n\t\t\turl: null,\n\t\t\tname: null,\n\t\t\tfindM: lastLoadedModule\n\t\t});\n\t});\n}\n\n//处理shim中作用域和export接口\nfunction shimContext(_shim) {\n\tvar context = _shim.context || this.global,\n\t    _export_ = _shim._export_;\n\tif (_fn2.default.isFn(_shim._export_)) {\n\t\treturn _export_.call(context);\n\t}\n\treturn context[_shim._export_];\n}\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.useQueue = useQueue;\nexports.runUse = runUse;\n\nvar _dep = __webpack_require__(10);\n\nvar _queue = __webpack_require__(7);\n\nvar _fn = __webpack_require__(0);\n\nvar _fn2 = _interopRequireDefault(_fn);\n\nvar _error = __webpack_require__(1);\n\nvar _error2 = _interopRequireDefault(_error);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//设置模块的依赖队列和use中的cb\nfunction useQueue() {\n\tvar _this = this;\n\n\t_queue.queue.cb = function () {\n\t\tvar module = _this.module;\n\t\t//设置dep的依赖\n\t\twhile (module.depManage.length !== 0) {\n\t\t\tvar _module = module.depManage.shift();\n\t\t\t_dep.buildModuleDep.call(_this, _module);\n\t\t}\n\t\t//处理use\n\t\trunUse.call(_this);\n\t\t//第一次的模块加载全部完毕\n\t\tmodule.status = true;\n\t};\n}\n\n//运行依赖\nfunction runUse() {\n\tvar _this2 = this;\n\n\tvar module = this.module;\n\tvar cbDeps = [];\n\n\t//异步加载并发出现use顺序加载问题\n\tif (_queue.queue.hasVal()) return;\n\n\twhile (module.use.length !== 0) {\n\t\tvar depData = module.use.shift();\n\t\t_fn2.default.each(depData.dep, function (dep, index) {\n\t\t\tcbDeps.push(_this2(dep));\n\t\t});\n\n\t\ttry {\n\t\t\tdepData.cb.apply(this, cbDeps);\n\t\t} catch (err) {\n\t\t\t(0, _error2.default)(null, err);\n\t\t}\n\n\t\t//依赖处理完后清空\n\t\tcbDeps = [];\n\t}\n}\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _demand = __webpack_require__(9);\n\nvar _demand2 = _interopRequireDefault(_demand);\n\nvar _compatibility = __webpack_require__(8);\n\nvar _compatibility2 = _interopRequireDefault(_compatibility);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//demand文件入口\n(function (global, factory) {\n    global ? global.demand = factory() : {};\n})(typeof window !== 'undefined' ? window : undefined, function () {\n\n    _demand2.default.version = \"v1.0.0\";\n\n    return _demand2.default;\n});\n//兼容性处理\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// js/demand.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ac97d75bcf6849bc265e","//常用方法\r\nclass Fn {\r\n\tisArr(array) {\r\n\t\treturn array instanceof Array;\r\n\t}\r\n\r\n\tisObj(obj) {\r\n\t\treturn obj instanceof Object && !(obj instanceof Array) && obj !== null;\r\n\t}\r\n\r\n\tisFn(fn) {\r\n\t\treturn typeof fn === 'function';\r\n\t}\r\n\tisStr(string) {\r\n\t\treturn typeof string === 'string';\r\n\t}\r\n\tisNum(num) {\r\n\t\treturn typeof num === 'number' || !isNaN(num);\r\n\t}\r\n\teach(obj, cb) { //遍历\r\n\t\tlet i = 0,\r\n\t\t\tlen = obj.length;\r\n\t\tif(this.isArr(obj)) {\r\n\t\t\tfor(; i < len; i++) {\r\n\t\t\t\tcb(obj[i], i);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor(i in obj) {\r\n\t\t\t\tif(obj.hasOwnProperty(i)) cb(obj[i], i);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tcb(cb, context, args) { //回调\r\n\t\targs = args ? args : [];\r\n\t\tthis.isFn(cb) ? (cb.apply(context, args)) : null;\r\n\t}\r\n\t//处理正则数据\r\n\tinitRegExp(expr) {\r\n\t\tconst tm = '\\\\/*.?+$^[](){}|\\'\\\"';\r\n\t\tthis.each(tm, (tmItem, index) => {\r\n\t\t\texpr = expr.replace(new RegExp('\\\\' + tmItem, 'g'), '\\\\' + tmItem);\r\n\t\t});\r\n\t\treturn expr;\r\n\t}\r\n\textend(obj, options) { //合并\r\n\t\tthis.each(options, (option, key) => {\r\n\t\t\tobj[key] = option;\r\n\t\t});\r\n\t\treturn obj;\r\n\t}\r\n}\r\n\r\nexport default new Fn();\n\n\n// WEBPACK FOOTER //\n// ./src/demand/fn.js","/*\r\n *\t错误处理 \r\n * */\r\n\r\nexport default function error(errCode, msg) {\r\n\tswitch(errCode) {\r\n\t\tcase 0:\r\n\t\t\tconsole.warn('只允许实例化一次！');\r\n\t\t\tbreak;\r\n\t\tcase 1:\r\n\t\t\tconsole.error(msg + '加载模块出错！');\r\n\t\t\tbreak;\r\n\t\tcase 2:\r\n\t\t\tconsole.error('模块使用有误，不能当前模块依赖于自身！');\r\n\t\t\tbreak;\r\n\t\tcase 3:\r\n\t\t\tconsole.error('非paths和dep中加载的模块（即直接加载script的模块需要添加id来识别模块）');\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tconsole.error('模块运行有误：' + msg);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/error.js","import fn from './fn';\r\n//初始化\r\nimport { setPaths } from './init';\r\n\r\nimport { resolvePath } from './path';\r\n\r\nimport { runCreateScript } from './script';\r\n\r\nimport { resetLastModule } from './config';\r\n\r\nimport error from './error';\r\n\r\n//has module in demand\r\nexport function hasModule(m) {\r\n\tconst path = resolvePath.call(this, m),\r\n\t\tmodule = this.module;\r\n\tif(module.pathModule[m] ||\r\n\t\tmodule.idModule[m] ||\r\n\t\tmodule.urlModule[path]\r\n\t) return true;\r\n\treturn false;\r\n}\r\n\r\n//find module in demand.module[path|url|id]  权重：path > url > id\r\nexport function findModule(m) {\r\n\tconst module = this.module,\r\n\t\tpath = resolvePath.call(this, m);\r\n\tif(module.pathModule[m]) return module.pathModule[m];\r\n\tif(module.urlModule[path]) return module.urlModule[path];\r\n\tif(module.idModule[m]) return module.idModule[m];\r\n\treturn false;\r\n}\r\n\r\n//del error module\r\nexport function removeModule(opts) {\r\n\tdelete this.module.urlModule[opts.url];\r\n\tdelete this.module.pathModule[opts.name];\r\n\tresetLastLoadedModule.call(this);\r\n}\r\n\r\n//set module config\r\nexport function setModule(opts) {\r\n\r\n\tconst lastLoader = this.module.lastLoadedModule;\r\n\r\n\tlet dep = lastLoader.dep;\r\n\r\n\t//把最后加载的模块内容加载进去\r\n\tfn.each(lastLoader, (module, type) => {\r\n\t\topts.findM[type] = module;\r\n\t});\r\n\r\n\t//扶弱当前的模块中存在id的名，设置id的模块\r\n\tif(lastLoader.id) {\r\n\t\tthis.module.idModule[lastLoader.id] = opts.findM;\r\n\t}\r\n\r\n\t//查看依赖，设置一下依赖\r\n\tif(dep.length > 0) {\r\n\t\tconst loadModules = setPaths.call(this, dep);\r\n\t\trunCreateScript.call(this, loadModules);\r\n\t}\r\n\r\n\t//设置初始化的状态\r\n\topts.findM.isDemand = false;\r\n\r\n\t//运行模块内容，返回接口\r\n\tthis.module.depManage.push(opts.findM);\r\n\r\n\t//重设最后的模块\r\n\tresetLastLoadedModule.call(this);\r\n}\r\n\r\n/*\r\n * 重设最后的模块,在http模块中会存在不同规格的内容，需要设置一个空的规格\r\n * */\r\nfunction resetLastLoadedModule() {\r\n\tthis.module.lastLoadedModule = resetLastModule;\r\n}\r\n\r\n//是否为script直接加载的模块\r\nexport function isScriptModule(module) {\r\n\tif(module !== resetLastModule) return true;\r\n\treturn false;\r\n}\r\n\r\n//设置script直接加载的模块\r\nexport function setScriptLoadedModule(module) {\r\n\t\r\n\tif(module.id === null) {\r\n\t\terror(3);\r\n\t\treturn;\r\n\t}\r\n\t\r\n\tsetModule.call(this, {\r\n\t\turl: null,\r\n\t\tname: null,\r\n\t\tfindM: module\r\n\t});\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/module.js","import fn from './fn';\r\n\r\nconst HTTP = /^http(s)?:\\/\\//;\r\n\r\n//路径处理\r\nexport function resolvePath(path) {\r\n    //如果是http的链接，直接返回直接的http链接\r\n    if(isHttpModule(path)){\r\n        return path;\r\n    }\r\n    \r\n    //处理完alias的路径\r\n    const resolveAliasPath = resolveAlias.call(this,path);\r\n    \r\n\tconst resPath = [this.baseUrl],\r\n\t\tsplitResPath = resolveAliasPath.split('/');\r\n\t\t\r\n\tfn.each(splitResPath, (p, index) => {\r\n\t\tswitch(p) {\r\n\t\t\tcase '':\r\n\t\t\t\tif(index === 0) resPath[index] = '';\r\n\t\t\t\tbreak;\r\n\t\t\tcase '.':\r\n\t\t\t\tbreak;\r\n\t\t\tcase '..':\r\n\t\t\t\tresPath.pop();\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tresPath.push(p);\r\n\t\t}\r\n\t});\r\n\t\r\n\treturn resPath.join('/').replace(/\\/{2,}/g,'\\/');;\r\n}\r\n\r\n//处理是否存在js后缀\r\nexport function resolveJsExt(url) {\r\n\tif(/\\.js/g.test(url)) return url;\r\n\telse return url + '.js';\r\n}\r\n\r\n//判断是否为http(s)的模块\r\nexport function isHttpModule(url){\r\n    return HTTP.test(url);\r\n}\r\n\r\nconst ALIAS = /@(.*?)/g; \r\n\r\n//处理alias的数据\r\nfunction resolveAlias(path){\r\n\tALIAS.lastIndex = 0;\r\n\t//如果不存在别名，直接返回路径\r\n\tif(!ALIAS.test(path)){\r\n\t\treturn path;\t\r\n\t}\r\n\t\r\n\t//存在别名，把别名替换掉\r\n\tfn.each(this.alias,(_alias,key)=>{\r\n\t\tALIAS.lastIndex = 0;\r\n\t\tif(!ALIAS.test(path)) return path;\r\n\t\tpath = path.replace(new RegExp(fn.initRegExp(key),'g'),_alias);\r\n\t});\r\n\t\r\n\treturn path;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/demand/path.js","import { findModule, setModule, removeModule } from './module';\r\n\r\nimport { resolveJsExt, isHttpModule } from './path';\r\n\r\nimport { queue } from './queue';\r\n\r\nimport fn from './fn';\r\n\r\nimport error from './error';\r\n\r\n//创建script节点\r\nexport function createScript(opts) {\r\n\tconst script = document.createElement('script');\r\n\t//获取模块\r\n\topts.findM = findModule.call(this, opts.url);\r\n\t//异步加载    \r\n\tscript.async = true;\r\n\r\n\tdelete opts.findM.createScript;\r\n\r\n\tscript.onload = () => {\r\n\t\tsetModule.call(this, opts);\r\n\t\tqueue.next();\r\n\t};\r\n\r\n\tscript.onerror = () => {\r\n\t\tremoveModule.call(this, opts);\r\n\t\terror(1, opts.url);\r\n\t\ttry {\r\n\t\t\tscript.remove();\r\n\t\t} catch(e) {\r\n\t\t\tscript.parentNode.removeChild(script);\r\n\t\t}\r\n\t\tqueue.next();\r\n\t};\r\n\r\n\tscript.type = \"text/javascript\";\r\n\r\n\t//先判断是否为http模块，否则就是baseUrl中的模块\r\n\tscript.src = isHttpModule(opts.url) ? opts.url : resolveJsExt(opts.url);\r\n\r\n\t//添加依赖队列数据\r\n\tqueue.push(false);\r\n\r\n\tdocument.getElementsByTagName('head')[0].appendChild(script);\r\n}\r\n\r\n//检测单前模块script是否加载了\r\nexport function isCreateScript(path) {\r\n\tconst findM = findModule.call(this, path);\r\n\tif(fn.isFn(findM.createScript)) {\r\n\t\treturn findM.createScript;\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\n//运行插入模块\r\nexport function runCreateScript(loadModules) {\r\n\tfn.each(loadModules, (path, index) => {\r\n\t\tcreateScript.call(this, path);\r\n\t});\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/script.js","/*默认配置参数*/\r\nexport const config = {\r\n\talias: {},\r\n\tshim: {},\r\n\tpaths: {}\r\n}\r\n\r\n/*设置默认reset的lastModule*/\r\nexport const resetLastModule = {\r\n\t_export_() {\r\n\t\treturn() => {}\r\n\t},\r\n\tdep: [],\r\n\tid: null\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/config.js","import { resolvePath } from './path';\r\n\r\nimport { hasModule, findModule } from './module';\r\n\r\nimport { createScript, isCreateScript } from './script';\r\n\r\nimport fn from './fn';\r\n\r\n//设置模块路径\r\nexport function setPaths(paths) {\r\n\r\n\tconst loadModules = [];\r\n\r\n\tfn.each(paths, (path, name) => {\r\n\r\n\t\tconst demand = this,\r\n\t\t\tresPath = resolvePath.call(this, path), //处理完的路径\r\n\t\t\turlModules = this.module.urlModule, //通过url处理的模块\r\n\t\t\tpathModules = this.module.pathModule, //通过config中path的模块\r\n\t\t\tpathConfig = {\r\n\t\t\t\turl: resPath,\r\n\t\t\t\tname: name\r\n\t\t\t};\r\n\r\n\t\t//检查是否存在对应的模块，存在跳过\r\n\t\tif(hasModule.call(this, path)) {\r\n\t\t\tconst hasCreateScript = isCreateScript.call(this, path);\r\n\t\t\t//当前的模块是否被加载script\r\n\t\t\tif(hasCreateScript) {\r\n\t\t\t\thasCreateScript.call(this);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\turlModules[resPath] = {\r\n\t\t\tcreateScript() {\r\n\t\t\t\tcreateScript.call(demand, pathConfig);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//如果是从paths中配置的路径\r\n\t\tif(fn.isStr(name)) {\r\n\t\t\tpathModules[name] = urlModules[resPath];\r\n\t\t}\r\n\r\n\t\tloadModules.push(pathConfig);\r\n\t});\r\n\r\n\t//返回处理完的模块路径\r\n\treturn loadModules;\r\n}\r\n\r\n//设置别名路径\r\nexport function setAlias(alias) {\r\n\tconst aliasPath = {};\r\n\tfn.each(alias, (path, key) => {\r\n\t\taliasPath['@' + key] = path;\r\n\t});\r\n\treturn aliasPath;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/init.js","/*\r\n    队列 \r\n * */\r\n\r\nexport default class Queue {\r\n    constructor(opts) {\r\n        this.queue = [];\r\n    }\r\n    push(fn) {\r\n        this.queue.push(fn);\r\n    }\r\n    next() {\r\n        if(this.hasVal()) {\r\n            this.queue.shift();\r\n        }\r\n        \r\n        if(this.queue.length === 0) this.cb();\r\n    }\r\n    hasVal(){\r\n    \treturn this.queue.length != 0;\r\n    }\r\n}\r\n\r\n//创建队列\r\nexport const queue = new Queue();\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/demand/queue.js","import fn from './fn';\r\n\r\n//兼容性IE8\r\n(function() {\r\n\r\n    //兼容IE8中 的indexOf\r\n    if(!fn.isFn(Array.prototype.indexOf)) {\r\n        Array.prototype.indexOf = function(val) {\r\n            let index = 0,\r\n                len = this.length;\r\n            for(; index < len; index++) {\r\n                if(this[index] === val) return index;\r\n            }\r\n            return -1;\r\n        }\r\n    }\r\n\r\n    //map\r\n    if(!fn.isFn(Array.prototype.map)) {\r\n        Array.prototype.map = function(fn) {\r\n            let mapArr = [],\r\n                i = 0,\r\n                len = this.length;\r\n            for(; i < len; i++) {\r\n                mapArr.push(fn(this[i], i));\r\n            }\r\n            return mapArr;\r\n        }\r\n    }\r\n\r\n    //filter\r\n    if(!fn.isFn(Array.prototype.filter)) {\r\n        Array.prototype.filter = function(fn) {\r\n            let mapArr = [],\r\n                i = 0,\r\n                len = this.length;\r\n            for(; i < len; i++) {\r\n                let item = this[i];\r\n                if(fn(item, i)) mapArr.push(item);\r\n            }\r\n            return mapArr;\r\n        }\r\n    }\r\n\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./src/demand/compatibility.js","import { hasModule, findModule, setIdModule, isScriptModule, setScriptLoadedModule } from './module';\r\n\r\nimport { useQueue, checkRunUse, runUse } from './use';\r\n//初始化\r\nimport { setAlias, setPaths } from './init';\r\n\r\nimport { setShim } from './shim';\r\n\r\nimport { config, resetLastModule } from './config';\r\n\r\nimport { runCreateScript } from './script';\r\n\r\nimport error from './error';\r\n\r\nimport fn from './fn';\r\n\r\nexport default function demand(dep, cb) {\r\n\tconst _this = demand,\r\n\t\tmodule = _this.module;\r\n\t//运行依赖\r\n\tif(fn.isArr(dep)) {\r\n\t\tfn.each(dep, (name, index) => {\r\n\t\t\tif(!hasModule.call(_this, name)) return;\r\n\t\t\tconst findM = findModule.call(_this, name);\r\n\t\t\tfn.cb(findM.createScript, _this);\r\n\t\t});\r\n\r\n\t\t//存储回调，等所有的模块加载完毕后调用\r\n\t\tmodule.use.push({\r\n\t\t\tdep: dep,\r\n\t\t\tcb: cb\r\n\t\t});\r\n\r\n\t\tmodule.status ? runUse.call(_this) : null;\r\n\r\n\t} else if(fn.isFn(dep)) {\r\n\t\t/*\r\n\t\t * 使用情况：1.在模块全部加在后追加使用\r\n\t\t *          2.在模块加载依赖的时候使用\r\n\t\t * */\r\n\t\tmodule.use.push({\r\n\t\t\tdep: [],\r\n\t\t\tcb: dep\r\n\t\t});\r\n\r\n\t\tmodule.status ? runUse.call(_this) : null;\r\n\r\n\t} else if(fn.isStr(dep)) {\r\n\r\n\t\t//获取模块\r\n\t\tconst module = findModule.call(_this, dep);\r\n\t\t//这理由循环依赖的问题，如果当前的模块是未加载的，直接返回undefined\r\n\t\treturn module.isDemand ? module['_export_'] : undefined;\r\n\t}\r\n}\r\n\r\n//获取根路径\r\ndemand.origin = (function() {\r\n\treturn(location.origin || location.protocol + '//' + location.host);\r\n})();\r\n\r\n//是否config过\r\nlet isConfig = false;\r\n\r\n//配置\r\ndemand.config = function(opts) {\r\n\tif(isConfig) {\r\n\t\terror(0);\r\n\t\treturn;\r\n\t}\r\n\r\n\topts = fn.extend(config, opts);\r\n\r\n\t//设置源路径\r\n\tthis.baseUrl = opts.baseUrl ? opts.baseUrl : this.origin;\r\n\t//配置别名\r\n\tthis.alias = setAlias(opts.alias);\r\n\t//设置shim配置\r\n\tsetShim.call(this, opts.shim);\r\n\t//设置paths\r\n\tsetPaths.call(this, opts.paths);\r\n\t//设置queue的回调\r\n\tuseQueue.call(this);\r\n\t//只允许config一次\r\n\tisConfig = true;\r\n};\r\n\r\n//再config后以后加载模块\r\ndemand.loadModule = function(paths) {\r\n\tlet loadModules;\r\n\r\n\tif(fn.isObj(paths)) {\r\n\t\tloadModules = setPaths.call(this, paths);\r\n\t} else if(fn.isStr(paths)) {\r\n\t\tloadModules = setPaths.call(this, [paths]);\r\n\t}\r\n\r\n\trunCreateScript.call(this, loadModules);\r\n\r\n\tthis.module.status = false;\r\n}\r\n\r\n//设置一下全局的环境\r\ndemand.global = typeof window !== undefined ? window : this;\r\n\r\n//模块存储\r\ndemand.module = {\r\n\tpathModule: {}, //config中的path模块\r\n\tidModule: {}, //id模块\r\n\turlModule: {}, //url路径的模块\r\n\tuse: [], //use集合\r\n\tlastLoadedModule: resetLastModule, //最后获取到的模块\r\n\tdepManage: [], //依赖管理\r\n\tdepQueue: [], //依赖队列\r\n\tstatus: false //全部的use加载状态\r\n};\r\n\r\n//加载模块\r\ndemand.define = function(id, dep, cb) {\r\n\tconst module = {};\r\n\t//存在id的模块\r\n\tif(fn.isStr(id)) {\r\n\t\tmodule['id'] = id;\r\n\t\tif(fn.isArr(dep)) {\r\n\t\t\tmodule['dep'] = dep;\r\n\t\t\tmodule['_export_'] = cb;\r\n\t\t} else if(fn.isFn(dep)) {\r\n\t\t\tmodule['dep'] = [];\r\n\t\t\tmodule['_export_'] = dep;\r\n\t\t}\r\n\t} else if(fn.isArr(id)) {\r\n\t\tmodule['id'] = null;\r\n\t\tmodule['dep'] = id;\r\n\t\tmodule['_export_'] = dep;\r\n\t} else if(fn.isFn(id)) {\r\n\t\tmodule['id'] = null;\r\n\t\tmodule['dep'] = [];\r\n\t\tmodule['_export_'] = id;\r\n\t} else {\r\n\t\tthrow('error');\r\n\t}\r\n\t/*\r\n\t *\t检查非paths或者是dep中加载的模块设置\r\n\t * */\r\n\r\n\tif(isScriptModule(this.module.lastLoadedModule)) {\r\n\t\tsetScriptLoadedModule.call(this, this.module.lastLoadedModule);\r\n\t}\r\n\r\n\t//设置到最后一个接\r\n\tthis.module.lastLoadedModule = module;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/demand/demand.js","import fn from './fn';\r\n\r\nimport { findModule } from './module';\r\n\r\nimport error from './error';\r\n\r\n/*\r\n *\t设置模块内的依赖depData \r\n * \t{\r\n * \t\tdep:[dep1,dep2],\r\n * \t\tmodule:module\r\n * \t}\r\n * */\r\n\r\nexport function buildModuleDep(module) {\r\n\tconst deps = module.dep,\r\n\t\tdemandDep = [];\r\n\r\n\tmodule.build = true;\r\n\r\n\t//初始化模块依赖\r\n\tfn.each(deps, (dep) => {\r\n\t\tconst findM = findModule.call(this, dep),\r\n\t\t\tdepExport = findM._export_;\r\n\r\n\t\t//自己依赖自己的话，返回undefined\r\n\t\tif(module === findM) {\r\n\t\t\tdemandDep.push(undefined);\r\n\t\t} else {\r\n\t\t\t/*\r\n\t\t\t *\t有关循环依赖的问题问题\r\n\t\t\t * */\r\n\r\n\t\t\tif(findM && !findM.build) {\r\n\t\t\t\tbuildModuleDep.call(this, findM);\r\n\t\t\t}\r\n\r\n\t\t\tif(!findM.isDemand) {\r\n\t\t\t\tdemandDep.push(undefined);\r\n\t\t\t} else {\r\n\t\t\t\tdemandDep.push(findM._export_);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t//初始化模块接口\r\n\tif(!module.isDemand) {\r\n\t\tmodule._export_ = module._export_.apply(this, demandDep);\r\n\t\tmodule.isDemand = true;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/dep.js","/*\r\n *\t设置垫片库 \r\n * */\r\nimport fn from './fn';\r\n\r\nimport { setModule } from './module';\r\n\r\nexport function setShim(shim) {\r\n\tfn.each(shim, (_shim, id) => {\r\n\t\t\r\n\t\tthis.define(id, _shim.dep, () => {\r\n\t\t\treturn shimContext.call(this, _shim);\r\n\t\t});\r\n\t\t\r\n\t\tconst lastLoadedModule = this.module.lastLoadedModule;\r\n\t\t\r\n\t\tsetModule.call(this, {\r\n\t\t\turl: null,\r\n\t\t\tname: null,\r\n\t\t\tfindM: lastLoadedModule\r\n\t\t});\r\n\t});\r\n}\r\n\r\n//处理shim中作用域和export接口\r\nfunction shimContext(_shim) {\r\n\tconst context = _shim.context || this.global,\r\n\t\t_export_ = _shim._export_;\r\n\tif(fn.isFn(_shim._export_)) {\r\n\t\treturn _export_.call(context);\r\n\t}\r\n\treturn context[_shim._export_];\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/shim.js","import { buildModuleDep } from './dep';\r\n\r\nimport { queue } from './queue';\r\n\r\nimport fn from './fn';\r\n\r\nimport error from './error';\r\n\r\n//设置模块的依赖队列和use中的cb\r\nexport function useQueue() {\r\n\tqueue.cb = () => {\r\n\t\tconst module = this.module;\r\n\t\t//设置dep的依赖\r\n\t\twhile(module.depManage.length !== 0) {\r\n\t\t\tconst _module = module.depManage.shift();\r\n\t\t\tbuildModuleDep.call(this, _module);\r\n\t\t}\r\n\t\t//处理use\r\n\t\trunUse.call(this);\r\n\t\t//第一次的模块加载全部完毕\r\n\t\tmodule.status = true;\r\n\t}\r\n}\r\n\r\n//运行依赖\r\nexport function runUse() {\r\n\tconst module = this.module;\r\n\tlet cbDeps = [];\r\n\t\r\n\t//异步加载并发出现use顺序加载问题\r\n\tif(queue.hasVal()) return;\r\n\t\r\n\twhile(module.use.length !== 0) {\r\n\t\tconst depData = module.use.shift();\r\n\t\tfn.each(depData.dep, (dep, index) => {\r\n\t\t\tcbDeps.push(this(dep));\r\n\t\t});\r\n\r\n\t\ttry {\r\n\t\t\tdepData.cb.apply(this, cbDeps);\r\n\t\t} catch(err) {\r\n\t\t\terror(null, err);\r\n\t\t}\r\n\r\n\t\t//依赖处理完后清空\r\n\t\tcbDeps = [];\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/use.js","//demand文件入口\r\nimport demand from './demand/demand.js';\r\n//兼容性处理\r\nimport compatibility from './demand/compatibility';\r\n\r\n(function(global, factory) {\r\n    (global ? (global.demand = factory()) : {});\r\n})(typeof window !== 'undefined' ? window : this, function() {\r\n\r\n    demand.version = \"v1.0.0\";\r\n\r\n    return demand;\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}