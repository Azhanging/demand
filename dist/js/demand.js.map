{"version":3,"sources":["webpack:///webpack/bootstrap d195237bb657ef5cb768","webpack:///./src/demand/fn.js","webpack:///./src/demand/compatibility.js","webpack:///./src/demand/demand.js","webpack:///./src/demand/queue.js","webpack:///./src/demand/set.js","webpack:///./src/index.js"],"names":["Fn","array","Array","obj","Object","fn","string","num","isNaN","cb","i","len","length","isArr","hasOwnProperty","context","args","isFn","apply","prototype","indexOf","val","index","map","mapArr","push","filter","item","demand","dep","_this","module","each","name","call","findM","createScript","use","isStr","origin","location","protocol","host","config","opts","baseUrl","alias","isObj","paths","pathModule","idModule","urlModule","lastLoadedModule","define","id","Queue","queue","shift","setAlias","setPaths","setModule","resolvePath","resolveJsExt","hasModule","findModule","ALIAS_PATH","aliasPath","path","key","test","resPath","urlModules","pathModules","isLoaded","url","script","document","createElement","async","src","onload","error","getElementsByTagName","appendChild","lastLoader","type","resetLastLoadedModule","splitResPath","split","p","pop","join","m","global","factory","window","version"],"mappings":";;;;;;;;;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;AChEA;IACqBA,E;;;;;;;8BACXC,K,EAAO;AACT,mBAAOA,iBAAiBC,KAAxB;AACH;;;8BAEKC,G,EAAK;AACP,mBAAOA,eAAeC,MAAf,IAAyB,EAAED,eAAeD,KAAjB,CAAzB,IAAoDC,QAAQ,IAAnE;AACH;;;6BAEIE,E,EAAI;AACL,mBAAO,OAAOA,EAAP,KAAc,UAArB;AACH;;;8BACKC,M,EAAQ;AACV,mBAAO,OAAOA,MAAP,KAAkB,QAAzB;AACH;;;8BACKC,G,EAAK;AACP,mBAAO,OAAOA,GAAP,KAAe,QAAf,IAA2B,CAACC,MAAMD,GAAN,CAAnC;AACH;;;6BACIJ,G,EAAKM,E,EAAI;AAAE;AACZ,gBAAIC,IAAI,CAAR;AAAA,gBACIC,MAAMR,IAAIS,MADd;AAEA,gBAAG,KAAKC,KAAL,CAAWV,GAAX,CAAH,EAAoB;AAChB,uBAAMO,IAAIC,GAAV,EAAeD,GAAf,EAAoB;AAChBD,uBAAGN,IAAIO,CAAJ,CAAH,EAAWA,CAAX;AACH;AACJ,aAJD,MAIO;AACH,qBAAIA,CAAJ,IAASP,GAAT,EAAc;AACV,wBAAGA,IAAIW,cAAJ,CAAmBJ,CAAnB,CAAH,EAA0BD,GAAGN,IAAIO,CAAJ,CAAH,EAAWA,CAAX;AAC7B;AACJ;AACJ;;;2BACED,G,EAAIM,O,EAASC,I,EAAM;AAAE;AACpBA,mBAAOA,OAAOA,IAAP,GAAc,EAArB;AACA,iBAAKC,IAAL,CAAUR,GAAV,IAAiBA,IAAGS,KAAH,CAASH,OAAT,EAAkBC,IAAlB,CAAjB,GAA4C,IAA5C;AACH;;;;;;kBAlCgBhB,E;;;;;;;;;ACDrB;;;;;;AAEA,IAAMK,KAAK,kBAAX;;AAEA;AACA,CAAC,YAAW;;AAER;AACA,QAAG,CAACA,GAAGY,IAAH,CAAQf,MAAMiB,SAAN,CAAgBC,OAAxB,CAAJ,EAAsC;AAClClB,cAAMiB,SAAN,CAAgBC,OAAhB,GAA0B,UAASC,GAAT,EAAc;AACpC,gBAAIC,QAAQ,CAAZ;AAAA,gBACIX,MAAM,KAAKC,MADf;AAEA,mBAAMU,QAAQX,GAAd,EAAmBW,OAAnB,EAA4B;AACxB,oBAAG,KAAKA,KAAL,MAAgBD,GAAnB,EAAwB,OAAOC,KAAP;AAC3B;AACD,mBAAO,CAAC,CAAR;AACH,SAPD;AAQH;;AAED;AACA,QAAG,CAACjB,GAAGY,IAAH,CAAQf,MAAMiB,SAAN,CAAgBI,GAAxB,CAAJ,EAAkC;AAC9BrB,cAAMiB,SAAN,CAAgBI,GAAhB,GAAsB,UAASlB,EAAT,EAAa;AAC/B,gBAAImB,SAAS,EAAb;AAAA,gBACId,IAAI,CADR;AAAA,gBAEIC,MAAM,KAAKC,MAFf;AAGA,mBAAMF,IAAIC,GAAV,EAAeD,GAAf,EAAoB;AAChBc,uBAAOC,IAAP,CAAYpB,GAAG,KAAKK,CAAL,CAAH,EAAYA,CAAZ,CAAZ;AACH;AACD,mBAAOc,MAAP;AACH,SARD;AASH;;AAED;AACA,QAAG,CAACnB,GAAGY,IAAH,CAAQf,MAAMiB,SAAN,CAAgBO,MAAxB,CAAJ,EAAqC;AACjCxB,cAAMiB,SAAN,CAAgBO,MAAhB,GAAyB,UAASrB,EAAT,EAAa;AAClC,gBAAImB,SAAS,EAAb;AAAA,gBACId,IAAI,CADR;AAAA,gBAEIC,MAAM,KAAKC,MAFf;AAGA,mBAAMF,IAAIC,GAAV,EAAeD,GAAf,EAAoB;AAChB,oBAAIiB,OAAO,KAAKjB,CAAL,CAAX;AACA,oBAAGL,GAAGsB,IAAH,EAASjB,CAAT,CAAH,EAAgBc,OAAOC,IAAP,CAAYE,IAAZ;AACnB;AACD,mBAAOH,MAAP;AACH,SATD;AAUH;AAEJ,CAzCD,I;;;;;;;;;;;;kBCMwBI,M;;AAXxB;;;;AAEA;;;;AAOA,IAAMvB,KAAK,kBAAX;;AAEe,SAASuB,MAAT,CAAgBC,GAAhB,EAAqBpB,EAArB,EAAyB;AACvC,KAAMqB,QAAQF,MAAd;AAAA,KACCG,SAASD,MAAMC,MADhB;AAEA;AACA,KAAG1B,GAAGQ,KAAH,CAASgB,GAAT,CAAH,EAAkB;AACjBxB,KAAG2B,IAAH,CAAQH,GAAR,EAAa,UAACI,IAAD,EAAOX,KAAP,EAAiB;AAC7B,OAAG,CAAC,eAAUY,IAAV,CAAeJ,KAAf,EAAsBG,IAAtB,CAAJ,EAAiC;AACjC,OAAME,QAAQ,gBAAWD,IAAX,CAAgBJ,KAAhB,EAAuBG,IAAvB,CAAd;AACA5B,MAAGI,EAAH,CAAM0B,MAAMC,YAAZ,EAA0BN,KAA1B;AACA,GAJD;;AAMA;AACAC,SAAOM,GAAP,CAAWZ,IAAX,CAAgBhB,EAAhB;AACA,EATD,MASO,IAAGJ,GAAGiC,KAAH,CAAST,GAAT,CAAH,EAAkB;AACxB;AACA,SAAO,gBAAWK,IAAX,CAAgBJ,KAAhB,EAAsBD,GAAtB,CAAP;AACA;AACD;;AAED;AACAD,OAAOW,MAAP,GAAiB,YAAW;AAC3B,QAAOC,SAASD,MAAT,IAAmBC,SAASC,QAAT,GAAoB,IAApB,GAA2BD,SAASE,IAA9D;AACA,CAFe,EAAhB;;AAIA;AACAd,OAAOe,MAAP,GAAgB,UAASC,IAAT,EAAe;AAC9B;AACA,MAAKC,OAAL,GAAeD,KAAKC,OAAL,GAAeD,KAAKC,OAApB,GAA8B,KAAKN,MAAlD;AACA;AACA,MAAKO,KAAL,GAAazC,GAAG0C,KAAH,CAASH,KAAKE,KAAd,IAAuB,mBAASF,KAAKE,KAAd,CAAvB,GAA8C,EAA3D;AACA;AACA,eAASZ,IAAT,CAAc,IAAd,EAAoBU,KAAKI,KAAzB;AACA,CAPD;;AASA;AACApB,OAAOG,MAAP,GAAgB;AACfkB,aAAY,EADG;AAEfC,WAAU,EAFK;AAGfC,YAAW,EAHI;AAIfd,MAAK,EAJU;AAKfe,mBAAkB;AALH,CAAhB;;AAQA;AACAxB,OAAOyB,MAAP,GAAgB,UAASC,EAAT,EAAazB,GAAb,EAAkBpB,EAAlB,EAAsB;AACrC,KAAMsB,SAAS,EAAf;AACA;AACA,KAAG1B,GAAGiC,KAAH,CAASgB,EAAT,CAAH,EAAiB;AAChBvB,SAAO,IAAP,IAAeuB,EAAf;AACA,MAAGjD,GAAGQ,KAAH,CAASgB,GAAT,CAAH,EAAkB;AACjBE,UAAO,KAAP,IAAgBF,GAAhB;AACAE,UAAO,UAAP,IAAqBtB,EAArB;AACA,GAHD,MAGO,IAAGJ,GAAGY,IAAH,CAAQY,GAAR,CAAH,EAAiB;AACvBE,UAAO,KAAP,IAAgB,EAAhB;AACAA,UAAO,UAAP,IAAqBF,GAArB;AACA;AACD,EATD,MASO,IAAGxB,GAAGQ,KAAH,CAASyC,EAAT,CAAH,EAAiB;AACvBvB,SAAO,IAAP,IAAe,IAAf;AACAA,SAAO,KAAP,IAAgBuB,EAAhB;AACAvB,SAAO,UAAP,IAAqBF,GAArB;AACA,EAJM,MAIA,IAAGxB,GAAGY,IAAH,CAAQqC,EAAR,CAAH,EAAgB;AACtBvB,SAAO,KAAP,IAAgBA,OAAO,IAAP,IAAe,IAA/B;AACAA,SAAO,UAAP,IAAqBuB,EAArB;AACA,EAHM,MAGA;AACN,QAAM,OAAN;AACA;AACD;AACA,MAAKvB,MAAL,CAAYqB,gBAAZ,GAA+BrB,MAA/B;AACA,CAxBD,C;;;;;;;;;;;;;;;;;ACvDA;;;;IAIqBwB,K;AACjB,qBAAc;AAAA;;AACV,aAAKC,KAAL,GAAa,EAAb;AACH;;;;6BACInD,E,EAAI;AACL,iBAAKmD,KAAL,CAAW/B,IAAX,CAAgBpB,EAAhB;AACH;;;+BACM;AACH,gBAAG,KAAKmD,KAAL,CAAW5C,MAAX,IAAqB,CAAxB,EAA2B,KAAK4C,KAAL,CAAWC,KAAX;AAC9B;;;;;;kBATgBF,K;;;;;;;;;;;;;QCULG,Q,GAAAA,Q;QAWAC,Q,GAAAA,Q;QA6CAC,S,GAAAA,S;QAuBAC,W,GAAAA,W;QAsBAC,Y,GAAAA,Y;QAMAC,S,GAAAA,S;QAWAC,U,GAAAA,U;;AAhIhB;;;;AAEA;;;;;;AANA;;;;AAQA,IAAM3D,KAAK,kBAAX;;AAEA;AACA,IAAM4D,aAAa,UAAnB;;AAEA;AACO,SAASP,QAAT,CAAkBZ,KAAlB,EAAyB;AAC/B,KAAMoB,YAAY,EAAlB;AACA7D,IAAG2B,IAAH,CAAQc,KAAR,EAAe,UAACqB,IAAD,EAAOC,GAAP,EAAe;AAC7B,MAAGH,WAAWI,IAAX,CAAgBD,GAAhB,CAAH,EAAyB;AACxBF,aAAUE,GAAV,IAAiBD,IAAjB;AACA;AACD,EAJD;AAKA,QAAOD,SAAP;AACA;;AAED;AACO,SAASP,QAAT,CAAkBX,KAAlB,EAAyB;AAAA;;AAC/B3C,IAAG2B,IAAH,CAAQgB,KAAR,EAAe,UAACmB,IAAD,EAAOlC,IAAP,EAAgB;;AAE9B,MAAML,eAAN;AAAA,MACC0C,UAAUT,YAAY3B,IAAZ,SAAuBiC,IAAvB,CADX;AAAA,MACyC;AACxCI,eAAa,OAAKxC,MAAL,CAAYoB,SAF1B;AAAA,MAEqC;AACpCqB,gBAAc,OAAKzC,MAAL,CAAYkB,UAH3B,CAF8B,CAKS;;AAEvCsB,aAAWD,OAAX,IAAsB;AACrBG,aAAU,KADW;AAErBrC,eAFqB,0BAEN;AACdA,kBAAaF,IAAb,CAAkBN,MAAlB,EAA0B;AACzB8C,UAAKJ,OADoB;AAEzBrC,WAAMA;AAFmB,KAA1B;AAIA;AAPoB,GAAtB;;AAUA;AACA,MAAG5B,GAAGiC,KAAH,CAASL,IAAT,CAAH,EAAmB;AAClBuC,eAAYvC,IAAZ,IAAoBsC,WAAWD,OAAX,CAApB;AACA;AACD,EArBD;AAsBA;;AAED;AACO,SAASlC,aAAT,CAAsBQ,IAAtB,EAA4B;AAClC,KAAMd,QAAQ,IAAd;AAAA,KACC6C,SAASC,SAASC,aAAT,CAAuB,QAAvB,CADV;AAEA;AACAjC,MAAKT,KAAL,GAAa6B,WAAW9B,IAAX,CAAgB,IAAhB,EAAsBU,KAAK8B,GAA3B,CAAb;AACAC,QAAOG,KAAP,GAAe,IAAf;AACAH,QAAOI,GAAP,GAAajB,aAAalB,KAAK8B,GAAlB,CAAb;AACAC,QAAOK,MAAP,GAAgB,YAAW;AAC1BpB,YAAU1B,IAAV,CAAeJ,KAAf,EAAsBc,IAAtB;AACAA,OAAKT,KAAL,CAAWsC,QAAX,GAAsB,IAAtB;AACA,SAAO7B,KAAKT,KAAL,CAAWC,YAAlB;AACA,EAJD;AAKAuC,QAAOM,KAAP,GAAe,YAAW,CAEzB,CAFD;AAGAL,UAASM,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyCC,WAAzC,CAAqDR,MAArD;AACA;;AAED;;AACO,SAASf,SAAT,CAAmBhB,IAAnB,EAAyB;;AAE/B,KAAMwC,aAAa,KAAKrD,MAAL,CAAYqB,gBAA/B;;AAEA/C,IAAG2B,IAAH,CAAQoD,UAAR,EAAoB,UAACrD,MAAD,EAASsD,IAAT,EAAkB;AACrCzC,OAAKT,KAAL,CAAWkD,IAAX,IAAmBtD,MAAnB;AACA,EAFD;;AAIA;AACA,KAAGqD,WAAW9B,EAAd,EAAkB;AACjB,OAAKvB,MAAL,CAAYmB,QAAZ,CAAqBkC,WAAW9B,EAAhC,IAAsCV,KAAKT,KAA3C;AACA;;AAED;AACAmD,uBAAsBpD,IAAtB,CAA2B,IAA3B;AACA;;AAED;AACA,SAASoD,qBAAT,GAAiC;AAChC,MAAKvD,MAAL,CAAYqB,gBAAZ,GAA+B,EAA/B;AACA;;AAED;AACO,SAASS,WAAT,CAAqBM,IAArB,EAA2B;AACjC,KAAMG,UAAU,CAAC,KAAKzB,OAAN,CAAhB;AAAA,KACC0C,eAAepB,KAAKqB,KAAL,CAAW,GAAX,CADhB;;AAGAnF,IAAG2B,IAAH,CAAQuD,YAAR,EAAsB,UAACE,CAAD,EAAInE,KAAJ,EAAc;AACnC,UAAOmE,CAAP;AACC,QAAK,EAAL;AACC,QAAGnE,UAAU,CAAb,EAAgBgD,QAAQhD,KAAR,IAAiB,EAAjB;AAChB;AACD,QAAK,GAAL;AACC;AACD,QAAK,IAAL;AACCgD,YAAQoB,GAAR;AACA;AACD;AACCpB,YAAQ7C,IAAR,CAAagE,CAAb;AAVF;AAYA,EAbD;AAcA,QAAOnB,QAAQqB,IAAR,CAAa,GAAb,CAAP;AACA;;AAED;AACO,SAAS7B,YAAT,CAAsBY,GAAtB,EAA2B;AACjC,KAAG,QAAQL,IAAR,CAAaK,GAAb,CAAH,EAAsB,OAAOA,GAAP,CAAtB,KACK,OAAOA,MAAM,KAAb;AACL;;AAED;AACO,SAASX,SAAT,CAAmB6B,CAAnB,EAAsB;AAC5B,KAAMzB,OAAON,YAAY3B,IAAZ,CAAiB,IAAjB,EAAuB0D,CAAvB,CAAb;AAAA,KACC7D,SAAS,KAAKA,MADf;AAEA,KAAGA,OAAOkB,UAAP,CAAkB2C,CAAlB,KACF7D,OAAOmB,QAAP,CAAgB0C,CAAhB,CADE,IAEF7D,OAAOoB,SAAP,CAAiBgB,IAAjB,CAFD,EAGE,OAAO,IAAP;AACF,QAAO,KAAP;AACA;;AAED;AACO,SAASH,UAAT,CAAoB4B,CAApB,EAAuB;AAC7B,KAAM7D,SAAS,KAAKA,MAApB;AAAA,KACCoC,OAAON,YAAY3B,IAAZ,CAAiB,IAAjB,EAAuB0D,CAAvB,CADR;AAEA,KAAG7D,OAAOkB,UAAP,CAAkB2C,CAAlB,CAAH,EAAyB,OAAO7D,OAAOkB,UAAP,CAAkB2C,CAAlB,CAAP;AACzB,KAAG7D,OAAOoB,SAAP,CAAiBgB,IAAjB,CAAH,EAA2B,OAAOpC,OAAOoB,SAAP,CAAiBgB,IAAjB,CAAP;AAC3B,KAAGpC,OAAOmB,QAAP,CAAgB0C,CAAhB,CAAH,EAAuB,OAAO7D,OAAOmB,QAAP,CAAgB0C,CAAhB,CAAP;AACvB,QAAO,KAAP;AACA,C;;;;;;;;;AC1ID;;;;AAEA;;;;;;AAHA;AAKA,CAAC,UAASC,MAAT,EAAiBC,OAAjB,EAA0B;AACtBD,aAAUA,OAAOjE,MAAP,GAAgBkE,SAA1B,GAAuC,EAAxC;AACH,CAFD,EAEG,OAAOC,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,YAFH,EAEkD,YAAW;;AAEzD,qBAAOC,OAAP,GAAiB,QAAjB;;AAEA;AACH,CAPD;AAHA,O","file":"js/demand.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d195237bb657ef5cb768","//常用方法\r\nexport default class Fn {\r\n    isArr(array) {\r\n        return array instanceof Array;\r\n    }\r\n\r\n    isObj(obj) {\r\n        return obj instanceof Object && !(obj instanceof Array) && obj !== null;\r\n    }\r\n\r\n    isFn(fn) {\r\n        return typeof fn === 'function';\r\n    }\r\n    isStr(string) {\r\n        return typeof string === 'string';\r\n    }\r\n    isNum(num) {\r\n        return typeof num === 'number' || !isNaN(num);\r\n    }\r\n    each(obj, cb) { //遍历\r\n        let i = 0,\r\n            len = obj.length;\r\n        if(this.isArr(obj)) {\r\n            for(; i < len; i++) {\r\n                cb(obj[i], i);\r\n            }\r\n        } else {\r\n            for(i in obj) {\r\n                if(obj.hasOwnProperty(i)) cb(obj[i], i);\r\n            }\r\n        }\r\n    }\r\n    cb(cb, context, args) { //回调\r\n        args = args ? args : [];\r\n        this.isFn(cb) ? (cb.apply(context, args)) : null;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/fn.js","import Fn from './fn';\r\n\r\nconst fn = new Fn();\r\n\r\n//兼容性IE8\r\n(function() {\r\n\r\n    //兼容IE8中 的indexOf\r\n    if(!fn.isFn(Array.prototype.indexOf)) {\r\n        Array.prototype.indexOf = function(val) {\r\n            let index = 0,\r\n                len = this.length;\r\n            for(; index < len; index++) {\r\n                if(this[index] === val) return index;\r\n            }\r\n            return -1;\r\n        }\r\n    }\r\n\r\n    //map\r\n    if(!fn.isFn(Array.prototype.map)) {\r\n        Array.prototype.map = function(fn) {\r\n            let mapArr = [],\r\n                i = 0,\r\n                len = this.length;\r\n            for(; i < len; i++) {\r\n                mapArr.push(fn(this[i], i));\r\n            }\r\n            return mapArr;\r\n        }\r\n    }\r\n\r\n    //filter\r\n    if(!fn.isFn(Array.prototype.filter)) {\r\n        Array.prototype.filter = function(fn) {\r\n            let mapArr = [],\r\n                i = 0,\r\n                len = this.length;\r\n            for(; i < len; i++) {\r\n                let item = this[i];\r\n                if(fn(item, i)) mapArr.push(item);\r\n            }\r\n            return mapArr;\r\n        }\r\n    }\r\n\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./src/demand/compatibility.js","import Fn from './fn';\r\n\r\nimport {\r\n\tsetAlias,\r\n\tsetPaths,\r\n\thasModule,\r\n\tfindModule\r\n} from './set';\r\n\r\nconst fn = new Fn();\r\n\r\nexport default function demand(dep, cb) {\r\n\tconst _this = demand,\r\n\t\tmodule = _this.module;\r\n\t//运行依赖\r\n\tif(fn.isArr(dep)) {\r\n\t\tfn.each(dep, (name, index) => {\r\n\t\t\tif(!hasModule.call(_this, name)) return;\r\n\t\t\tconst findM = findModule.call(_this, name);\r\n\t\t\tfn.cb(findM.createScript, _this);\r\n\t\t});\r\n\r\n\t\t//存储回调，等所有的模块加载完毕后调用\r\n\t\tmodule.use.push(cb);\r\n\t} else if(fn.isStr(dep)) {\r\n\t\t//获取模块\r\n\t\treturn findModule.call(_this,dep);\r\n\t}\r\n}\r\n\r\n//获取根路径\r\ndemand.origin = (function() {\r\n\treturn(location.origin || location.protocol + '//' + location.host);\r\n})();\r\n\r\n//配置\r\ndemand.config = function(opts) {\r\n\t//设置源路径\r\n\tthis.baseUrl = opts.baseUrl ? opts.baseUrl : this.origin;\r\n\t//配置别名\r\n\tthis.alias = fn.isObj(opts.alias) ? setAlias(opts.alias) : {};\r\n\t//设置paths\r\n\tsetPaths.call(this, opts.paths);\r\n};\r\n\r\n//模块存储\r\ndemand.module = {\r\n\tpathModule: {},\r\n\tidModule: {},\r\n\turlModule: {},\r\n\tuse: [],\r\n\tlastLoadedModule: {}\r\n};\r\n\r\n//加载模块\r\ndemand.define = function(id, dep, cb) {\r\n\tconst module = {};\r\n\t//存在id的模块\r\n\tif(fn.isStr(id)) {\r\n\t\tmodule['id'] = id;\r\n\t\tif(fn.isArr(dep)) {\r\n\t\t\tmodule['dep'] = dep;\r\n\t\t\tmodule['_export_'] = cb;\r\n\t\t} else if(fn.isFn(dep)) {\r\n\t\t\tmodule['dep'] = [];\r\n\t\t\tmodule['_export_'] = dep;\r\n\t\t}\r\n\t} else if(fn.isArr(id)) {\r\n\t\tmodule['id'] = null;\r\n\t\tmodule['dep'] = id;\r\n\t\tmodule['_export_'] = dep;\r\n\t} else if(fn.isFn(id)) {\r\n\t\tmodule['dep'] = module['id'] = null;\r\n\t\tmodule['_export_'] = id;\r\n\t} else {\r\n\t\tthrow('error');\r\n\t}\r\n\t//设置到最后一个接\r\n\tthis.module.lastLoadedModule = module;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/demand/demand.js","/*\r\n    队列 \r\n * */\r\n\r\nexport default class Queue {\r\n    constructor() {\r\n        this.queue = [];\r\n    }\r\n    push(fn) {\r\n        this.queue.push(fn);\r\n    }\r\n    next() {\r\n        if(this.queue.length != 0) this.queue.shift()();\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/queue.js","/*\r\n * set，设置模块方法\r\n * */\r\n\r\nimport Queue from './queue';\r\n\r\nimport Fn from './fn';\r\n\r\nconst fn = new Fn();\r\n\r\n//alias的规则\r\nconst ALIAS_PATH = /^@\\S{1,}/;\r\n\r\n//设置别名路径\r\nexport function setAlias(alias) {\r\n\tconst aliasPath = {};\r\n\tfn.each(alias, (path, key) => {\r\n\t\tif(ALIAS_PATH.test(key)) {\r\n\t\t\taliasPath[key] = path;\r\n\t\t}\r\n\t});\r\n\treturn aliasPath;\r\n}\r\n\r\n//设置模块路径\r\nexport function setPaths(paths) {\r\n\tfn.each(paths, (path, name) => {\r\n\r\n\t\tconst demand = this,\r\n\t\t\tresPath = resolvePath.call(this, path), //处理完的路径\r\n\t\t\turlModules = this.module.urlModule, //通过url处理的模块\r\n\t\t\tpathModules = this.module.pathModule; //通过config中path的模块\r\n\r\n\t\turlModules[resPath] = {\r\n\t\t\tisLoaded: false,\r\n\t\t\tcreateScript() {\r\n\t\t\t\tcreateScript.call(demand, {\r\n\t\t\t\t\turl: resPath,\r\n\t\t\t\t\tname: name\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//如果是从paths中配置的路径\r\n\t\tif(fn.isStr(name)) {\r\n\t\t\tpathModules[name] = urlModules[resPath];\r\n\t\t}\r\n\t});\r\n}\r\n\r\n//创建script节点\r\nexport function createScript(opts) {\r\n\tconst _this = this,\r\n\t\tscript = document.createElement('script');\r\n\t//获取模块\r\n\topts.findM = findModule.call(this, opts.url);\r\n\tscript.async = true;\r\n\tscript.src = resolveJsExt(opts.url);\r\n\tscript.onload = function() {\r\n\t\tsetModule.call(_this, opts);\r\n\t\topts.findM.isLoaded = true;\r\n\t\tdelete opts.findM.createScript;\r\n\t};\r\n\tscript.error = function() {\r\n\r\n\t};\r\n\tdocument.getElementsByTagName('head')[0].appendChild(script);\r\n}\r\n\r\n//设置模块的信息\r\nexport function setModule(opts) {\r\n\r\n\tconst lastLoader = this.module.lastLoadedModule;\r\n\r\n\tfn.each(lastLoader, (module, type) => {\r\n\t\topts.findM[type] = module;\r\n\t});\r\n\r\n\t//扶弱当前的模块中存在id的名，设置id的模块\r\n\tif(lastLoader.id) {\r\n\t\tthis.module.idModule[lastLoader.id] = opts.findM;\r\n\t}\r\n\r\n\t//重设最后的模块\r\n\tresetLastLoadedModule.call(this);\r\n}\r\n\r\n//重设最后的模块\r\nfunction resetLastLoadedModule() {\r\n\tthis.module.lastLoadedModule = {};\r\n}\r\n\r\n//路径处理\r\nexport function resolvePath(path) {\r\n\tconst resPath = [this.baseUrl],\r\n\t\tsplitResPath = path.split('/');\r\n\r\n\tfn.each(splitResPath, (p, index) => {\r\n\t\tswitch(p) {\r\n\t\t\tcase '':\r\n\t\t\t\tif(index === 0) resPath[index] = '';\r\n\t\t\t\tbreak;\r\n\t\t\tcase '.':\r\n\t\t\t\tbreak;\r\n\t\t\tcase '..':\r\n\t\t\t\tresPath.pop();\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tresPath.push(p);\r\n\t\t}\r\n\t});\r\n\treturn resPath.join('/');\r\n}\r\n\r\n//处理是否存在js后缀\r\nexport function resolveJsExt(url) {\r\n\tif(/\\.js/g.test(url)) return url;\r\n\telse return url + '.js';\r\n}\r\n\r\n//查找当前的模块是否在模块中存在\r\nexport function hasModule(m) {\r\n\tconst path = resolvePath.call(this, m),\r\n\t\tmodule = this.module;\r\n\tif(module.pathModule[m] ||\r\n\t\tmodule.idModule[m] ||\r\n\t\tmodule.urlModule[path]\r\n\t) return true;\r\n\treturn false;\r\n}\r\n\r\n//查找对应的模块内容  权重：path > url > id\r\nexport function findModule(m) {\r\n\tconst module = this.module,\r\n\t\tpath = resolvePath.call(this, m);\r\n\tif(module.pathModule[m]) return module.pathModule[m];\r\n\tif(module.urlModule[path]) return module.urlModule[path];\r\n\tif(module.idModule[m]) return module.idModule[m];\r\n\treturn false;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/set.js","//demand文件入口\r\nimport demand from './demand/demand.js';\r\n//兼容性处理\r\nimport compatibility from './demand/compatibility';\r\n\r\n(function(global, factory) {\r\n    (global ? (global.demand = factory()) : {});\r\n})(typeof window !== 'undefined' ? window : this, function() {\r\n\r\n    demand.version = \"v1.0.0\";\r\n\r\n    return demand;\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}