{"version":3,"sources":["webpack:///webpack/bootstrap a43f5a8bbca08be5143e","webpack:///./src/demand/fn.js","webpack:///./src/demand/compatibility.js","webpack:///./src/demand/demand.js","webpack:///./src/demand/queue.js","webpack:///./src/demand/set.js","webpack:///./src/index.js"],"names":["Fn","array","Array","obj","Object","fn","string","num","isNaN","cb","i","len","length","isArr","hasOwnProperty","context","args","isFn","apply","prototype","indexOf","val","index","map","mapArr","push","filter","item","demand","dep","_this","module","each","name","call","findM","createScript","use","isStr","origin","location","protocol","host","config","opts","baseUrl","alias","isObj","paths","pathModule","idModule","urlModule","lastLoadedModule","define","id","Queue","queue","shift","setModuleQueue","setAlias","setPaths","setModule","resolvePath","resolveJsExt","hasModule","findModule","ALIAS_PATH","depManage","depData","buildModuleDep","cbDeps","deps","demandDep","depExport","isDemand","_export_","aliasPath","path","key","test","loadModules","resPath","urlModules","pathModules","pathConfig","url","hasCreateScript","isCreateScript","script","document","createElement","async","src","onload","next","error","getElementsByTagName","appendChild","lastLoader","type","runCreateScript","unshift","resetLastLoadedModule","splitResPath","split","p","pop","join","m","global","factory","window","version"],"mappings":"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","file":"js/demand.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a43f5a8bbca08be5143e","//常用方法\r\nexport default class Fn {\r\n    isArr(array) {\r\n        return array instanceof Array;\r\n    }\r\n\r\n    isObj(obj) {\r\n        return obj instanceof Object && !(obj instanceof Array) && obj !== null;\r\n    }\r\n\r\n    isFn(fn) {\r\n        return typeof fn === 'function';\r\n    }\r\n    isStr(string) {\r\n        return typeof string === 'string';\r\n    }\r\n    isNum(num) {\r\n        return typeof num === 'number' || !isNaN(num);\r\n    }\r\n    each(obj, cb) { //遍历\r\n        let i = 0,\r\n            len = obj.length;\r\n        if(this.isArr(obj)) {\r\n            for(; i < len; i++) {\r\n                cb(obj[i], i);\r\n            }\r\n        } else {\r\n            for(i in obj) {\r\n                if(obj.hasOwnProperty(i)) cb(obj[i], i);\r\n            }\r\n        }\r\n    }\r\n    cb(cb, context, args) { //回调\r\n        args = args ? args : [];\r\n        this.isFn(cb) ? (cb.apply(context, args)) : null;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/fn.js","import Fn from './fn';\r\n\r\nconst fn = new Fn();\r\n\r\n//兼容性IE8\r\n(function() {\r\n\r\n    //兼容IE8中 的indexOf\r\n    if(!fn.isFn(Array.prototype.indexOf)) {\r\n        Array.prototype.indexOf = function(val) {\r\n            let index = 0,\r\n                len = this.length;\r\n            for(; index < len; index++) {\r\n                if(this[index] === val) return index;\r\n            }\r\n            return -1;\r\n        }\r\n    }\r\n\r\n    //map\r\n    if(!fn.isFn(Array.prototype.map)) {\r\n        Array.prototype.map = function(fn) {\r\n            let mapArr = [],\r\n                i = 0,\r\n                len = this.length;\r\n            for(; i < len; i++) {\r\n                mapArr.push(fn(this[i], i));\r\n            }\r\n            return mapArr;\r\n        }\r\n    }\r\n\r\n    //filter\r\n    if(!fn.isFn(Array.prototype.filter)) {\r\n        Array.prototype.filter = function(fn) {\r\n            let mapArr = [],\r\n                i = 0,\r\n                len = this.length;\r\n            for(; i < len; i++) {\r\n                let item = this[i];\r\n                if(fn(item, i)) mapArr.push(item);\r\n            }\r\n            return mapArr;\r\n        }\r\n    }\r\n\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./src/demand/compatibility.js","import Fn from './fn';\r\n\r\nimport {\r\n\tsetAlias,\r\n\tsetPaths,\r\n\tsetModuleQueue,\r\n\thasModule,\r\n\tfindModule\r\n} from './set';\r\n\r\nconst fn = new Fn();\r\n\r\nexport default function demand(dep, cb) {\r\n\tconst _this = demand,\r\n\t\tmodule = _this.module;\r\n\t//运行依赖\r\n\tif(fn.isArr(dep)) {\r\n\t\tfn.each(dep, (name, index) => {\r\n\t\t\tif(!hasModule.call(_this, name)) return;\r\n\t\t\tconst findM = findModule.call(_this, name);\r\n\t\t\tfn.cb(findM.createScript, _this);\r\n\t\t});\r\n\r\n\t\t//存储回调，等所有的模块加载完毕后调用\r\n\t\tmodule.use.push({\r\n\t\t   cb:cb,\r\n\t\t   dep:dep\r\n\t\t});\r\n\t} else if(fn.isStr(dep)) {\r\n\t\t//获取模块\r\n\t\treturn findModule.call(_this,dep)['_export_'];\r\n\t}\r\n}\r\n\r\n//获取根路径\r\ndemand.origin = (function() {\r\n\treturn(location.origin || location.protocol + '//' + location.host);\r\n})();\r\n\r\n//配置\r\ndemand.config = function(opts) {\r\n\t//设置源路径\r\n\tthis.baseUrl = opts.baseUrl ? opts.baseUrl : this.origin;\r\n\t//配置别名\r\n\tthis.alias = fn.isObj(opts.alias) ? setAlias(opts.alias) : {};\r\n\t//设置paths\r\n\tsetPaths.call(this, opts.paths);\r\n\t//设置queue的回调\r\n\tsetModuleQueue.call(this);\r\n};\r\n\r\n//模块存储\r\ndemand.module = {\r\n\tpathModule: {},\r\n\tidModule: {},\r\n\turlModule: {},\r\n\tuse: [],\r\n\tlastLoadedModule: {}\r\n};\r\n\r\n//加载模块\r\ndemand.define = function(id, dep, cb) {\r\n\tconst module = {};\r\n\t//存在id的模块\r\n\tif(fn.isStr(id)) {\r\n\t\tmodule['id'] = id;\r\n\t\tif(fn.isArr(dep)) {\r\n\t\t\tmodule['dep'] = dep;\r\n\t\t\tmodule['_export_'] = cb;\r\n\t\t} else if(fn.isFn(dep)) {\r\n\t\t\tmodule['dep'] = [];\r\n\t\t\tmodule['_export_'] = dep;\r\n\t\t}\r\n\t} else if(fn.isArr(id)) {\r\n\t\tmodule['id'] = null;\r\n\t\tmodule['dep'] = id;\r\n\t\tmodule['_export_'] = dep;\r\n\t} else if(fn.isFn(id)) {\r\n\t    module['id'] = null;\r\n\t\tmodule['dep'] = [];\r\n\t\tmodule['_export_'] = id;\r\n\t} else {\r\n\t\tthrow('error');\r\n\t}\r\n\t//设置到最后一个接\r\n\tthis.module.lastLoadedModule = module;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/demand/demand.js","/*\r\n    队列 \r\n * */\r\n\r\nexport default class Queue {\r\n    constructor(opts) {\r\n        this.queue = [];\r\n    }\r\n    push(fn) {\r\n        this.queue.push(fn);\r\n    }\r\n    next() {\r\n        if(this.queue.length != 0) {\r\n            this.queue.shift();\r\n        }\r\n        \r\n        if(this.queue.length === 0) this.cb();\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/queue.js","/*\r\n * set，设置模块方法\r\n * */\r\n\r\nimport Queue from './queue';\r\n\r\nimport Fn from './fn';\r\n\r\nconst fn = new Fn();\r\n\r\n//alias的规则\r\nconst ALIAS_PATH = /^@\\S{1,}/;\r\n//创建队列\r\nconst queue = new Queue();\r\n//依赖管理\r\nconst depManage = [];\r\n\r\n//设置回调\r\nexport function setModuleQueue() {\r\n    queue.cb = () => {\r\n        fn.each(depManage, (depData, index) => {\r\n            buildModuleDep.call(this,depData);\r\n        });\r\n        \r\n        const cbDeps = [];\r\n        \r\n        fn.each(this.module.use, (depData, index) => {\r\n            \r\n            fn.each(depData.dep,(dep,index)=>{\r\n                cbDeps.push(this(dep));\r\n            });\r\n            \r\n            depData.cb.apply(this,cbDeps);\r\n        });\r\n    }\r\n}\r\n\r\n//设置模块内的依赖\r\nfunction buildModuleDep(depData) {\r\n    const module = depData.module, \r\n        deps = depData.dep,\r\n        demandDep = [];\r\n\r\n    fn.each(deps, (dep) => {\r\n\r\n        const findM = findModule.call(this, dep),\r\n            depExport = findM['_export_'];\r\n\r\n        if(!findM.isDemand) {\r\n            findM['_export_'] = new depExport();\r\n            findM.isDemand = true;\r\n        }\r\n\r\n        demandDep.push(findM['_export_']);\r\n\r\n    });\r\n\r\n    if(!module.isDemand) {\r\n\r\n        module._export_ = module._export_.apply(this, demandDep);\r\n\r\n        module.isDemand = true;\r\n    }\r\n}\r\n\r\n//设置别名路径\r\nexport function setAlias(alias) {\r\n    const aliasPath = {};\r\n    fn.each(alias, (path, key) => {\r\n        if(ALIAS_PATH.test(key)) {\r\n            aliasPath[key] = path;\r\n        }\r\n    });\r\n    return aliasPath;\r\n}\r\n\r\n//设置模块路径\r\nexport function setPaths(paths) {\r\n\r\n    const loadModules = [];\r\n\r\n    fn.each(paths, (path, name) => {\r\n\r\n        const demand = this,\r\n            resPath = resolvePath.call(this, path), //处理完的路径\r\n            urlModules = this.module.urlModule, //通过url处理的模块\r\n            pathModules = this.module.pathModule, //通过config中path的模块\r\n            pathConfig = {\r\n                url: resPath,\r\n                name: name\r\n            };\r\n\r\n        //检查是否存在对应的模块，存在跳过\r\n        if(hasModule.call(this, path)) {\r\n            const hasCreateScript = isCreateScript.call(this, path);\r\n            //当前的模块是否被加载script\r\n            if(hasCreateScript) {\r\n                hasCreateScript.call(this);\r\n            }\r\n            return;\r\n        }\r\n\r\n        urlModules[resPath] = {\r\n            createScript() {\r\n                createScript.call(demand, pathConfig);\r\n            }\r\n        }\r\n\r\n        //如果是从paths中配置的路径\r\n        if(fn.isStr(name)) {\r\n            pathModules[name] = urlModules[resPath];\r\n        }\r\n\r\n        loadModules.push(pathConfig);\r\n\r\n    });\r\n\r\n    //返回处理完的模块路径\r\n    return loadModules;\r\n}\r\n\r\n//创建script节点\r\nexport function createScript(opts) {\r\n    const script = document.createElement('script');\r\n    //获取模块\r\n    opts.findM = findModule.call(this, opts.url);\r\n    script.async = true;\r\n    script.src = resolveJsExt(opts.url);\r\n\r\n    script.onload = () => {\r\n        delete opts.findM.createScript;\r\n        setModule.call(this, opts);\r\n        queue.next();\r\n    };\r\n\r\n    script.error = function() {\r\n\r\n    };\r\n\r\n    queue.push(false);\r\n\r\n    document.getElementsByTagName('head')[0].appendChild(script);\r\n}\r\n\r\n//设置模块的信息\r\nexport function setModule(opts) {\r\n\r\n    const lastLoader = this.module.lastLoadedModule,\r\n        dep = lastLoader.dep;\r\n\r\n    //把最后加载的模块内容加载进去\r\n    fn.each(lastLoader, (module, type) => {\r\n        opts.findM[type] = module;\r\n    });\r\n\r\n    //扶弱当前的模块中存在id的名，设置id的模块\r\n    if(lastLoader.id) {\r\n        this.module.idModule[lastLoader.id] = opts.findM;\r\n    }\r\n\r\n    //查看依赖，设置一下依赖\r\n    if(dep.length > 0) {\r\n        const loadModules = setPaths.call(this, dep);\r\n        runCreateScript.call(this, loadModules);\r\n    }\r\n\r\n    //设置初始化的状态\r\n    opts.findM.isDemand = false;\r\n\r\n    //运行模块内容，返回接口\r\n    depManage.unshift({\r\n        module: opts.findM,\r\n        dep: dep\r\n    });\r\n\r\n    //重设最后的模块\r\n    resetLastLoadedModule.call(this);\r\n}\r\n\r\n//重设最后的模块\r\nfunction resetLastLoadedModule() {\r\n    this.module.lastLoadedModule = {};\r\n}\r\n\r\n//运行插入模块\r\nfunction runCreateScript(loadModules) {\r\n    fn.each(loadModules, (path, index) => {\r\n        createScript.call(this, path);\r\n    });\r\n}\r\n\r\n//检测单前模块是否加载了\r\nfunction isCreateScript(path) {\r\n    const findM = findModule.call(this, path);\r\n    if(fn.isFn(findM.createScript)) {\r\n        return findM.createScript;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\n//路径处理\r\nexport function resolvePath(path) {\r\n    const resPath = [this.baseUrl],\r\n        splitResPath = path.split('/');\r\n\r\n    fn.each(splitResPath, (p, index) => {\r\n        switch(p) {\r\n            case '':\r\n                if(index === 0) resPath[index] = '';\r\n                break;\r\n            case '.':\r\n                break;\r\n            case '..':\r\n                resPath.pop();\r\n                break;\r\n            default:\r\n                resPath.push(p);\r\n        }\r\n    });\r\n    return resPath.join('/');\r\n}\r\n\r\n//处理是否存在js后缀\r\nexport function resolveJsExt(url) {\r\n    if(/\\.js/g.test(url)) return url;\r\n    else return url + '.js';\r\n}\r\n\r\n//查找当前的模块是否在模块中存在\r\nexport function hasModule(m) {\r\n    const path = resolvePath.call(this, m),\r\n        module = this.module;\r\n    if(module.pathModule[m] ||\r\n        module.idModule[m] ||\r\n        module.urlModule[path]\r\n    ) return true;\r\n    return false;\r\n}\r\n\r\n//查找对应的模块内容  权重：path > url > id\r\nexport function findModule(m) {\r\n    const module = this.module,\r\n        path = resolvePath.call(this, m);\r\n    if(module.pathModule[m]) return module.pathModule[m];\r\n    if(module.urlModule[path]) return module.urlModule[path];\r\n    if(module.idModule[m]) return module.idModule[m];\r\n    return false;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/set.js","//demand文件入口\r\nimport demand from './demand/demand.js';\r\n//兼容性处理\r\nimport compatibility from './demand/compatibility';\r\n\r\n(function(global, factory) {\r\n    (global ? (global.demand = factory()) : {});\r\n})(typeof window !== 'undefined' ? window : this, function() {\r\n\r\n    demand.version = \"v1.0.0\";\r\n\r\n    return demand;\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}