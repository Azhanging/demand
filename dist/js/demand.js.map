{"version":3,"sources":["webpack:///webpack/bootstrap 22bc3ac208136789b804","webpack:///./src/demand/fn.js","webpack:///./src/demand/module.js","webpack:///./src/demand/error.js","webpack:///./src/demand/path.js","webpack:///./src/demand/init.js","webpack:///./src/demand/queue.js","webpack:///./src/demand/script.js","webpack:///./src/demand/compatibility.js","webpack:///./src/demand/demand.js","webpack:///./src/demand/dep.js","webpack:///./src/demand/shim.js","webpack:///./src/demand/use.js","webpack:///./src/index.js"],"names":["Fn","array","Array","obj","Object","fn","string","num","isNaN","cb","i","len","length","isArr","hasOwnProperty","context","args","isFn","apply","expr","tm","each","tmItem","index","replace","RegExp","hasModule","findModule","removeModule","setModule","m","path","call","module","pathModule","idModule","urlModule","opts","url","name","lastLoader","lastLoadedModule","dep","type","findM","id","loadModules","isDemand","depManage","unshift","resetLastLoadedModule","_export_","error","errCode","msg","console","warn","resolvePath","resolveJsExt","isHttpModule","HTTP","resolveAliasPath","resolveAlias","resPath","baseUrl","splitResPath","split","p","pop","push","join","test","ALIAS","alias","_alias","key","lastIndex","initRegExp","setPaths","setAlias","ALIAS_PATH","paths","demand","urlModules","pathModules","pathConfig","hasCreateScript","createScript","isStr","aliasPath","Queue","queue","shift","isCreateScript","runCreateScript","script","document","createElement","async","onload","next","onerror","src","getElementsByTagName","appendChild","prototype","indexOf","val","map","mapArr","filter","item","_this","use","status","origin","location","protocol","host","isConfig","config","isObj","shim","loadModule","global","window","undefined","define","buildModuleDep","depData","deps","demandDep","depExport","setShim","_shim","shimContext","useQueue","runUse","cbDeps","err","factory","version"],"mappings":"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","file":"js/demand.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 22bc3ac208136789b804","//常用方法\r\nclass Fn {\r\n\tisArr(array) {\r\n\t\treturn array instanceof Array;\r\n\t}\r\n\r\n\tisObj(obj) {\r\n\t\treturn obj instanceof Object && !(obj instanceof Array) && obj !== null;\r\n\t}\r\n\r\n\tisFn(fn) {\r\n\t\treturn typeof fn === 'function';\r\n\t}\r\n\tisStr(string) {\r\n\t\treturn typeof string === 'string';\r\n\t}\r\n\tisNum(num) {\r\n\t\treturn typeof num === 'number' || !isNaN(num);\r\n\t}\r\n\teach(obj, cb) { //遍历\r\n\t\tlet i = 0,\r\n\t\t\tlen = obj.length;\r\n\t\tif(this.isArr(obj)) {\r\n\t\t\tfor(; i < len; i++) {\r\n\t\t\t\tcb(obj[i], i);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor(i in obj) {\r\n\t\t\t\tif(obj.hasOwnProperty(i)) cb(obj[i], i);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tcb(cb, context, args) { //回调\r\n\t\targs = args ? args : [];\r\n\t\tthis.isFn(cb) ? (cb.apply(context, args)) : null;\r\n\t}\r\n\t//处理正则数据\r\n\tinitRegExp(expr) {\r\n\t\tconst tm = '\\\\/*.?+$^[](){}|\\'\\\"';\r\n\t\tthis.each(tm, (tmItem, index) => {\r\n\t\t\texpr = expr.replace(new RegExp('\\\\' + tmItem, 'g'), '\\\\' + tmItem);\r\n\t\t});\r\n\t\treturn expr;\r\n\t}\r\n}\r\n\r\nexport default new Fn();\n\n\n// WEBPACK FOOTER //\n// ./src/demand/fn.js","import fn from './fn';\r\n//初始化\r\nimport { setPaths } from './init';\r\n\r\nimport { resolvePath } from './path';\r\n\r\nimport { runCreateScript } from './script';\r\n\r\n//查找当前的模块是否在模块中存在\r\nexport function hasModule(m) {\r\n\tconst path = resolvePath.call(this, m),\r\n\t\tmodule = this.module;\r\n\tif(module.pathModule[m] ||\r\n\t\tmodule.idModule[m] ||\r\n\t\tmodule.urlModule[path]\r\n\t) return true;\r\n\treturn false;\r\n}\r\n\r\n//查找对应的模块内容  权重：path > url > id\r\nexport function findModule(m) {\r\n\tconst module = this.module,\r\n\t\tpath = resolvePath.call(this, m);\r\n\tif(module.pathModule[m]) return module.pathModule[m];\r\n\tif(module.urlModule[path]) return module.urlModule[path];\r\n\tif(module.idModule[m]) return module.idModule[m];\r\n\treturn false;\r\n}\r\n\r\n//删除无用的模块\r\nexport function removeModule(opts){\r\n\tdelete this.module.urlModule[opts.url];\r\n\tdelete this.module.pathModule[opts.name];\r\n}\r\n\r\n//设置模块的信息\r\nexport function setModule(opts) {\r\n\r\n\tconst lastLoader = this.module.lastLoadedModule;\r\n\r\n\tlet dep = lastLoader.dep;\r\n\r\n\t//把最后加载的模块内容加载进去\r\n\tfn.each(lastLoader, (module, type) => {\r\n\t\topts.findM[type] = module;\r\n\t});\r\n\r\n\t//扶弱当前的模块中存在id的名，设置id的模块\r\n\tif(lastLoader.id) {\r\n\t\tthis.module.idModule[lastLoader.id] = opts.findM;\r\n\t}\r\n\r\n\t//查看依赖，设置一下依赖\r\n\tif(dep.length > 0) {\r\n\t\tconst loadModules = setPaths.call(this, dep);\r\n\t\trunCreateScript.call(this, loadModules);\r\n\t}\r\n\r\n\t//设置初始化的状态\r\n\topts.findM.isDemand = false;\r\n\r\n\t//运行模块内容，返回接口\r\n\tthis.module.depManage.unshift({\r\n\t\tmodule: opts.findM,\r\n\t\tdep: dep\r\n\t});\r\n\r\n\t//重设最后的模块\r\n\tresetLastLoadedModule.call(this);\r\n}\r\n\r\n//重设最后的模块,在http模块中会存在不同规格的内容，需要设置一个空的规格\r\nfunction resetLastLoadedModule() {\r\n\tthis.module.lastLoadedModule = {\r\n\t\t_export_() {},\r\n\t\tdep: [],\r\n\t\tid: null\r\n\t};\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/demand/module.js","/*\r\n *\t错误处理 \r\n * */\r\n\r\nexport default function error(errCode, msg) {\r\n\tswitch(errCode) {\r\n\t\tcase 0:\r\n\t\t\tconsole.warn('只允许实例化一次！');\r\n\t\t\tbreak;\r\n\t\tcase 1:\r\n\t\t\tconsole.error(msg + '加载模块出错！');\r\n\t\t\tbreak;\r\n\t\tcase 2:\r\n\t\t\tconsole.error('模块使用有误，不能当前模块依赖于自身！');\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tconsole.error('模块问题导致错误信息：' + msg);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/error.js","import fn from './fn';\r\n\r\nconst HTTP = /^http(s)?:\\/\\//;\r\n\r\n//路径处理\r\nexport function resolvePath(path) {\r\n    //如果是http的链接，直接返回直接的http链接\r\n    if(isHttpModule(path)){\r\n        return path;\r\n    }\r\n    \r\n    //处理完alias的路径\r\n    const resolveAliasPath = resolveAlias.call(this,path);\r\n    \r\n\tconst resPath = [this.baseUrl],\r\n\t\tsplitResPath = resolveAliasPath.split('/');\r\n\t\t\r\n\tfn.each(splitResPath, (p, index) => {\r\n\t\tswitch(p) {\r\n\t\t\tcase '':\r\n\t\t\t\tif(index === 0) resPath[index] = '';\r\n\t\t\t\tbreak;\r\n\t\t\tcase '.':\r\n\t\t\t\tbreak;\r\n\t\t\tcase '..':\r\n\t\t\t\tresPath.pop();\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tresPath.push(p);\r\n\t\t}\r\n\t});\r\n\t\r\n\treturn resPath.join('/').replace(/\\/{2,}/g,'\\/');;\r\n}\r\n\r\n//处理是否存在js后缀\r\nexport function resolveJsExt(url) {\r\n\tif(/\\.js/g.test(url)) return url;\r\n\telse return url + '.js';\r\n}\r\n\r\n//判断是否为http(s)的模块\r\nexport function isHttpModule(url){\r\n    return HTTP.test(url);\r\n}\r\n\r\nconst ALIAS = /@(.*?)/g; \r\n\r\n//处理alias的数据\r\nfunction resolveAlias(path){\r\n\t\r\n\t//如果不存在别名，直接返回路径\r\n\tif(!ALIAS.test(path)){\r\n\t\treturn path;\t\r\n\t}\r\n\t\r\n\t//存在别名，把别名替换掉\r\n\tfn.each(this.alias,(_alias,key)=>{\r\n\t\tALIAS.lastIndex = 0;\r\n\t\tif(!ALIAS.test(path)) return path;\r\n\t\tpath = path.replace(new RegExp(fn.initRegExp(key),'g'),_alias);\r\n\t});\r\n\t\r\n\treturn path;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/demand/path.js","import { resolvePath } from './path';\r\n\r\nimport { hasModule, findModule } from './module';\r\n\r\nimport { createScript, isCreateScript } from './script';\r\n\r\nimport fn from './fn';\r\n\r\n//设置alias的规则\r\nconst ALIAS_PATH = /^@\\S{1,}/;\r\n\r\n//设置模块路径\r\nexport function setPaths(paths) {\r\n\r\n\tconst loadModules = [];\r\n\r\n\tfn.each(paths, (path, name) => {\r\n\r\n\t\tconst demand = this,\r\n\t\t\tresPath = resolvePath.call(this, path), //处理完的路径\r\n\t\t\turlModules = this.module.urlModule, //通过url处理的模块\r\n\t\t\tpathModules = this.module.pathModule, //通过config中path的模块\r\n\t\t\tpathConfig = {\r\n\t\t\t\turl: resPath,\r\n\t\t\t\tname: name\r\n\t\t\t};\r\n\r\n\t\t//检查是否存在对应的模块，存在跳过\r\n\t\tif(hasModule.call(this, path)) {\r\n\t\t\tconst hasCreateScript = isCreateScript.call(this, path);\r\n\t\t\t//当前的模块是否被加载script\r\n\t\t\tif(hasCreateScript) {\r\n\t\t\t\thasCreateScript.call(this);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\turlModules[resPath] = {\r\n\t\t\tcreateScript() {\r\n\t\t\t\tcreateScript.call(demand, pathConfig);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//如果是从paths中配置的路径\r\n\t\tif(fn.isStr(name)) {\r\n\t\t\tpathModules[name] = urlModules[resPath];\r\n\t\t}\r\n\r\n\t\tloadModules.push(pathConfig);\r\n\t});\r\n\r\n\t//返回处理完的模块路径\r\n\treturn loadModules;\r\n}\r\n\r\n//设置别名路径\r\nexport function setAlias(alias) {\r\n\tconst aliasPath = {};\r\n\tfn.each(alias, (path, key) => {\r\n\t\tif(ALIAS_PATH.test(key)) {\r\n\t\t\taliasPath[key] = path;\r\n\t\t}\r\n\t});\r\n\treturn aliasPath;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/init.js","/*\r\n    队列 \r\n * */\r\n\r\nexport default class Queue {\r\n    constructor(opts) {\r\n        this.queue = [];\r\n    }\r\n    push(fn) {\r\n        this.queue.push(fn);\r\n    }\r\n    next() {\r\n        if(this.queue.length != 0) {\r\n            this.queue.shift();\r\n        }\r\n        \r\n        if(this.queue.length === 0) this.cb();\r\n    }\r\n}\r\n\r\n//创建队列\r\nexport const queue = new Queue();\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/demand/queue.js","import { findModule, setModule, removeModule } from './module';\r\n\r\nimport { resolveJsExt, isHttpModule } from './path';\r\n\r\nimport { queue } from './queue';\r\n\r\nimport fn from './fn';\r\n\r\nimport error from './error';\r\n\r\n//创建script节点\r\nexport function createScript(opts) {\r\n\tconst script = document.createElement('script');\r\n\t//获取模块\r\n\topts.findM = findModule.call(this, opts.url);\r\n\t//异步加载    \r\n\tscript.async = true;\r\n\r\n\tdelete opts.findM.createScript;\r\n\r\n\tscript.onload = () => {\r\n\t\tsetModule.call(this, opts);\r\n\t\tqueue.next();\r\n\t};\r\n\r\n\tscript.onerror = () => {\r\n\t\tremoveModule.call(this,opts);\r\n\t\terror(1, opts.url);\r\n\t\tqueue.next();\r\n\t};\r\n\r\n\tscript.type = \"text/javascript\";\r\n\r\n\t//先判断是否为http模块，否则就是baseUrl中的模块\r\n\tscript.src = isHttpModule(opts.url) ? opts.url : resolveJsExt(opts.url);\r\n\r\n\t//添加依赖队列数据\r\n\tqueue.push(false);\r\n\r\n\tdocument.getElementsByTagName('head')[0].appendChild(script);\r\n}\r\n\r\n//检测单前模块script是否加载了\r\nexport function isCreateScript(path) {\r\n\tconst findM = findModule.call(this, path);\r\n\tif(fn.isFn(findM.createScript)) {\r\n\t\treturn findM.createScript;\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\n//运行插入模块\r\nexport function runCreateScript(loadModules) {\r\n\tfn.each(loadModules, (path, index) => {\r\n\t\tcreateScript.call(this, path);\r\n\t});\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/script.js","import fn from './fn';\r\n\r\n//兼容性IE8\r\n(function() {\r\n\r\n    //兼容IE8中 的indexOf\r\n    if(!fn.isFn(Array.prototype.indexOf)) {\r\n        Array.prototype.indexOf = function(val) {\r\n            let index = 0,\r\n                len = this.length;\r\n            for(; index < len; index++) {\r\n                if(this[index] === val) return index;\r\n            }\r\n            return -1;\r\n        }\r\n    }\r\n\r\n    //map\r\n    if(!fn.isFn(Array.prototype.map)) {\r\n        Array.prototype.map = function(fn) {\r\n            let mapArr = [],\r\n                i = 0,\r\n                len = this.length;\r\n            for(; i < len; i++) {\r\n                mapArr.push(fn(this[i], i));\r\n            }\r\n            return mapArr;\r\n        }\r\n    }\r\n\r\n    //filter\r\n    if(!fn.isFn(Array.prototype.filter)) {\r\n        Array.prototype.filter = function(fn) {\r\n            let mapArr = [],\r\n                i = 0,\r\n                len = this.length;\r\n            for(; i < len; i++) {\r\n                let item = this[i];\r\n                if(fn(item, i)) mapArr.push(item);\r\n            }\r\n            return mapArr;\r\n        }\r\n    }\r\n\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./src/demand/compatibility.js","import { hasModule, findModule } from './module';\r\n\r\nimport { useQueue, checkRunUse, runUse } from './use';\r\n//初始化\r\nimport { setAlias, setPaths } from './init';\r\n\r\nimport { setShim } from './shim';\r\n\r\nimport error from './error';\r\n\r\nimport fn from './fn';\r\n\r\nexport default function demand(dep, cb) {\r\n\tconst _this = demand,\r\n\t\tmodule = _this.module;\r\n\t//运行依赖\r\n\tif(fn.isArr(dep)) {\r\n\t\tfn.each(dep, (name, index) => {\r\n\t\t\tif(!hasModule.call(_this, name)) return;\r\n\t\t\tconst findM = findModule.call(_this, name);\r\n\t\t\tfn.cb(findM.createScript, _this);\r\n\t\t});\r\n\r\n\t\t//存储回调，等所有的模块加载完毕后调用\r\n\t\tmodule.use.push({\r\n\t\t\tdep: dep,\r\n\t\t\tcb: cb\r\n\t\t});\r\n\r\n\t\tmodule.status ? runUse.call(_this) : null;\r\n\r\n\t} else if(fn.isFn(dep)) {\r\n\t\t/*\r\n\t\t * 使用情况：1.在模块全部加在后追加使用\r\n\t\t *          2.在模块加载依赖的时候使用\r\n\t\t * */\r\n\t\tmodule.use.push({\r\n\t\t\tdep: [],\r\n\t\t\tcb: dep\r\n\t\t});\r\n\r\n\t\tmodule.status ? runUse.call(_this) : null;\r\n\r\n\t} else if(fn.isStr(dep)) {\r\n\t\t//获取模块\r\n\t\treturn findModule.call(_this, dep)['_export_'];\r\n\t}\r\n}\r\n\r\n//获取根路径\r\ndemand.origin = (function() {\r\n\treturn(location.origin || location.protocol + '//' + location.host);\r\n})();\r\n\r\nlet isConfig = false;\r\n\r\n//配置\r\ndemand.config = function(opts) {\r\n\tif(isConfig) {\r\n\t\terror(0);\r\n\t\treturn;\r\n\t}\r\n\t//设置源路径\r\n\tthis.baseUrl = opts.baseUrl ? opts.baseUrl : this.origin;\r\n\t//配置别名\r\n\tthis.alias = fn.isObj(opts.alias) ? setAlias(opts.alias) : {};\r\n\t//设置shim配置\r\n\tsetShim.call(this, opts.shim);\r\n\t//设置paths\r\n\tsetPaths.call(this, opts.paths);\r\n\t//设置queue的回调\r\n\tuseQueue.call(this);\r\n\t//只允许config一次\r\n\tisConfig = true;\r\n};\r\n\r\n//再config后以后加载模块\r\ndemand.loadModule = function(paths) {\r\n\tif(fn.isObj(paths)) setPaths.call(this, paths);\r\n\telse if(fn.isStr(paths)) setPaths.call(this, [paths]);\r\n\tthis.module.status = false;\r\n}\r\n\r\n//设置一下全局的环境\r\ndemand.global = typeof window !== undefined ? window : this;\r\n\r\n//模块存储\r\ndemand.module = {\r\n\tpathModule: {}, //config中的path模块\r\n\tidModule: {}, //id模块\r\n\turlModule: {}, //url路径的模块\r\n\tuse: [], //use集合\r\n\tlastLoadedModule: {}, //最后获取到的模块\r\n\tdepManage: [], //依赖管理\r\n\tstatus: false //全部的use加载状态\r\n};\r\n\r\n//加载模块\r\ndemand.define = function(id, dep, cb) {\r\n\tconst module = {};\r\n\t//存在id的模块\r\n\tif(fn.isStr(id)) {\r\n\t\tmodule['id'] = id;\r\n\t\tif(fn.isArr(dep)) {\r\n\t\t\tmodule['dep'] = dep;\r\n\t\t\tmodule['_export_'] = cb;\r\n\t\t} else if(fn.isFn(dep)) {\r\n\t\t\tmodule['dep'] = [];\r\n\t\t\tmodule['_export_'] = dep;\r\n\t\t}\r\n\t} else if(fn.isArr(id)) {\r\n\t\tmodule['id'] = null;\r\n\t\tmodule['dep'] = id;\r\n\t\tmodule['_export_'] = dep;\r\n\t} else if(fn.isFn(id)) {\r\n\t\tmodule['id'] = null;\r\n\t\tmodule['dep'] = [];\r\n\t\tmodule['_export_'] = id;\r\n\t} else {\r\n\t\tthrow('error');\r\n\t}\r\n\t//设置到最后一个接\r\n\tthis.module.lastLoadedModule = module;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/demand/demand.js","import fn from './fn';\r\n\r\nimport { findModule } from './module';\r\n\r\nimport error from './error';\r\n\r\n/*\r\n *\t设置模块内的依赖depData \r\n * \t{\r\n * \t\tdep:[dep1,dep2],\r\n * \t\tmodule:module\r\n * \t}\r\n * */\r\nexport function buildModuleDep(depData) {\r\n\tconst module = depData.module,\r\n\t\tdeps = depData.dep,\r\n\t\tdemandDep = [];\r\n\r\n\tfn.each(deps, (dep) => {\r\n\t\tconst findM = findModule.call(this, dep),\r\n\t\t\tdepExport = findM._export_;\r\n\r\n\t\t//是否存在自己依赖自己\r\n\t\tif(module === findM) {\r\n\t\t\terror(2);\r\n\t\t\tdemandDep.push(undefined);\r\n\t\t} else {\r\n\t\t\tif(findM && !findM.isDemand) {\r\n\t\t\t\tfindM._export_ = new depExport();\r\n\t\t\t\tfindM.isDemand = true;\r\n\t\t\t}\r\n\t\t\tdemandDep.push(findM._export_);\r\n\t\t}\r\n\t});\r\n\r\n\tif(!module.isDemand) {\r\n\t\tmodule._export_ = module._export_.apply(this, demandDep);\r\n\t\tmodule.isDemand = true;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/dep.js","/*\r\n *\t设置垫片库 \r\n * */\r\nimport fn from './fn';\r\n\r\nimport { setModule } from './module';\r\n\r\nexport function setShim(shim) {\r\n\tfn.each(shim, (_shim, id) => {\r\n\t\t\r\n\t\tthis.define(id, _shim.dep, () => {\r\n\t\t\treturn shimContext.call(this, _shim);\r\n\t\t});\r\n\t\t\r\n\t\tconst lastLoadedModule = this.module.lastLoadedModule;\r\n\t\t\r\n\t\tsetModule.call(this, {\r\n\t\t\turl: null,\r\n\t\t\tname: null,\r\n\t\t\tfindM: lastLoadedModule\r\n\t\t});\r\n\t});\r\n}\r\n\r\n//处理shim中作用域和export接口\r\nfunction shimContext(_shim) {\r\n\tconst context = _shim.context || this.global,\r\n\t\t_export_ = _shim._export_;\r\n\tif(fn.isFn(_shim._export_)) {\r\n\t\treturn _export_.call(context);\r\n\t}\r\n\treturn context[_shim._export_];\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/shim.js","import { buildModuleDep } from './dep';\r\n\r\nimport { queue } from './queue';\r\n\r\nimport fn from './fn';\r\n\r\nimport error from './error';\r\n\r\n//设置模块的依赖队列和use中的cb\r\nexport function useQueue() {\r\n\tqueue.cb = () => {\r\n\t\tconst module = this.module;\r\n\t\t//设置dep的依赖\r\n\t\twhile(module.depManage.length !== 0) {\r\n\t\t\tconst depData = module.depManage.shift();\r\n\t\t\tbuildModuleDep.call(this, depData);\r\n\t\t}\r\n\t\t//处理use\r\n\t\trunUse.call(this);\r\n\t\t//第一次的模块加载全部完毕\r\n\t\tmodule.status = true;\r\n\t}\r\n}\r\n\r\n//运行依赖\r\nexport function runUse() {\r\n\tconst module = this.module;\r\n\tlet cbDeps = [];\r\n\twhile(module.use.length !== 0) {\r\n\t\tconst depData = module.use.shift();\r\n\t\tfn.each(depData.dep, (dep, index) => {\r\n\t\t\tcbDeps.push(this(dep));\r\n\t\t});\r\n\r\n\t\ttry {\r\n\t\t\tdepData.cb.apply(this, cbDeps);\r\n\t\t} catch(err) {\r\n\t\t\terror(null, err);\r\n\t\t}\r\n\r\n\t\t//依赖处理完后清空\r\n\t\tcbDeps = [];\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/use.js","//demand文件入口\r\nimport demand from './demand/demand.js';\r\n//兼容性处理\r\nimport compatibility from './demand/compatibility';\r\n\r\n(function(global, factory) {\r\n    (global ? (global.demand = factory()) : {});\r\n})(typeof window !== 'undefined' ? window : this, function() {\r\n\r\n    demand.version = \"v1.0.0\";\r\n\r\n    return demand;\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}