{"version":3,"sources":["webpack:///webpack/bootstrap 8641be895065ee29f5ae","webpack:///./src/demand/fn.js","webpack:///./src/demand/compatibility.js","webpack:///./src/demand/demand.js","webpack:///./src/demand/set.js","webpack:///./src/index.js","webpack:///./src/demand/queue.js"],"names":["Fn","array","Array","length","obj","Object","fn","string","num","isNaN","cb","i","len","isArr","hasOwnProperty","context","args","isFn","apply","prototype","indexOf","val","index","map","mapArr","push","filter","item","demand","dep","each","name","module","installedModules","createScript","origin","location","protocol","host","configed","config","opts","console","warn","baseUrl","alias","isObj","call","paths","use","define","id","isStr","setAlias","setPaths","resolvePath","resolveJsExt","ALIAS_PATH","aliasPath","path","key","test","resPath","isLoaded","url","script","document","createElement","async","setAttribute","src","getElementsByTagName","appendChild","splitResPath","split","p","pop","join","global","factory","window","version","Queue","queue","shift"],"mappings":"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","file":"js/demand.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8641be895065ee29f5ae","//常用方法\r\nexport default class Fn {\r\n    isArr(array) {\r\n        return array instanceof Array || !!(array && array.length);\r\n    }\r\n\r\n    isObj(obj) {\r\n        return obj instanceof Object && !(obj instanceof Array) && obj !== null;\r\n    }\r\n\r\n    isFn(fn) {\r\n        return typeof fn === 'function';\r\n    }\r\n    isStr(string) {\r\n        return typeof string === 'string';\r\n    }\r\n    isNum(num) {\r\n        return typeof num === 'number' || !isNaN(num);\r\n    }\r\n    each(obj, cb) { //遍历\r\n        let i = 0,\r\n            len = obj.length;\r\n        if(this.isArr(obj)) {\r\n            for(; i < len; i++) {\r\n                cb(obj[i], i);\r\n            }\r\n        } else {\r\n            for(i in obj) {\r\n                if(obj.hasOwnProperty(i)) cb(obj[i], i);\r\n            }\r\n        }\r\n    }\r\n    cb(cb, context, args) { //回调\r\n        args = args ? args : [];\r\n        this.isFn(cb) ? (cb.apply(context, args)) : null;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/fn.js","import Fn from './fn';\r\n\r\nconst fn = new Fn();\r\n\r\n//兼容性IE8\r\n(function() {\r\n\r\n    //兼容IE8中 的indexOf\r\n    if(!fn.isFn(Array.prototype.indexOf)) {\r\n        Array.prototype.indexOf = function(val) {\r\n            let index = 0,\r\n                len = this.length;\r\n            for(; index < len; index++) {\r\n                if(this[index] === val) return index;\r\n            }\r\n            return -1;\r\n        }\r\n    }\r\n\r\n    //map\r\n    if(!fn.isFn(Array.prototype.map)) {\r\n        Array.prototype.map = function(fn) {\r\n            let mapArr = [],\r\n                i = 0,\r\n                len = this.length;\r\n            for(; i < len; i++) {\r\n                mapArr.push(fn(this[i], i));\r\n            }\r\n            return mapArr;\r\n        }\r\n    }\r\n\r\n    //filter\r\n    if(!fn.isFn(Array.prototype.filter)) {\r\n        Array.prototype.filter = function(fn) {\r\n            let mapArr = [],\r\n                i = 0,\r\n                len = this.length;\r\n            for(; i < len; i++) {\r\n                let item = this[i];\r\n                if(fn(item, i)) mapArr.push(item);\r\n            }\r\n            return mapArr;\r\n        }\r\n    }\r\n\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./src/demand/compatibility.js","import Fn from './fn';\r\n\r\nimport {\r\n    setAlias,\r\n    setPaths\r\n} from './set';\r\n\r\nconst fn = new Fn();\r\n\r\nexport default function demand(dep,cb) {\r\n    if(fn.isArr(dep)){\r\n        fn.each(dep,(name,index)=>{\r\n            demand.module.installedModules[name].createScript();\r\n        });\r\n    }\r\n}\r\n\r\n//获取根路径\r\ndemand.origin = (function() {\r\n    return(location.origin || location.protocol + '//' + location.host);\r\n})();\r\n\r\n//配置状态\r\nlet configed = false;\r\n\r\n//配置\r\ndemand.config = (opts) => {\r\n    //不能重新配置模块\r\n    if(configed) {\r\n        console.warn('不能重复配置模块！');\r\n        return;\r\n    }\r\n    //设置源路径\r\n    demand.baseUrl = opts.baseUrl ? opts.baseUrl : demand.origin;\r\n    //配置别名\r\n    demand.alias = fn.isObj(opts.alias) ? setAlias(opts.alias) : {};\r\n    //设置paths\r\n    setPaths.call(demand,opts.paths);\r\n    //单例配置\r\n    configed = true;\r\n};\r\n\r\n//模块存储\r\ndemand.module = {\r\n    installedModules: {},\r\n    use:[]\r\n};\r\n\r\n//加载模块\r\ndemand.define = (id, dep, cb) => {\r\n    //第一个参数为id名字\r\n    if(fn.isStr(id)){\r\n        \r\n    }\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/demand/demand.js","/*\r\n * set，设置模块方法\r\n * */\r\n\r\nimport Queue from './queue'; \r\n\r\nimport Fn from './fn';\r\n\r\nconst fn = new Fn();\r\n\r\n//alias的规则\r\nconst ALIAS_PATH = /^@\\S{1,}/;\r\n\r\n//设置别名路径\r\nexport function setAlias(alias) {\r\n    const aliasPath = {};\r\n    fn.each(alias, (path, key) => {\r\n        if(ALIAS_PATH.test(key)) {\r\n            aliasPath[key] = path;\r\n        }\r\n    });\r\n    return aliasPath;\r\n}\r\n\r\n//设置模块路径\r\nexport function setPaths(paths) {\r\n    if(!fn.isObj(paths)) return;\r\n    fn.each(paths, (path, name) => {\r\n        const resPath = resolvePath.call(this, path);\r\n        this.module.installedModules[name] = {\r\n            isLoaded: false,\r\n            createScript: function() {\r\n                createScript(resPath, name);\r\n            }\r\n        };\r\n    });\r\n}\r\n\r\n//创建script节点\r\nexport function createScript(url, name) {\r\n    const script = document.createElement('script');\r\n    script.async = true;\r\n    script.setAttribute('data-demand-model', name ? name : url);\r\n    script.src = resolveJsExt(url);\r\n    document.getElementsByTagName('head')[0].appendChild(script);\r\n}\r\n\r\n//路径处理\r\nexport function resolvePath(path) {\r\n    const resPath = [this.baseUrl],\r\n        splitResPath = path.split('/');\r\n\r\n    fn.each(splitResPath, (p, index) => {\r\n        switch(p) {\r\n            case '':\r\n            case '.':\r\n                break;\r\n            case '..':\r\n                resPath.pop();\r\n                break;\r\n            default:\r\n                resPath.push(p);\r\n        }\r\n    });\r\n    return resPath.join('/');\r\n}\r\n\r\n//处理是否存在js后缀\r\nexport function resolveJsExt(url){\r\n    if(/\\.js/g.test(url)) return url;\r\n    else return url + '.js'; \r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/demand/set.js","//demand文件入口\r\nimport demand from './demand/demand.js';\r\n//兼容性处理\r\nimport compatibility from './demand/compatibility';\r\n\r\n(function(global, factory) {\r\n    (global ? (global.demand = factory()) : {});\r\n})(typeof window !== 'undefined' ? window : this, function() {\r\n\r\n    demand.version = \"v1.0.0\";\r\n\r\n    return demand;\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","/*\r\n    队列 \r\n * */\r\n\r\nexport default class Queue {\r\n    constructor() {\r\n        this.queue = [];\r\n    }\r\n    push(fn) {\r\n        this.queue.push(fn);\r\n    }\r\n    next() {\r\n        if(this.queue.length != 0) this.queue.shift()();\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/demand/queue.js"],"sourceRoot":""}